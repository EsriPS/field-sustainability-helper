"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[3503],{96669:function(i,t,e){function r(i,t){return t?"xoffset"in t&&t.xoffset?Math.max(i,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(i,Math.abs(t.yoffset||0)):i:i}function n(i,t){return"number"==typeof i?i:i&&i.stops&&i.stops.length?function(i){for(var t=0,e=0,r=0;r<i.length;r++){var n=i[r].size;"number"==typeof n&&(t+=n,e++)}return t/e}(i.stops):t}function a(i,t){if(!t)return i;var e=t.filter((function(i){return"size"===i.type})).map((function(t){var e=t.maxSize,r=t.minSize;return(n(e,i)+n(r,i))/2})),r=0,a=e.length;if(0===a)return i;for(var s=0;s<a;s++)r+=e[s];var o=Math.floor(r/a);return Math.max(o,i)}function s(i){var t=i&&i.renderer,e="touch"===(i&&i.event&&i.event.pointerType)?9:6;if(!t)return e;var n="visualVariables"in t?a(e,t.visualVariables):e;if("simple"===t.type)return r(n,t.symbol);if("unique-value"===t.type){var s=n;return t.uniqueValueInfos.forEach((function(i){s=r(s,i.symbol)})),s}if("class-breaks"===t.type){var o=n;return t.classBreakInfos.forEach((function(i){o=r(o,i.symbol)})),o}return t.type,n}e.d(t,{k:function(){return s}})},53503:function(i,t,e){e.r(t),e.d(t,{default:function(){return V}});var r=e(93433),n=e(37762),a=e(15671),s=e(43144),o=e(60136),h=e(29388),c=e(27366),l=(e(51508),e(91505)),u=e(100),p=e(84652),v=e(92026),f=e(8537),y=e(49861),d=(e(25243),e(69912)),g=e(93655),_=e(20008),b=e(83089),m=(0,s.Z)((function i(t,e,r,n,s){(0,a.Z)(this,i),this.graphic=t,this.index=e,this.x=r,this.y=n,this.viewEvent=s,this.type="graphic-click"})),w=(0,s.Z)((function i(t,e,r,n,s){(0,a.Z)(this,i),this.graphic=t,this.index=e,this.x=r,this.y=n,this.viewEvent=s,this.type="graphic-double-click"})),k=function(){function i(t,e,r,n,s,o,h,c,l,u){(0,a.Z)(this,i),this.graphic=t,this.allGraphics=e,this.index=r,this.x=n,this.y=s,this.dx=o,this.dy=h,this.totalDx=c,this.totalDy=l,this.viewEvent=u,this.defaultPrevented=!1,this.type="graphic-move-start"}return(0,s.Z)(i,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),i}(),G=function(){function i(t,e,r,n,s,o,h,c,l,u){(0,a.Z)(this,i),this.graphic=t,this.allGraphics=e,this.index=r,this.x=n,this.y=s,this.dx=o,this.dy=h,this.totalDx=c,this.totalDy=l,this.viewEvent=u,this.defaultPrevented=!1,this.type="graphic-move"}return(0,s.Z)(i,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),i}(),x=function(){function i(t,e,r,n,s,o,h,c,l,u){(0,a.Z)(this,i),this.graphic=t,this.allGraphics=e,this.index=r,this.x=n,this.y=s,this.dx=o,this.dy=h,this.totalDx=c,this.totalDy=l,this.viewEvent=u,this.defaultPrevented=!1,this.type="graphic-move-stop"}return(0,s.Z)(i,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),i}(),C=(0,s.Z)((function i(t,e,r,n,s){(0,a.Z)(this,i),this.graphic=t,this.index=e,this.x=r,this.y=n,this.viewEvent=s,this.type="graphic-pointer-over"})),S=(0,s.Z)((function i(t,e,r,n,s){(0,a.Z)(this,i),this.graphic=t,this.index=e,this.x=r,this.y=n,this.viewEvent=s,this.type="graphic-pointer-out"})),Z=(0,s.Z)((function i(t,e,r,n,s){(0,a.Z)(this,i),this.graphic=t,this.index=e,this.x=r,this.y=n,this.viewEvent=s,this.type="graphic-pointer-down"})),M=(0,s.Z)((function i(t,e,r,n,s){(0,a.Z)(this,i),this.graphic=t,this.index=e,this.x=r,this.y=n,this.viewEvent=s,this.type="graphic-pointer-up"})),O=e(31235),D=e(2346),E=e(72612),P=e(16072),H=e(16851),T=e(61459),I=function(i){(0,o.Z)(e,i);var t=(0,h.Z)(e);function e(i){var r;return(0,a.Z)(this,e),(r=t.call(this,i))._activeGraphic=null,r._indicators=[],r._dragEvent=null,r._handles=new u.Z,r._hoverGraphic=null,r._initialDragGeometry=null,r._viewHandles=new u.Z,r._manipulators=[],r._layerViews=null,r.type="graphic-mover",r.callbacks={onGraphicClick:function(){},onGraphicDoubleClick:function(){},onGraphicMoveStart:function(){},onGraphicMove:function(){},onGraphicMoveStop:function(){},onGraphicPointerOver:function(){},onGraphicPointerOut:function(){},onGraphicPointerDown:function(){},onGraphicPointerUp:function(){}},r.enableMoveAllGraphics=!1,r.graphics=[],r.indicatorsEnabled=!0,r.layer=new g.Z({listMode:"hide",internal:!0,title:"GraphicMover highlight layer"}),r.view=null,r}return(0,s.Z)(e,[{key:"initialize",value:function(){var i=this;(0,b.p)(this.view,this.layer),this.refresh(),this._handles.add([(0,f.YP)(this,["graphics","graphics.length"],(function(){return i.refresh()})),(0,f.N1)(this,"view.ready",(function(){i._viewHandles.add([i.view.on("immediate-click",(function(t){return i._clickHandler(t)}),O.f.TOOL),i.view.on("double-click",(function(t){return i._doubleClickHandler(t)}),O.f.TOOL),i.view.on("pointer-down",(function(t){return i._pointerDownHandler(t)}),O.f.TOOL),i.view.on("pointer-move",(function(t){return i._pointerMoveHandler(t)}),O.f.TOOL),i.view.on("pointer-up",(function(t){return i._pointerUpHandler(t)}),O.f.TOOL),i.view.on("drag",(function(t){return i._dragHandler(t)}),O.f.TOOL),i.view.on("key-down",(function(t){return i._keyDownHandler(t)}),O.f.TOOL)])}))])}},{key:"destroy",value:function(){var i;this._removeIndicators(),null==(i=this.view.map)||i.remove(this.layer),this.layer.destroy(),this.reset(),this._manipulators.forEach((function(i){return i.destroy()})),this._manipulators=null,this._handles=(0,v.SC)(this._handles),this._viewHandles=(0,v.SC)(this._viewHandles)}},{key:"state",get:function(){var i=!!this.get("view.ready"),t=!!this.get("graphics.length"),e=this._activeGraphic;return i&&t?e?"moving":"active":i?"ready":"disabled"}},{key:"refresh",value:function(){this._setUpIndicators(),this._setUpManipulators(),this._syncLayerViews()}},{key:"reset",value:function(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}},{key:"updateGeometry",value:function(i,t){var e=this.graphics[i];e&&(e.set("geometry",t),this._setUpIndicators())}},{key:"_clickHandler",value:function(i){var t=this._findTargetGraphic((0,E.vT)(i));if(t){var e=new m(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit("graphic-click",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}},{key:"_doubleClickHandler",value:function(i){var t=this._findTargetGraphic((0,E.vT)(i));if(t){var e=new w(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit("graphic-double-click",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}},{key:"_pointerDownHandler",value:function(i){var t=this._findTargetGraphic((0,E.vT)(i));if(t){this._activeGraphic=t;var e=i.x,r=i.y,n=new Z(t,this.graphics.indexOf(t),e,r,i);this.emit("graphic-pointer-down",n),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(n)}else this._activeGraphic=null}},{key:"_pointerUpHandler",value:function(i){if(this._activeGraphic){var t=i.x,e=i.y,r=this.graphics.indexOf(this._activeGraphic),n=new M(this._activeGraphic,r,t,e,i);this.emit("graphic-pointer-up",n),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(n)}}},{key:"_pointerMoveHandler",value:function(i){if(!this._dragEvent){var t=this._findTargetGraphic((0,E.vT)(i));if(t){var e=i.x,r=i.y;if(this._hoverGraphic){if(this._hoverGraphic===t)return;var n=this.graphics.indexOf(this._hoverGraphic),a=new S(this.graphics[n],n,e,r,i);this._hoverGraphic=null,this.emit("graphic-pointer-out",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}var s=this.graphics.indexOf(t),o=new C(t,s,e,r,i);return this._hoverGraphic=t,this.emit("graphic-pointer-over",o),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(o))}if(this._hoverGraphic){var h=i.x,c=i.y,l=this.graphics.indexOf(this._hoverGraphic),u=new S(this.graphics[l],l,h,c,i);this._hoverGraphic=null,this.emit("graphic-pointer-out",u),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(u)}}}},{key:"_dragHandler",value:function(i){var t=this;if(("start"===i.action||this._dragEvent)&&this._activeGraphic&&this._activeGraphic.geometry){"start"===i.action&&this._removeIndicators(),i.stopPropagation();var e=i.action,r=i.x,n=i.y,a=this.graphics.indexOf(this._activeGraphic),s=this._dragEvent?r-this._dragEvent.x:0,o=this._dragEvent?n-this._dragEvent.y:0,h=r-i.origin.x,c=n-i.origin.y,l="start"===e?this._activeGraphic.geometry:this._initialDragGeometry,u=(0,_.e7)(l,h,c,this.view);if(this._activeGraphic.geometry=u,this.enableMoveAllGraphics&&this.graphics.forEach((function(i){i!==t._activeGraphic&&(i.geometry=(0,_.e7)(i.geometry,s,o,t.view))})),this._dragEvent=i,"start"===e){this._initialDragGeometry=(0,p.d9)(l);var v=new k(this._activeGraphic,this.graphics,a,r,n,s,o,h,c,i);this.emit("graphic-move-start",v),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(v),v.defaultPrevented&&this._activeGraphic.set("geometry",l)}else if("update"===e){var f=new G(this._activeGraphic,this.graphics,a,r,n,s,o,h,c,i);this.emit("graphic-move",f),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(f),f.defaultPrevented&&(this._activeGraphic.geometry=l)}else{var y=new x(this._activeGraphic,this.graphics,a,r,n,s,o,h,c,i);this._dragEvent=null,this._activeGraphic=null,this._setUpIndicators(),this.emit("graphic-move-stop",y),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(y),y.defaultPrevented&&(this.graphics[a].set("geometry",this._initialDragGeometry),this._setUpIndicators()),this._initialDragGeometry=null}}}},{key:"_keyDownHandler",value:function(i){"a"!==i.key&&"d"!==i.key&&"n"!==i.key||"moving"!==this.state||i.stopPropagation()}},{key:"_findTargetGraphic",value:function(i){var t=this,e=this.view.toMap(i),r=null,n=Number.MAX_VALUE;this._syncLayerViews();var a=this._layerViews.flatMap((function(i){return"graphicsViews"in i?Array.from(i.graphicsViews(),(function(i){return i.hitTest(e)})).flat():i.graphicsView.hitTest(e)})).filter((function(i){return t.graphics.indexOf(i)>-1}));return a.length?a[0]:(this._manipulators.forEach((function(t){var e=t.intersectionDistance(i);(0,v.pC)(e)&&e<n&&(n=e,r=t.graphic)})),r)}},{key:"_syncLayerViews",value:function(){var i=this;this._layerViews=[];var t,e=new Set,a=(0,n.Z)(this.graphics);try{var s=function(){var r=t.value,n=i.view.allLayerViews.find((function(i){var t=i.layer;return"sublayers"in t&&(0,v.pC)(t.sublayers)&&!!t.sublayers.find((function(i){return i===r.layer}))||t===r.layer}));n&&e.add(n)};for(a.s();!(t=a.n()).done;)s()}catch(o){a.e(o)}finally{a.f()}this._layerViews=(0,r.Z)(e)}},{key:"_setUpManipulators",value:function(){var i=this.graphics,t=this.view;this._manipulators.forEach((function(i){return i.destroy()})),this._manipulators=null!=i&&i.length?i.map((function(i){return new D.L({graphic:i,view:t})})):[]}},{key:"_setUpIndicators",value:function(){var i,t=this;this._removeIndicators(),this.indicatorsEnabled&&(this._indicators=(null==(i=this.graphics)?void 0:i.map((function(i){var e=i.clone();return e.symbol=t._getSymbolForIndicator(i),e})))||[],this.layer.addMany(this._indicators))}},{key:"_removeIndicators",value:function(){this._indicators.length&&(this.layer.removeMany(this._indicators),this._indicators.forEach((function(i){return i.destroy()})),this._indicators=[])}},{key:"_getSymbolForIndicator",value:function(i){if((0,v.Wi)(i.symbol))return null;switch(i.symbol.type){case"cim":return new P.Z({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":var t=i.symbol,e=t.xoffset,r=t.yoffset,n=t.height,a=t.width,s=n===a?a:Math.max(n,a);return new P.Z({xoffset:e,yoffset:r,size:s,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"simple-marker":var o=i.symbol,h=o.xoffset,c=o.yoffset,l=o.size,u=o.style;return new P.Z({xoffset:h,yoffset:c,style:"circle"===u?"circle":"square",size:l+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"simple-fill":return new T.Z({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new H.Z({color:[255,127,0,1],style:"dash",width:1});case"text":var p=i.symbol,f=p.xoffset,y=p.yoffset;return new P.Z({xoffset:f,yoffset:y,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});default:return null}}}]),e}(l.Z.EventedAccessor);(0,c._)([(0,y.Cb)()],I.prototype,"_activeGraphic",void 0),(0,c._)([(0,y.Cb)({readOnly:!0})],I.prototype,"type",void 0),(0,c._)([(0,y.Cb)()],I.prototype,"callbacks",void 0),(0,c._)([(0,y.Cb)()],I.prototype,"enableMoveAllGraphics",void 0),(0,c._)([(0,y.Cb)()],I.prototype,"graphics",void 0),(0,c._)([(0,y.Cb)()],I.prototype,"indicatorsEnabled",void 0),(0,c._)([(0,y.Cb)()],I.prototype,"layer",void 0),(0,c._)([(0,y.Cb)({readOnly:!0})],I.prototype,"state",null),(0,c._)([(0,y.Cb)()],I.prototype,"view",void 0);var V=I=(0,c._)([(0,d.j)("esri.views.draw.support.GraphicMover")],I)},2346:function(i,t,e){e.d(t,{L:function(){return k}});var r=e(15671),n=e(43144),a=e(60136),s=e(29388),o=e(27366),h=e(85015),c=e(91505),l=e(92026),u=e(17842),p=e(49861),v=(e(63780),e(93169),e(25243),e(69912)),f=e(88396),y=e(11186),d=e(71353),g=e(60176),_=e(74509),b=e(61574),m=e(64575),w=e(45008),k=function(i){(0,a.Z)(e,i);var t=(0,s.Z)(e);function e(i){var n;return(0,r.Z)(this,e),(n=t.call(this,i)).layer=null,n.interactive=!0,n.selectable=!1,n.grabbable=!0,n.dragging=!1,n.cursor=null,n.events=new c.Z.EventEmitter,n._circleCollisionCache=null,n._graphicSymbolChangedHandle=null,n._originalSymbol=null,n}return(0,n.Z)(e,[{key:"graphic",set:function(i){this._circleCollisionCache=null,this._originalSymbol=i.symbol,this._set("graphic",i),this.attachSymbolChanged()}},{key:"elevationInfo",get:function(){var i="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=(0,_.vu)(this.graphic),e=i?i.offset:0;return new m.Z({mode:t,offset:e})}},{key:"focusedSymbol",set:function(i){i!==this._get("focusedSymbol")&&(this._set("focusedSymbol",i),this._updateGraphicSymbol(),this._circleCollisionCache=null)}},{key:"grabbableForEvent",value:function(){return!0}},{key:"grabbing",set:function(i){i!==this._get("grabbing")&&(this._set("grabbing",i),this._updateGraphicSymbol())}},{key:"hovering",set:function(i){i!==this._get("hovering")&&(this._set("hovering",i),this._updateGraphicSymbol())}},{key:"selected",set:function(i){i!==this._get("selected")&&(this._set("selected",i),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:i?"select":"deselect"}))}},{key:"_focused",get:function(){return this._get("hovering")||this._get("grabbing")}},{key:"destroy",value:function(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}},{key:"intersectionDistance",value:function(i){var t=this.graphic;if(!1===t.visible)return null;var e=t.geometry;if((0,l.Wi)(e))return null;var r=this._get("focusedSymbol"),n=(0,l.pC)(r)?r:t.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,i,e,n):this._intersectDistance3D(this.view,i,t)}},{key:"attach",value:function(){this.attachSymbolChanged(),(0,l.pC)(this.layer)&&this.layer.add(this.graphic)}},{key:"detach",value:function(){this.detachSymbolChanged(),this._resetGraphicSymbol(),(0,l.pC)(this.layer)&&this.layer.remove(this.graphic)}},{key:"attachSymbolChanged",value:function(){var i=this;this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch("symbol",(function(t){(0,l.pC)(t)&&t!==i.focusedSymbol&&t!==i._originalSymbol&&(i._originalSymbol=t,i._focused&&(0,l.pC)(i.focusedSymbol)&&(i.graphic.symbol=i.focusedSymbol))}),!0)}},{key:"detachSymbolChanged",value:function(){(0,l.pC)(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}},{key:"_updateGraphicSymbol",value:function(){this.graphic.symbol=this._focused&&(0,l.pC)(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}},{key:"_resetGraphicSymbol",value:function(){this.graphic.symbol=this._originalSymbol}},{key:"_intersectDistance2D",value:function(i,t,e,r){if(r=r||(0,b.js)(e),(0,l.Wi)(r))return null;var n=this._circleCollisionCache;if("point"!==e.type||"simple-marker"!==r.type)return(0,w.D)(t,e,i)?1:null;if((0,l.Wi)(n)||!n.originalPoint.equals(e)){var a=e,s=i.spatialReference;if((0,g.Up)(a.spatialReference,s)){var o=(0,g.iV)(a,s);n={originalPoint:a.clone(),mapPoint:o,radiusPx:(0,u.F2)(r.size)},this._circleCollisionCache=n}}if((0,l.pC)(n)){var h=(0,u.md)(t,x),c=i.toScreen(n.mapPoint),p=n.radiusPx,v=c.x+(0,u.F2)(r.xoffset),y=c.y-(0,u.F2)(r.yoffset);return(0,f.a)(h,[v,y])<p*p?1:null}return null}},{key:"_intersectDistance3D",value:function(i,t,e){var r=i.toMap(t,{include:[e]});return r&&(0,g.KC)(r,G,i.renderSpatialReference)?(0,y.i)(G,i.state.camera.eye):null}}]),e}(h.Z);(0,o._)([(0,p.Cb)({constructOnly:!0,nonNullable:!0})],k.prototype,"graphic",null),(0,o._)([(0,p.Cb)({readOnly:!0})],k.prototype,"elevationInfo",null),(0,o._)([(0,p.Cb)({constructOnly:!0,nonNullable:!0})],k.prototype,"view",void 0),(0,o._)([(0,p.Cb)({value:null})],k.prototype,"focusedSymbol",null),(0,o._)([(0,p.Cb)({constructOnly:!0})],k.prototype,"layer",void 0),(0,o._)([(0,p.Cb)()],k.prototype,"interactive",void 0),(0,o._)([(0,p.Cb)()],k.prototype,"selectable",void 0),(0,o._)([(0,p.Cb)()],k.prototype,"grabbable",void 0),(0,o._)([(0,p.Cb)({value:!1})],k.prototype,"grabbing",null),(0,o._)([(0,p.Cb)()],k.prototype,"dragging",void 0),(0,o._)([(0,p.Cb)()],k.prototype,"hovering",null),(0,o._)([(0,p.Cb)({value:!1})],k.prototype,"selected",null),(0,o._)([(0,p.Cb)()],k.prototype,"cursor",void 0),k=(0,o._)([(0,v.j)("esri.views.interactive.GraphicManipulator")],k);var G=(0,d.c)(),x=(0,u.s1)()},45008:function(i,t,e){e.d(t,{K:function(){return o},D:function(){return h}});e(59486);var r=e(92026),n=e(68860),a=e(96669),s=e(53866);function o(i,t,e){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new s.Z;if("2d"===e.type)a=t*e.resolution;else if("3d"===e.type){var h=e.overlayPixelSizeInMapUnits(i),c=e.basemapSpatialReference;a=(0,r.pC)(c)&&!c.equals(e.spatialReference)?(0,n.c9)(c)/(0,n.c9)(e.spatialReference):t*h}var l=i.x-a,u=i.y-a,p=i.x+a,v=i.y+a,f=e.spatialReference;return o.xmin=Math.min(l,p),o.ymin=Math.min(u,v),o.xmax=Math.max(l,p),o.ymax=Math.max(u,v),o.spatialReference=f,o}function h(i,t,e){var n=e.toMap(i);return!(0,r.Wi)(n)&&o(n,(0,a.k)(),e,c).intersects(t)}var c=new s.Z}}]);
//# sourceMappingURL=3503.98e364cf.chunk.js.map