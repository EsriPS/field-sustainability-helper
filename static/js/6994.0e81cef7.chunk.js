"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[6994,3009],{46228:function(e,t,r){r.d(t,{I:function(){return a},v:function(){return i}});var n=r(16889);function a(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(0,n.uZ)(e,0,s),i=0;i<4;i++)t[r+i]=Math.floor(256*c(a*o[i]))}function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0,n=0;n<4;n++)r+=e[t+n]*u[n];return r}var o=[1,256,65536,16777216],u=[1/256,1/65536,1/16777216,1/4294967296],s=i(new Uint8ClampedArray([255,255,255,255]));function c(e){return e-Math.floor(e)}},58971:function(e,t,r){r.d(t,{ym:function(){return M},RF:function(){return d},vY:function(){return c},J9:function(){return w},U1:function(){return z},Ie:function(){return I},G6:function(){return k}});var n=r(29439),a=r(92026),i=r(77981);var o=function(e,t,r){return[t,r]},u=function(e,t,r){return[t,r,e[2]]},s=function(e,t,r){return[t,r,e[2],e[3]]};function c(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,a.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function f(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function m(e,t,r){for(var n,a,i,o,u=[],s=0;s<r.length;s++){var c=r[s];s>0?(i=l(e,c[0]),o=f(e,c[1]),i===n&&o===a||(u.push(t(c,i-n,o-a)),n=i,a=o)):(n=l(e,c[0]),a=f(e,c[1]),u.push(t(c,n,a)))}return u.length>0?u:null}function h(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function y(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function g(e,t,r){var a=new Array(r.length);if(!r.length)return a;var i=(0,n.Z)(e.scale,2),o=i[0],u=i[1],s=h(e,r[0][0]),c=y(e,r[0][1]);a[0]=t(r[0],s,c);for(var l=1;l<r.length;l++){var f=r[l];s+=f[0]*o,c-=f[1]*u,a[l]=t(f,s,c)}return a}function p(e,t,r){for(var n=new Array(r.length),a=0;a<r.length;a++)n[a]=g(e,t,r[a]);return n}function v(e,t,r,n,a){return t.points=function(e,t,r,n){return m(e,r?n?s:u:n?u:o,t)}(e,r.points,n,a),t}function d(e,t,r,n,a){return t.x=l(e,r.x),t.y=f(e,r.y),t!==r&&(n&&(t.z=r.z),a&&(t.m=r.m)),t}function x(e,t,r,n,a){var i=function(e,t,r,n){for(var a=[],i=r?n?s:u:n?u:o,c=0;c<t.length;c++){var l=m(e,i,t[c]);l&&l.length>=3&&a.push(l)}return a.length?a:null}(e,r.rings,n,a);return i?(t.rings=i,t):null}function C(e,t,r,n,a){var i=function(e,t,r,n){for(var a=[],i=r?n?s:u:n?u:o,c=0;c<t.length;c++){var l=m(e,i,t[c]);l&&l.length>=2&&a.push(l)}return a.length?a:null}(e,r.paths,n,a);return i?(t.paths=i,t):null}function M(e,t){return e&&t?(0,i.wp)(t)?d(e,{},t,!1,!1):(0,i.l9)(t)?C(e,{},t,!1,!1):(0,i.oU)(t)?x(e,{},t,!1,!1):(0,i.aW)(t)?v(e,{},t,!1,!1):(0,i.YX)(t)?function(e,t,r,n,a){return t.xmin=l(e,r.xmin),t.ymin=f(e,r.ymin),t.xmax=l(e,r.xmax),t.ymax=f(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),a&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}(e,{},t,!1,!1):null:null}function w(e,t,r,n,i){return(0,a.pC)(r)&&(t.points=function(e,t,r,n){return g(e,r?n?s:u:n?u:o,t)}(e,r.points,n,i)),t}function z(e,t,r,n,i){return(0,a.Wi)(r)||(t.x=h(e,r.x),t.y=y(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m))),t}function I(e,t,r,n,i){return(0,a.pC)(r)&&(t.rings=function(e,t,r,n){return p(e,r?n?s:u:n?u:o,t)}(e,r.rings,n,i)),t}function k(e,t,r,n,i){return(0,a.pC)(r)&&(t.paths=function(e,t,r,n){return p(e,r?n?s:u:n?u:o,t)}(e,r.paths,n,i)),t}},94304:function(e,t,r){r.r(t),r.d(t,{CIMSymbolRasterizer:function(){return k},GeometryStyle:function(){return n}});var n,a,i=r(37762),o=r(15861),u=r(15671),s=r(43144),c=r(87757),l=r(51995),f=r(76200),m=r(66978),h=r(17842),y=r(643),g=r(77981),p=r(79815),v=r(59001),d=r(16285),x=r(22532),C=r(31027),M=r(49729),w=r(83748);(a=n||(n={})).Legend="legend",a.Preview="preview";var z=function(e,t,r){if(e&&e.targetSize){var n;if(r){var a=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);n=e.targetSize/(0,h.F2)(a)}else n=e.targetSize/t.referenceSize;return n}return e&&e.scaleFactor?e.scaleFactor:1},I={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}},k=function(){function e(t,r){(0,u.Z)(this,e),this._spatialReference=t,this._avoidSDF=r,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new x.d,this._cimResourceManager=new v.Z,this._rasterizer=new d.Z(this._cimResourceManager)}return(0,s.Z)(e,[{key:"rasterizeCIMSymbolAsync",value:function(){var e=(0,o.Z)(c.mark((function e(t,r,n,a,i,o,u,s){var l;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=a||(r?null!=r.centroid?"esriGeometryPolygon":(0,g.Ji)(r.geometry):null)||b(t),e.next=3,this.analyzeCIMSymbol(t,r?P(r.attributes):null,n,a,s);case 3:return l=e.sent,e.abrupt("return",this.rasterizeCIMSymbol(l,r,a,i,o,u));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i,o,u,s){return e.apply(this,arguments)}}()},{key:"analyzeCIMSymbol",value:function(){var e=(0,o.Z)(c.mark((function e(t,r,n,a,i){var o,u,s,l,f,h;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],u=r?{geometryType:a,spatialReference:this._spatialReference,fields:r}:null,e.next=3,(0,p.c)(t.data,u,this._cimResourceManager,o,this._avoidSDF);case 3:for((0,m.k_)(i),l=0,f=o;l<f.length;l++)"CIMPictureMarker"!==(h=f[l]).cim.type&&"CIMPictureFill"!==h.cim.type&&"CIMPictureStroke"!==h.cim.type||(s||(s=[]),s.push(this.fetchPictureMarkerResource(h,i))),n&&"text"===h.type&&"string"==typeof h.text&&h.text.indexOf("[")>-1&&(h.text=(0,C.Qs)(n,h.text,h.cim.textCase));if(e.t0=s,!e.t0){e.next=9;break}return e.next=9,Promise.all(s);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}()},{key:"fetchPictureMarkerResource",value:function(){var e=(0,o.Z)(c.mark((function e(t,r){var n,a;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.materialHash,this._pictureMarkerCache.get(n)){e.next=6;break}return e.next=4,(0,f.default)(t.cim.url,{responseType:"image",signal:r&&r.signal});case 4:a=e.sent.data,this._pictureMarkerCache.set(n,a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"rasterizeCIMSymbol",value:function(e,t,r,n,a,o){var u,s=[],c=(0,i.Z)(e);try{for(c.s();!(u=c.n()).done;){var l=u.value;n&&"function"==typeof n.scaleFactor&&(n.scaleFactor=n.scaleFactor(t,a,o));var f=this._getRasterizedResource(l,t,r,n,a,o);if(f){var m=0,h=f.anchorX||0,y=f.anchorY||0,g=!1,p=0,v=0;if("esriGeometryPoint"===r){var d=z(n,l,null);if(p=(0,C.hf)(l.offsetX,t,a,o)*d||0,v=(0,C.hf)(l.offsetY,t,a,o)*d||0,"marker"===l.type)m=(0,C.hf)(l.rotation,t,a,o)||0,g=!!l.rotateClockwise&&l.rotateClockwise;else if("text"===l.type){if(m=(0,C.hf)(l.angle,t,a,o)||0,void 0!==l.horizontalAlignment)switch(l.horizontalAlignment){case"left":h=-.5;break;case"right":h=.5;break;default:h=0}if(void 0!==l.verticalAlignment)switch(l.verticalAlignment){case"top":y=.5;break;case"bottom":y=-.5;break;case"baseline":y=-.25;break;default:y=0}}}null!=f&&s.push({angle:m,rotateClockWise:g,anchorX:h,anchorY:y,offsetX:p,offsetY:v,rasterizedResource:f})}}}catch(x){c.e(x)}finally{c.f()}return this.getSymbolImage(s)}},{key:"getSymbolImage",value:function(e){for(var t=document.createElement("canvas"),r=t.getContext("2d"),n=0,a=0,i=0,o=0,u=[],s=0;s<e.length;s++){var c=e[s],l=c.rasterizedResource;if(l){var f=l.size,m=c.offsetX,y=c.offsetY,g=c.anchorX,p=c.anchorY,v=c.rotateClockWise||!1,d=c.angle,x=(0,h.F2)(m)-f[0]*(.5+g),C=(0,h.F2)(y)-f[1]*(.5+p),M=x+f[0],z=C+f[1];if(d){v&&(d=-d);var I=Math.sin(d*Math.PI/180),k=Math.cos(d*Math.PI/180),P=x*k-C*I,b=x*I+C*k,_=x*k-z*I,S=x*I+z*k,F=M*k-z*I,R=M*I+z*k,Z=M*k-C*I,A=M*I+C*k;x=Math.min(P,_,F,Z),C=Math.min(b,S,R,A),M=Math.max(P,_,F,Z),z=Math.max(b,S,R,A)}n=x<n?x:n,a=C<a?C:a,i=M>i?M:i,o=z>o?z:o;var D=r.createImageData(l.size[0],l.size[1]);D.data.set(new Uint8ClampedArray(l.image.buffer));var U={offsetX:m,offsetY:y,rotateClockwise:v,angle:d,rasterizedImage:D,anchorX:g,anchorY:p};u.push(U)}}t.width=i-n,t.height=o-a;for(var T=-n,X=o,Y=0;Y<u.length;Y++){var G=u[Y],L=this._imageDataToCanvas(G.rasterizedImage),O=G.rasterizedImage.width,J=G.rasterizedImage.height,V=T-O*(.5+G.anchorX),H=X-J*(.5-G.anchorY);if(G.angle){var W=(360-G.angle)*Math.PI/180;r.save(),r.translate((0,h.F2)(G.offsetX),-(0,h.F2)(G.offsetY)),r.translate(T,X),r.rotate(W),r.translate(-T,-X),r.drawImage(L,V,H),r.restore()}else r.drawImage(L,V+(0,h.F2)(G.offsetX),H-(0,h.F2)(G.offsetY))}var E=new w.Z({x:T/t.width-.5,y:X/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:E}}},{key:"_imageDataToCanvas",value:function(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var t=this._imageDataCanvas,r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}},{key:"_imageTo32Array",value:function(e,t,r,n){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var a=this._imageDataCanvas,i=a.getContext("2d");if(a.width=t,a.height=r,i.drawImage(e,0,0,t,r),n){i.save();var o=new l.Z(n);i.fillStyle=o.toHex(),i.globalCompositeOperation="multiply",i.fillRect(0,0,t,r),i.globalCompositeOperation="destination-atop",i.drawImage(e,0,0,t,r),i.restore()}return new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}},{key:"_getRasterizedResource",value:function(e,t,r,a,i,o){var u,s,c,l,f=null,m=null;if("esriGeometryPolyline"===r||"esriGeometryPolygon"===r){var h=a&&a.style?a.style:n.Legend,g="esriGeometryPolyline"===r?I.stroke[h]:I.fill[h];if("line"===e.type){var p;if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){var v=(0,C.hf)(e.width,t,i,o),d=(0,C.hf)(e.color,t,i,o),x=this._getPictureResource(e,v,d),w=x.image,k=x.width,P=x.height;return this._rasterizePictureResource(e,w,k,P,g,v)}return null}u=(p=_(e,t,i,o)).analyzedCIM,c=p.hash,s=this._embedCIMLayerInVectorMarker(u,g)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type)return null;if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=(0,C.hf)(e.offsetX,t,i,o),e.cim.offsetY=(0,C.hf)(e.offsetY,t,i,o),e.cim.rotation=(0,C.hf)(e.rotation,t,i,o),e.cim.markerPlacement=e.markerPlacement,u=_(e,t,i,o).analyzedCIM,c=(0,y.hP)(JSON.stringify(u)).toString(),s=this._embedCIMLayerInVectorMarker(u,g),f=(0,C.hf)(e.size,t,i,o),m=e.path}else{if("text"===e.type)return null;if("fill"===e.type){var b;if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var S,F,R,Z=e.cim.size||e.cim.height;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var A=this._getPictureResource(e,Z,(0,C.hf)(e.color,t,i,o));S=A.image,F=A.width,R=A.height}else{var D=_(e,t,i,o);u=D.analyzedCIM,c=D.hash;var U=this._rasterizer.rasterizeJSONResource({cim:u,type:e.type,url:e.url,mosaicHash:c,size:Z,path:m},1,this._avoidSDF);S=U.image,F=U.size[0],R=U.size[1]}return this._rasterizePictureResource(e,S,F,R,g,null)}if("CIMSolidFill"!==e.cim.type)return null;u=(b=_(e,t,i,o)).analyzedCIM,c=b.hash,s=this._embedCIMLayerInVectorMarker(u,g)}}}else{if("text"===e.type)return l=this._rasterizeTextResource(e,t,a,i,o);var T=_(e,t,i,o);u=T.analyzedCIM,c=T.hash;var X=z(a,e,null);if("CIMPictureMarker"===e.cim.type){var Y=(0,C.hf)(e.size,t,i,o)*X,G=this._getPictureResource(e,Y,(0,C.hf)(e.color,t,i,o));return l={image:G.image,size:[G.width,G.height],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0}}(0,M.FW)(u,X,{preserveOutlineWidth:!1}),s=u}c+=r,a&&(c+=JSON.stringify(a));var L=this._resourceCache;return L.has(c)?L.get(c):(l=this._rasterizer.rasterizeJSONResource({cim:s,type:e.type,url:e.url,mosaicHash:c,size:f,path:m},window.devicePixelRatio||1,this._avoidSDF),L.set(c,l),l)}},{key:"_rasterizeTextResource",value:function(e,t,r,n,a){var i=z(r,e,null),o=(0,C.hf)(e.text,t,n,a);if(!o||0===o.length)return null;var u=(0,C.hf)(e.fontName,t,n,a),s=(0,C.hf)(e.style,t,n,a),c=(0,C.hf)(e.weight,t,n,a),l=(0,C.hf)(e.decoration,t,n,a),f=(0,C.hf)(e.size,t,n,a)*i,m=(0,C.hf)(e.horizontalAlignment,t,n,a),h=(0,C.hf)(e.verticalAlignment,t,n,a),y=(0,C.nn)((0,C.hf)(e.color,t,n,a)),g=(0,C.nn)((0,C.hf)(e.outlineColor,t,n,a)),p={color:y,size:f,horizontalAlignment:m,verticalAlignment:h,font:{family:u,style:s,weight:c,decoration:l},halo:{size:(0,C.hf)(e.outlineSize,t,n,a)||0,color:g,style:s},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,p)}},{key:"_rasterizePictureResource",value:function(e,t,r,n,a,o){var u=document.createElement("canvas"),s=u.getContext("2d");u.height=(0,h.F2)(Math.max(a.frame.ymax-a.frame.ymin,o)),u.width=(0,h.F2)(a.frame.xmax-a.frame.xmin);var c=s.createImageData(r,n);c.data.set(new Uint8ClampedArray(t.buffer));var l=this._imageDataToCanvas(c),f=s.createPattern(l,"repeat"),m=Math.cos((-e.cim.rotation||0)*Math.PI/180),y=Math.sin((-e.cim.rotation||0)*Math.PI/180);f.setTransform({m11:m,m12:y,m21:-y,m22:m,m41:(0,h.F2)(e.cim.offsetX)||0,m42:(0,h.F2)(e.cim.offsetY)||0});var p,v,d,x=a.canvasPaths;(0,g.oU)(x)?(p=x.rings,s.fillStyle=f,v=s.fill,d=["evenodd"]):(0,g.l9)(x)&&(p=x.paths,s.strokeStyle=f,s.lineWidth=o,v=s.stroke,p[0][0][1]=u.height/2,p[0][1][1]=u.height/2),s.beginPath();var C,M=(0,i.Z)(p);try{for(M.s();!(C=M.n()).done;){var w=C.value,z=w?w.length:0;if(z>1){var I=w[0];s.moveTo((0,h.F2)(I[0]),(0,h.F2)(I[1]));for(var k=1;k<z;++k)I=w[k],s.lineTo((0,h.F2)(I[0]),(0,h.F2)(I[1]));s.closePath()}}}catch(_){M.e(_)}finally{M.f()}v.apply(s,d);var P=s.getImageData(0,0,u.width,u.height),b=new Uint8Array(P.data);return{size:[u.width,u.height],image:new Uint32Array(b.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"_getPictureResource",value:function(e,t,r){var n=this._pictureMarkerCache.get(e.materialHash);if(!n)return null;var a=n.height/n.width,i=t?a>1?(0,h.F2)(t):(0,h.F2)(t)/a:n.width,o=t?a>1?(0,h.F2)(t)*a:(0,h.F2)(t):n.height;return{image:this._imageTo32Array(n,i,o,r),width:i,height:o}}},{key:"_embedCIMLayerInVectorMarker",value:function(e,t){var r=(0,g.oU)(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol",n=t.frame;return{type:"CIMVectorMarker",frame:n,size:n.ymax-n.ymin,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}]),e}();function P(e){return(e?Object.keys(e):[]).map((function(t){return{name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}}))}function b(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function _(e,t,r,n){var a,i;return"function"==typeof e.materialHash?(a=(0,e.materialHash)(t,r,n),i=(0,p.S)(e.cim,e.materialOverrides)):(a=e.materialHash,i=e.cim),{analyzedCIM:i,hash:a}}},16285:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(37762),a=r(29439),i=r(15671),o=r(43144),u=r(78915),s=r(691),c=r(6388),l=r(31027),f=function(){function e(t){(0,i.Z)(this,e),this._resourceManager=t}return(0,o.Z)(e,[{key:"dispose",value:function(){this._rasterizationCanvas=null}},{key:"rasterizeJSONResource",value:function(e,t,r){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){var n=u.fN.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t),i=(0,a.Z)(n,3),o=i[0];return{size:[i[1],i[2]],image:new Uint32Array(o.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){var l,f;if("simple-line"===e.type||"esriSLS"===e.type)switch(l=(0,u.U1)(e.style,e.cap),e.cap){case"butt":f="Butt";break;case"square":f="Square";break;default:f="Round"}else l=e.dashTemplate,f=e.cim.capStyle;var m=u.fN.rasterizeSimpleLine(l,f),h=(0,a.Z)(m,3),y=h[0];return{size:[h[1],h[2]],image:new Uint32Array(y.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}var g,p,v;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(g=u.B$.fromSimpleMarker(e),v=(0,c.Fp)(g)):e.cim&&"CIMHatchFill"===e.cim.type?(g=u.B$.fromCIMHatchFill(e.cim),p=new s.Z(g.frame.xmin,-g.frame.ymax,g.frame.xmax-g.frame.xmin,g.frame.ymax-g.frame.ymin)):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(g=u.B$.fromCIMInsidePolygon(e.cim),p=new s.Z(g.frame.xmin,-g.frame.ymax,g.frame.xmax-g.frame.xmin,g.frame.ymax-g.frame.ymin)):(g=e.cim,v=(0,c.Fp)(g)),v&&!r){var d=(0,c.RL)(v),x=(0,a.Z)(d,3),C=x[0],M=x[1],w=x[2];return C?{size:[M,w],image:new Uint32Array(C.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}var z=u.B$.rasterize(this._rasterizationCanvas,g,p,this._resourceManager,!r),I=(0,a.Z)(z,5),k=I[0],P=I[1],b=I[2],_=I[3],S=I[4];return k?{size:[P,b],image:new Uint32Array(k.buffer),sdf:!1,simplePattern:!1,anchorX:_,anchorY:S}:null}},{key:"rasterizeImageResource",value:function(e,t,r,i){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;var o=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?o.putImageData(r,0,0):(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px")),o.drawImage(r,0,0,e,t));var u,s=o.getImageData(0,0,e,t),c=new Uint8Array(s.data);if(i){var f,m=(0,n.Z)(i);try{for(m.s();!(f=m.n()).done;){var h=f.value;if(h&&h.oldColor&&4===h.oldColor.length&&h.newColor&&4===h.newColor.length){var y=(0,a.Z)(h.oldColor,4),g=y[0],p=y[1],v=y[2],d=y[3],x=(0,a.Z)(h.newColor,4),C=x[0],M=x[1],w=x[2],z=x[3];if(g===C&&p===M&&v===w&&d===z)continue;for(var I=0;I<c.length;I+=4)g===c[I]&&p===c[I+1]&&v===c[I+2]&&d===c[I+3]&&(c[I]=C,c[I+1]=M,c[I+2]=w,c[I+3]=z)}}}catch(Z){m.e(Z)}finally{m.f()}}for(var k=0;k<c.length;k+=4)u=c[k+3]/255,c[k]=c[k]*u,c[k+1]=c[k+1]*u,c[k+2]=c[k+2]*u;var P=c,b=e,_=t,S=512;if(b>=S||_>=S){var F=b/_;F>1?(b=S,_=Math.round(S/F)):(_=S,b=Math.round(S*F)),P=new Uint8Array(4*b*_);var R=new Uint8ClampedArray(P.buffer);(0,l.TT)(c,e,t,R,b,_,!1)}return{size:[b,_],image:new Uint32Array(P.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}]),e}()},54763:function(e,t,r){r.r(t),r.d(t,{previewCIMSymbol:function(){return f}});var n=r(15861),a=r(87757),i=r(17842),o=r(94304),u=r(49729),s=r(69157),c=new o.CIMSymbolRasterizer(null,!0),l=120;function f(e){return m.apply(this,arguments)}function m(){return m=(0,n.Z)(a.mark((function e(t){var r,n,o,f,m,h,y,g,p,v,d,x,C,M,w,z,I,k,P,b,_,S=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S.length>1&&void 0!==S[1]?S[1]:{},n=r.size,o=r.maxSize,f=r.node,m=r.opacity,h=r.cimOptions||r,y=h.feature,g=h.fieldMap,p=h.geometryType,v=h.style,d=(0,u.kW)(t),(x=Math.min(null!=n?n:d,null!=o?o:(0,i.Wz)(l)))!==d&&(t=t.clone(),(0,u.PI)(t,x,{preserveOutlineWidth:!0})),C=3,t&&t.data&&t.data.symbol&&"CIMPointSymbol"!==t.data.symbol.type&&(C=1),e.next=7,c.rasterizeCIMSymbolAsync(t,y,g,p,{scaleFactor:C,style:v});case 7:return M=e.sent,(w=document.createElement("canvas")).width=M.imageData.width,w.height=M.imageData.height,w.getContext("2d").putImageData(M.imageData,0,0),z=w.width/C,I=w.height/C,null==n||null!=(null==r?void 0:r.scale)&&!(null==r?void 0:r.scale)||(z=(k=z/I)<=1?Math.ceil(x*k):x,I=k<=1?x:Math.ceil(x/k)),(P=new Image(z,I)).src=w.toDataURL(),null!=m&&(P.style.opacity="".concat(m)),b=P,null!=r.effectView&&(_={shape:{type:"image",x:0,y:0,width:z,height:I,src:P.src},fill:null,stroke:null,offset:[0,0]},b=(0,s.w)([[_]],[z,I],{effectView:r.effectView})),e.abrupt("return",(f&&f.appendChild(b),b));case 18:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},91935:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(1413),a=r(10064),i=r(32718),o=r(58971);function u(e,t,r,a,o){var u=e.referencesGeometry()&&o?c(t,a,o):t,s=e.repurposeFeature(u);try{return e.evaluate((0,n.Z)((0,n.Z)({},r),{},{$feature:s}))}catch(l){return i.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}var s=new Map;function c(e,t,r){var u=r.transform,c=r.hasZ,l=r.hasM;s.has(t)||s.set(t,function(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,n,a){return(0,o.U1)(r,t,e,n,a)};case"esriGeometryPolygon":return function(e,r,n,a){return(0,o.Ie)(r,t,e,n,a)};case"esriGeometryPolyline":return function(e,r,n,a){return(0,o.G6)(r,t,e,n,a)};case"esriGeometryMultipoint":return function(e,r,n,a){return(0,o.J9)(r,t,e,n,a)};default:return i.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new a.Z("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}(t));var f=s.get(t)(e.geometry,u,c,l);return(0,n.Z)((0,n.Z)({},e),{},{geometry:f})}},94109:function(e,t,r){r.d(t,{xl:function(){return w},aK:function(){return z},eF:function(){return l},Uh:function(){return X},_6:function(){return J},Tz:function(){return G},CQ:function(){return Y},oK:function(){return L},e0:function(){return O},SD:function(){return V},XJ:function(){return D},$0:function(){return o},iV:function(){return b},Zd:function(){return P},Ex:function(){return s},uG:function(){return k},Jc:function(){return S},xm:function(){return u},m4:function(){return I},MI:function(){return T},AI:function(){return n},Ip:function(){return U},ru:function(){return a},fL:function(){return A},iJ:function(){return y},nM:function(){return g},Ij:function(){return p},f2:function(){return v},Ic:function(){return h},Al:function(){return m},QU:function(){return d},Jw:function(){return x},kF:function(){return C},yP:function(){return M},D3:function(){return f},Iw:function(){return c},tQ:function(){return _},I_:function(){return i},a:function(){return Z},CU:function(){return R},V4:function(){return F}});var n=1e-30,a=4294967295,i=512,o=8,u=29,s=24,c=8,l={metrics:{width:15,height:17,left:0,top:-7,advance:14}},f=0,m=0,h=0,y=1,g=2,p=3,v=4,d=5,x=6,C=5,M=6,w=1,z=2,I=2,k=1,P=2,b=4,_=1.05,S=6,F=5,R=6,Z=1.15,A=2,D=8,U=500,T=10,X=2,Y=0,G=1,L=4,O=8,J=4,V=1},73271:function(e,t,r){r.d(t,{UJ:function(){return i},Jz:function(){return o},Au:function(){return a}});var n=new Float32Array(1);new Uint32Array(n.buffer);function a(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function i(e,t){return 65535&e|t<<16}function o(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24}}}]);
//# sourceMappingURL=6994.0e81cef7.chunk.js.map