{"version":3,"file":"static/js/5856.9ede8c3d.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/FetchAssociatedFeatureLayer.js","../node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js","../node_modules/@arcgis/core/layers/support/capabilities.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{id as t}from\"../../kernel.js\";import r from\"../../request.js\";import{isNone as e,isSome as a}from\"../../core/maybe.js\";import{throwIfAbortError as i}from\"../../core/promiseUtils.js\";import s from\"../FeatureLayer.js\";import n from\"../../portal/Portal.js\";import o from\"../../portal/PortalItem.js\";class l{constructor(t,r,e,a){this.parsedUrl=t,this.portalItem=r,this.apiKey=e,this.signal=a,this.rootDocument=null;const i=this.parsedUrl.path.match(/^(.*)\\/SceneServer\\/layers\\/([\\d]*)\\/?$/i);i&&(this.urlParts={root:i[1],layerId:parseInt(i[2],10)})}async fetch(){var t;if(!this.urlParts)return null;const r=null!=(t=this.portalItem)?t:await this.portalItemFromServiceItemId();if(e(r))return this.loadFromUrl();const a=await this.findAndLoadRelatedPortalItem(r);return e(a)?null:this.loadFeatureLayerFromPortalItem(a)}async fetchPortalItem(){var t;if(!this.urlParts)return null;const r=null!=(t=this.portalItem)?t:await this.portalItemFromServiceItemId();return e(r)?null:this.findAndLoadRelatedPortalItem(r)}async fetchRootDocument(){if(a(this.rootDocument))return this.rootDocument;if(e(this.urlParts))return this.rootDocument={},{};const t={query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:this.signal},i=`${this.urlParts.root}/SceneServer`;try{const e=await r(i,t);this.rootDocument=e.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var e;const a=null==(e=t)?void 0:e.findServerInfo(this.parsedUrl.path);if(null!=a&&a.owningSystemUrl)return a.owningSystemUrl;const s=this.parsedUrl.path.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";try{const t=(await r(s,{query:{f:\"json\"},responseType:\"json\",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(n){i(n)}return null}async findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},{signal:this.signal})).find((t=>\"Feature Service\"===t.type))||null}catch(r){return i(r),null}}async loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const r=await this.findMatchingAssociatedSublayerUrl(t.url);return new s({url:r,portalItem:t}).load({signal:this.signal})}async loadFromUrl(){const t=await this.findMatchingAssociatedSublayerUrl(`${this.urlParts.root}/FeatureServer`);return new s({url:t}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(t){const e=t.replace(/^(.*FeatureServer)(\\/[\\d]*\\/?)?$/i,\"$1\"),a={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},i=this.urlParts.layerId,s=this.fetchRootDocument(),n=r(e,a),[o,l]=await Promise.all([n,s]),c=l&&l.layers,h=o.data&&o.data.layers;if(!Array.isArray(h))throw new Error(\"expected layers array\");if(Array.isArray(c))for(let r=0;r<Math.min(c.length,h.length);r++){if(c[r].id===i)return`${e}/${h[r].id}`}else if(i<h.length)return`${e}/${h[i].id}`;throw new Error(\"could not find matching associated sublayer\")}async portalItemFromServiceItemId(){const t=(await this.fetchRootDocument()).serviceItemId;if(!t)return null;const r=new o({id:t,apiKey:this.apiKey}),e=await this.fetchServiceOwningPortalUrl();a(e)&&(r.portal=new n({url:e}));try{return r.load({signal:this.signal})}catch(s){return i(s),null}}}export{l as FetchAssociatedFeatureLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{enumeration as r}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};e([o({type:Number})],s.prototype,\"nodesPerPage\",void 0),e([o({type:Number})],s.prototype,\"rootIndex\",void 0),e([o({type:String})],s.prototype,\"lodSelectionMetricType\",void 0),s=e([p(\"esri.layer.support.I3SNodePageDefinition\")],s);let i=class extends t{constructor(){super(...arguments),this.factor=1}};e([o({type:Number,json:{read:{source:\"textureSetDefinitionId\"}}})],i.prototype,\"id\",void 0),e([o({type:Number})],i.prototype,\"factor\",void 0),i=e([p(\"esri.layer.support.I3SMaterialTexture\")],i);let a=class extends t{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};e([o({type:[Number]})],a.prototype,\"baseColorFactor\",void 0),e([o({type:i})],a.prototype,\"baseColorTexture\",void 0),e([o({type:i})],a.prototype,\"metallicRoughnessTexture\",void 0),e([o({type:Number})],a.prototype,\"metallicFactor\",void 0),e([o({type:Number})],a.prototype,\"roughnessFactor\",void 0),a=e([p(\"esri.layer.support.I3SMaterialPBRMetallicRoughness\")],a);let l=class extends t{constructor(){super(...arguments),this.alphaMode=\"opaque\",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace=\"none\",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};e([r({opaque:\"opaque\",mask:\"mask\",blend:\"blend\"})],l.prototype,\"alphaMode\",void 0),e([o({type:Number})],l.prototype,\"alphaCutoff\",void 0),e([o({type:Boolean})],l.prototype,\"doubleSided\",void 0),e([r({none:\"none\",back:\"back\",front:\"front\"})],l.prototype,\"cullFace\",void 0),e([o({type:i})],l.prototype,\"normalTexture\",void 0),e([o({type:i})],l.prototype,\"occlusionTexture\",void 0),e([o({type:i})],l.prototype,\"emissiveTexture\",void 0),e([o({type:[Number]})],l.prototype,\"emissiveFactor\",void 0),e([o({type:a})],l.prototype,\"pbrMetallicRoughness\",void 0),l=e([p(\"esri.layer.support.I3SMaterialDefinition\")],l);let n=class extends t{};e([o({type:String,json:{read:{source:[\"name\",\"index\"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],n.prototype,\"name\",void 0),e([r({jpg:\"jpg\",png:\"png\",dds:\"dds\",\"ktx-etc2\":\"ktx-etc2\",ktx2:\"ktx2\",basis:\"basis\"})],n.prototype,\"format\",void 0),n=e([p(\"esri.layer.support.I3STextureFormat\")],n);let u=class extends t{constructor(){super(...arguments),this.atlas=!1}};e([o({type:[n]})],u.prototype,\"formats\",void 0),e([o({type:Boolean})],u.prototype,\"atlas\",void 0),u=e([p(\"esri.layer.support.I3STextureSetDefinition\")],u);let y=class extends t{};e([r({Float32:\"Float32\",UInt64:\"UInt64\",UInt32:\"UInt32\",UInt16:\"UInt16\",UInt8:\"UInt8\"})],y.prototype,\"type\",void 0),e([o({type:Number})],y.prototype,\"component\",void 0),y=e([p(\"esri.layer.support.I3SGeometryAttribute\")],y);let d=class extends t{};e([r({draco:\"draco\"})],d.prototype,\"encoding\",void 0),e([o({type:[String]})],d.prototype,\"attributes\",void 0),d=e([p(\"esri.layer.support.I3SGeometryCompressedAttributes\")],d);let c=class extends t{constructor(){super(...arguments),this.offset=0}};e([o({type:Number})],c.prototype,\"offset\",void 0),e([o({type:y})],c.prototype,\"position\",void 0),e([o({type:y})],c.prototype,\"normal\",void 0),e([o({type:y})],c.prototype,\"uv0\",void 0),e([o({type:y})],c.prototype,\"color\",void 0),e([o({type:y})],c.prototype,\"uvRegion\",void 0),e([o({type:y})],c.prototype,\"featureId\",void 0),e([o({type:y})],c.prototype,\"faceRange\",void 0),e([o({type:d})],c.prototype,\"compressedAttributes\",void 0),c=e([p(\"esri.layer.support.I3SGeometryBuffer\")],c);let m=class extends t{};e([r({triangle:\"triangle\"})],m.prototype,\"topology\",void 0),e([o()],m.prototype,\"geometryBuffers\",void 0),m=e([p(\"esri.layer.support.I3SGeometryDefinition\")],m);export{y as I3SGeometryAttribute,c as I3SGeometryBuffer,d as I3SGeometryCompressedAttributes,m as I3SGeometryDefinition,l as I3SMaterialDefinition,a as I3SMaterialPBRMetallicRoughness,i as I3SMaterialTexture,s as I3SNodePageDefinition,n as I3STextureFormat,u as I3STextureSetDefinition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst s={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,tileMaxRecordCount:0}};export{s as zeroCapabilities};\n"],"names":["l","t","r","e","a","this","parsedUrl","portalItem","apiKey","signal","rootDocument","i","path","match","urlParts","root","layerId","parseInt","portalItemFromServiceItemId","loadFromUrl","findAndLoadRelatedPortalItem","loadFeatureLayerFromPortalItem","query","f","token","responseType","data","findServerInfo","owningSystemUrl","s","replace","fetchRelatedItems","relationshipType","direction","find","type","load","findMatchingAssociatedSublayerUrl","url","authMode","fetchRootDocument","n","Promise","all","o","c","layers","h","Array","isArray","Error","Math","min","length","id","serviceItemId","fetchServiceOwningPortalUrl","portal","arguments","nodesPerPage","rootIndex","lodSelectionMetricType","Number","prototype","String","p","factor","json","read","source","baseColorFactor","baseColorTexture","metallicRoughnessTexture","metallicFactor","roughnessFactor","alphaMode","alphaCutoff","doubleSided","cullFace","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","pbrMetallicRoughness","opaque","mask","blend","Boolean","none","back","front","reader","index","jpg","png","dds","ktx2","basis","u","atlas","y","Float32","UInt64","UInt32","UInt16","UInt8","d","draco","offset","m","triangle","attachment","supportsContentType","supportsExifInfo","supportsKeywords","supportsName","supportsSize","isVersioned","supportsAttachment","supportsM","supportsZ","editing","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsUpdateWithoutM","supportsUploadWithItemId","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","supportsOrderBy","supportsPagination","maxRecordCount","maxRecordCountFactor","standardMaxRecordCount","supportsCacheHint","supportsCentroid","supportsDisjointSpatialRelationship","supportsDistance","supportsDistinct","supportsExtent","supportsFormatPBF","supportsGeometryProperties","supportsHavingClause","supportsHistoricMoment","supportsMaxRecordCountFactor","supportsPercentileStatistics","supportsQuantization","supportsQuantizationEditMode","supportsQueryByOthers","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsStatistics","tileMaxRecordCount"],"sourceRoot":""}