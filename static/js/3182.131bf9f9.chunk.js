"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[3182],{80394:function(e,t,n){n.d(t,{vF:function(){return L},_D:function(){return _},Qp:function(){return P},P_:function(){return F},ut:function(){return C},Hq:function(){return z},zD:function(){return v},tB:function(){return M},nF:function(){return R},VO:function(){return w},Mk:function(){return p},kZ:function(){return I},kr:function(){return W}});var r=n(1413),i=n(29439),a=n(15861),s=n(87757),o=(n(59486),n(10064)),l=n(92026),u=n(68860),c=n(62315),h=n(53866),f=n(7882),d=5e-4;function p(e,t,n){return!(0,c.Up)(e,t,n)}function x(e,t,n){var r=p(e,t,n);if(r&&!(0,c.kR)())throw new o.Z("rasterprojectionhelper-project","projection engine is not loaded");return r}var y=function(e,t,n){var r=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,i=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4,a=(e[4*t.cols]-e[0]+e[4*t.cols+4]-e[4])/n[0]*.5,s=(e[4*t.cols+1]-e[1]+e[4*t.cols+5]-e[5])/n[1]*.5;return[0===a||isNaN(a)?0:Math.abs(r-e[2*t.rows+2])/Math.abs(a),0===s||isNaN(s)?0:Math.abs(i-e[2*t.rows+3])/Math.abs(s)]},m={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244};function v(){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.kR)()){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,(0,c.zD)();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n){return x(e.spatialReference,t)?n?(0,c.rS)(t,e.spatialReference,e):(0,c.rS)(e.spatialReference,t,e):null}function w(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.spatialReference.equals(t))return e;x(e.spatialReference,t,r);var i=n.center,a=new h.Z({xmin:i.x-e.x/2,xmax:i.x+e.x/2,ymin:i.y-e.y/2,ymax:i.y+e.y/2,spatialReference:e.spatialReference}),s=(0,c.iV)(a,t,r);return(0,l.Wi)(s)?null:{x:s.xmax-s.xmin,y:s.ymax-s.ymin}}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;return(0,u.c9)(e)?t/(0,u.c9)(e):0}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=e.spatialReference;if(a.equals(t))return e;x(a,t,n);var s=(0,c.iV)(e,t,n);if(r&&t.isGeographic){var o=k(a,!0),l=(0,i.Z)(o,2),u=l[0],h=l[1],f=S(a);f&&null!=u&&null!=h&&(Math.abs(e.x-u)<f&&Math.abs(180-s.x)<d?s.x-=360:Math.abs(e.x-h)<f&&Math.abs(180+s.x)<d&&(s.x+=360))}return s}function b(e){var t=C(e[0].spatialReference);if(e.length<2||!(0,l.pC)(t))return e[0];for(var n=e[0],r=n.xmin,i=n.xmax,a=n.ymin,s=n.ymax,o=1;o<e.length;o++){var u=e[o];i=u.xmax+t*o,a=Math.min(a,u.ymin),s=Math.max(s,u.ymax)}return new h.Z({xmin:r,xmax:i,ymin:a,ymax:s,spatialReference:e[0].spatialReference})}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.spatialReference.equals(t))return e;var i=z(e),a=C(e.spatialReference,!0);return(0,l.pC)(a)&&0!==i?b(e.clone().normalize().map((function(e){return Z(e,t,n,r)}))):Z(e,t,n,r)}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=e.spatialReference;if(a.equals(t))return e;x(a,t,n);var s=(0,c.iV)(e,t,n),o=k(a,!0),l=(0,i.Z)(o,2),u=l[0],h=l[1];if(s&&r&&a.isWebMercator&&t.isGeographic&&null!=u&&null!=h){var p=.001,y=1e3;if(Math.abs(e.xmin-u)<p&&Math.abs(h-e.xmax)>y&&Math.abs(180-s.xmax)<d){s.xmin=-180;var m=[];m.push(new f.Z(e.xmax,e.ymin,a)),m.push(new f.Z(e.xmax,(e.ymin+e.ymax)/2,a)),m.push(new f.Z(e.xmax,e.ymax,a));var v=m.map((function(e){return R(e,t,n)})).filter((function(e){return!isNaN(null==e?void 0:e.x)})).map((function(e){return e.x}));s.xmax=Math.max.apply(null,v)}if(Math.abs(e.xmax-h)<p&&Math.abs(u-e.xmin)>y&&Math.abs(180+s.xmin)<d){s.xmax=180;var g=[];g.push(new f.Z(e.xmin,e.ymin,a)),g.push(new f.Z(e.xmin,(e.ymin+e.ymax)/2,a)),g.push(new f.Z(e.xmin,e.ymax,a));var _=g.map((function(e){return R(e,t,n)})).filter((function(e){return!isNaN(null==e?void 0:e.x)})).map((function(e){return e.x}));s.xmin=Math.min.apply(null,_)}}var w=k(t,!0),b=(0,i.Z)(w,2);u=b[0],h=b[1];var M=S(t);return M&&null!=u&&null!=h&&s&&(Math.abs(s.xmin-u)<M&&(s.xmin=u),Math.abs(s.xmax-h)<M&&(s.xmax=h)),s}function C(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*n:e.wkid&&e.isGeographic?360:2*m[e.wkid]||null}function k(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=C(e,t);return(0,l.pC)(r)&&(n.push(-r/2),n.push(r/2)),n}function D(e,t,n,r){var i=(e-t)/n;return i-Math.floor(i)!=0?i=Math.floor(i):r&&(i-=1),i}function z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=C(e.spatialReference);if(!(0,l.pC)(n))return 0;var r=t?0:-n/2;return D(e.xmax,r,n,!0)-D(e.xmin,r,n,!1)}function F(e){var t=e.storageInfo.origin.x,n=C(e.spatialReference,!0);if(!(0,l.pC)(n))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};for(var r=n/2,i=e.nativePixelSize,a=e.storageInfo,s=e.extent,o=a.maximumPyramidLevel,u=a.blockWidth,c=a.pyramidScalingFactor,h=i.x,f=[],d=(0,l.pC)(e.transform)&&"gcs-shift"===e.transform.type,p=t+(d?0:r),x=d?n-t:r-t,y=0;y<=o;y++){var m=(s.xmax-t)/h/u,v=m-Math.floor(m)==0?m:Math.ceil(m),g=x/h/u,_=g-Math.floor(g)==0?g:Math.ceil(g),w=Math.floor(p/h/u),S=Math.round(p/h)%u,R=(u-Math.round(x/h)%u)%u;f.push({resolutionX:h,blockWidth:u,datsetColumnCount:v,worldColumnCountFromOrigin:_,leftMargin:S,rightPadding:R,originColumnOffset:w}),h*=c}return{originX:t,halfWorldWidth:r,pyramidsInfo:f,hasGCSSShiftTransform:d}}function P(e){var t=e.isAdaptive&&null==e.spacing,n=e.spacing||[32,32],i=T(e),a={cols:i.size[0]+1,rows:i.size[1]+1},s=y(i.offsets,a,n),o=(s[0]+s[1])/2,l=i.outofBoundPointCount>0&&i.outofBoundPointCount<i.offsets.length/2;return t&&(l||o>4)&&(a={cols:(i=T((0,r.Z)((0,r.Z)({},e),{},{spacing:[4,4]}))).size[0]+1,rows:i.size[1]+1},s=y(i.offsets,a,n)),i.error=s,i.coefficients=function(e,t,n){for(var r=t.cols,i=t.rows,a=new Float32Array((r-1)*(i-1)*2*6),s=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),o=new Float32Array([-1,1,0,0,-1,1,1,0,0]),l=0;l<r-1;l++){for(var u=0;u<i-1;u++){for(var c=l*i*2+2*u,h=e[c],f=e[c+1],d=e[c+2],p=e[c+3],x=e[c+=2*i],y=e[c+1],m=e[c+2],v=e[c+3],g=0,_=12*(u*(r-1)+l),w=0;w<3;w++)a[_++]=s[g++]*h+s[g++]*d+s[g++]*m;g=0;for(var S=0;S<3;S++)a[_++]=s[g++]*f+s[g++]*p+s[g++]*v;g=0;for(var R=0;R<3;R++)a[_++]=o[g++]*h+o[g++]*x+o[g++]*m;g=0;for(var b=0;b<3;b++)a[_++]=o[g++]*f+o[g++]*y+o[g++]*v}if(n)for(var M=0;M<a.length;M++)isNaN(a[M])&&(a[M]=-1)}return a}(i.offsets,a,l),i}function T(e){var t=e.projectedExtent,n=e.srcBufferExtent,r=e.pixelSize,i=e.datumTransformation,a=e.rasterTransform,s=t.spatialReference,o=n.spatialReference;x(s,o);for(var u,h=t.xmin,d=t.ymin,p=t.xmax,y=t.ymax,m=C(o),v=e.hasWrapAround||"gcs-shift"===(null==a?void 0:a.type),g=e.spacing||[32,32],_={x:g[0]*r.x,y:g[1]*r.y},w=Math.ceil((p-h)/_.x-.1/g[0])+1,S=Math.ceil((y-d)/_.y-.1/g[1])+1,R=_.x,b=_.y,M=[],Z=0,k=[],D=0;D<w;D++)for(var z=0;z<S;z++)k.push(new f.Z({x:h+R*D,y:y-b*z,spatialReference:s}));for(var F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e[0].spatialReference;return r.equals(t)?e:(x(r,t,n),(0,c.iV)(e,t,n))}(k,o,i),P=0;P<w;P++){for(var T=[],I=0;I<S;I++){var W=F[P*S+I];a&&(W=a.inverseTransform(W)),T.push(W),P>0&&v&&W&&u[I]&&(0,l.pC)(m)&&W.x<u[I].x&&(W.x+=m),W?(M.push((W.x-n.xmin)/(n.xmax-n.xmin)),M.push((n.ymax-W.y)/(n.ymax-n.ymin))):(M.push(NaN),M.push(NaN),Z++)}u=T}return{offsets:M,error:null,coefficients:null,outofBoundPointCount:Z,spacing:g,size:[w-1,S-1]}}function I(e){var t=e.clone().normalize();return 1===t.length?t[0]:b(t)}function W(e,t,n){var r,i=t.storageInfo,a=t.pixelSize,s=!1,o=i.pyramidResolutions;if((0,l.pC)(o)&&o.length){var u=(e.x+e.y)/2,c=o[o.length-1],h=(c.x+c.y)/2,d=(a.x+a.y)/2;if(u<=d)r=0;else if(u>=h)r=o.length,s=u/h>8;else for(var p,x=d,y=1;y<=o.length;y++){if(u<=(p=(o[y-1].x+o[y-1].y)/2)){u===p?r=y:"down"===n?(r=y-1,s=u/x>8):r="up"===n||u-x>p-u||u/x>2?y:y-1;break}x=p}var m=0===r?a:o[r-1];return{pyramidLevel:r,pyramidResolution:new f.Z({x:m.x,y:m.y,spatialReference:t.spatialReference}),excessiveReading:s}}var v=Math.log(e.x/a.x)/Math.LN2,g=Math.log(e.y/a.y)/Math.LN2,_=t.storageInfo.maximumPyramidLevel||0;(r="down"===n?Math.floor(Math.min(v,g)):"up"===n?Math.ceil(Math.max(v,g)):Math.round((v+g)/2))<0?r=0:r>_&&(s=r>_+3,r=_);var w=Math.pow(2,r);return{pyramidLevel:r,pyramidResolution:new f.Z({x:w*t.nativePixelSize.x,y:w*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:s}}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.extent,a=e.spatialReference,s=e.pixelSize,o=w(new f.Z({x:s.x,y:s.y,spatialReference:a}),t,i);if(null==o)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var l=(o.x+o.y)/2,c=(0,u.c9)(t),h=l*c*96*39.37,d=t.isGeographic?256/n*295828763.7958547:256/n*591657527.591555,p="vector-magdir"===e.dataType||"vector-uv"===e.dataType,x=M(i,t);p||r&&(t.isGeographic||t.isWebMercator)&&(p=x.xmin*x.xmax<0);var y,m=h,v=1.001;if(p){m=d;var g=t.isGeographic?1341104507446289e-21:.29858214164761665,_=g*(96*c*39.37),S=t.isGeographic?4326:3857;(y=w(new f.Z({x:g,y:g,spatialReference:{wkid:S}}),a,x)).x*=m/_,y.y*=m/_}else{y={x:s.x,y:s.y};for(var R=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2),b=0;m<d*(v/2)&&b<R;)b++,m*=2,y.x*=2,y.y*=2;Math.max(m,d)/Math.min(m,d)<=v&&(m=d)}for(var Z=[m],C=[{x:y.x,y:y.y}],k=70.5310735,D=Math.min(k,h)/v;m>=D;)m/=2,y.x/=2,y.y/=2,Z.push(m),C.push({x:y.x,y:y.y});return{projectedPixelSize:o,scales:Z,srcResolutions:C,isCustomTilingScheme:!p}}},2608:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(15861),i=n(15671),a=n(43144),s=n(60136),o=n(29388),l=n(87757),u=n(27366),c=n(85015),h=n(49861),f=(n(63780),n(93169),n(25243),n(69912)),d=n(55185),p=n(93433),x=n(11752),y=n(61120),m=n(28959),v=n(80613),g=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).flowStyle=null,e}return(0,a.Z)(n,[{key:"requiresDedicatedFBO",get:function(){return!1}},{key:"doRender",value:function(e){(0,x.Z)((0,y.Z)(n.prototype),"doRender",this).call(this,e)}},{key:"prepareRenderPasses",value:function(e){var t=this,r=e.registerRenderPass({name:"flow",brushes:[m.Z],target:function(){return t.children},drawPhase:v.jx.MAP});return[].concat((0,p.Z)((0,x.Z)((0,y.Z)(n.prototype),"prepareRenderPasses",this).call(this,e)),[r])}}]),n}(n(64510).Z),_=(n(59486),n(32718)),w=n(16889),S=n(92026),R=n(66978),b=n(7882),M=_.Z.getLogger("esri.views.2d.engine.flow.FlowDisplayData"),Z=function(){function e(t,n,r,a){(0,i.Z)(this,e),this.state={name:"created"},this.flowStyle=t,this.extent=n,this.size=r,this.pixelRatio=a}return(0,a.Z)(e,[{key:"load",value:function(){var e=(0,r.Z)(l.mark((function e(){var t,n;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,this.state={name:"loading",abortController:t},e.next=4,this.flowStyle.loadResources({extent:this.extent,size:this.size,pixelRatio:this.pixelRatio},t.signal);case 4:n=e.sent,this.state={name:"loaded",resources:n};case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"prepareForRendering",value:function(e,t,n){if("loaded"===this.state.name){var r=this.state.resources;r.prepareForRendering(e,t,n),this.state={name:"attached",resources:r}}else M.error("Only loaded resources can be attached.")}},{key:"destroy",value:function(){if("loading"===this.state.name)return this.state.abortController.abort(),void(this.state={name:"detached"});"attached"===this.state.name&&(this.state.resources.detach(),this.state={name:"detached"})}},{key:"update",value:function(e){return!!this.flowStyle.areResourcesCompatible(e.flowStyle)&&(!(!this.extent.equals(e.extent)||this.size[0]!==e.size[0]||this.size[1]!==e.size[1]||this.pixelRatio!==e.pixelRatio)&&(this.flowStyle=e.flowStyle,!0))}}]),e}(),C=n(22753),k=n(23588),D=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments))._displayData=null,e}return(0,a.Z)(n,[{key:"displayData",get:function(){return this._displayData},set:function(e){this._displayData=e,this.requestRender()}},{key:"clear",value:function(){(0,S.pC)(this._displayData)&&(this._displayData.destroy(),this._displayData=null,this.requestRender())}},{key:"setTransform",value:function(e){var t=this.displayData;if(!(0,S.Wi)(t)){var n=t.extent.xmin,r=t.extent.ymax,i=[0,0];e.toScreen(i,[n,r]);var a=(t.extent.xmax-t.extent.xmin)/t.size[0]/e.resolution,s=(0,w.Vl)(e.rotation),o=this.transforms.dvs;(0,C.b)(o),(0,C.c)(o,o,[-1,1,0]),(0,C.d)(o,o,[2/(e.size[0]*e.pixelRatio),-2/(e.size[1]*e.pixelRatio),1]),(0,C.c)(o,o,[i[0],i[1],0]),(0,C.r)(o,o,s),(0,C.d)(o,o,[a*e.pixelRatio,a*e.pixelRatio,1])}}},{key:"_createTransforms",value:function(){return{dvs:(0,k.c)()}}}]),n}(n(87422).s),z=n(53866),F=_.Z.getLogger("esri.views.2d.engine.flow.FlowStrategy"),P=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e))._flowDisplayObject=new D,r._loading=null,r}return(0,a.Z)(n,[{key:"initialize",value:function(){this.flowContainer.addChild(this._flowDisplayObject)}},{key:"destroy",value:function(){this._clear(),this.flowContainer.removeAllChildren()}},{key:"updating",get:function(){return null!=this._loading}},{key:"update",value:function(e){var t=this,n=this.flowContainer.flowStyle;if((0,S.Wi)(n))this._clear();else{var r=e.state,i=r.extent,a=r.rotation,s=r.resolution,o=r.pixelRatio,l=function(e,t){var n=new b.Z({x:(e.xmax+e.xmin)/2,y:(e.ymax+e.ymin)/2,spatialReference:e.spatialReference}),r=e.xmax-e.xmin,i=e.ymax-e.ymin,a=Math.abs(Math.cos((0,w.Vl)(t))),s=Math.abs(Math.sin((0,w.Vl)(t))),o=a*r+s*i,l=s*r+a*i,u=new z.Z({xmin:n.x-o/2,ymin:n.y-l/2,xmax:n.x+o/2,ymax:n.y+l/2,spatialReference:e.spatialReference});return u.centerAt(n),u}(i,a);l.expand(1.15);var u=[Math.round((l.xmax-l.xmin)/s),Math.round((l.ymax-l.ymin)/s)],c=new Z(n,l,u,o);if((0,S.pC)(this._loading)){if(this._loading.update(c))return;this._loading.destroy(),this._loading=null}!(0,S.Wi)(this._flowDisplayObject.displayData)&&this._flowDisplayObject.displayData.update(c)||(c.load().then((function(){t._flowDisplayObject.clear(),t._flowDisplayObject.displayData=t._loading,t._loading=null}),(function(e){(0,R.D_)(e)||(F.error("A resource failed to load.",e),t._loading=null)})),this._loading=c)}}},{key:"_clear",value:function(){this._flowDisplayObject.clear(),(0,S.pC)(this._loading)&&(this._loading.destroy(),this._loading=null)}}]),n}(c.Z);(0,u._)([(0,h.Cb)()],P.prototype,"_loading",void 0),(0,u._)([(0,h.Cb)()],P.prototype,"flowContainer",void 0),(0,u._)([(0,h.Cb)()],P.prototype,"updating",null);var T=P=(0,u._)([(0,f.j)("esri.views.2d.engine.flow.FlowStrategy")],P);var I=n(17842);var W=n(44070),L=(n(53634),n(37825),n(8548),n(3667),n(51378),n(45412)),j=function(){function e(t,n){(0,i.Z)(this,e),this._vertexData=t,this._indexData=n}return(0,a.Z)(e,[{key:"prepareForRendering",value:function(e,t,n){var r=W.Z.createVertex(e,35044,this._vertexData),i=W.Z.createIndex(e,35044,this._indexData),a=new L.Z(e,t,n,{geometry:r},i);this.vertexBuffer=r,this.indexBuffer=i,this.vertexArray=a,this._vertexData=null,this._indexData=null}},{key:"detach",value:function(){this.vertexArray.dispose(),this.vertexBuffer.dispose(),this.indexBuffer.dispose()}}]),e}(),N=function(){function e(t,n,r){(0,i.Z)(this,e),this._loadImagery=t,this._createStreamlinesMesh=n,this._rendererSettings=function(e){var t=(0,I.F2)(e.lineWidth),n=2*t,r=Math.round((0,I.F2)(e.lineLength)/n)+1,i=t,a=e.lineColor.toRgba();return{lineRenderWidth:t,segmentLength:n,verticesPerLine:r,lineCollisionWidth:i,lineSpacing:10,lineColor:[a[0]/255,a[1]/255,a[2]/255,a[3]],lineSpeed:e.lineSpeed,fadeDuration:e.fadeDuration,density:e.density,smoothing:(0,I.F2)(e.smoothing),velocityScale:1,minWeightThreshold:.001,minSpeedThreshold:.001,maxTurnAngle:1,mergeLines:!0,interpolate:!0,profile:!1}}(r)}return(0,a.Z)(e,[{key:"animated",get:function(){return this._rendererSettings.lineSpeed>0}},{key:"renderSettings",get:function(){return this._rendererSettings}},{key:"areResourcesCompatible",value:function(e){var t=!0;return(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t&&e._loadImagery===this._loadImagery)&&e._createStreamlinesMesh===this._createStreamlinesMesh)&&e._rendererSettings.verticesPerLine===this._rendererSettings.verticesPerLine)&&e._rendererSettings.segmentLength===this._rendererSettings.segmentLength)&&e._rendererSettings.lineSpacing===this._rendererSettings.lineSpacing)&&e._rendererSettings.density===this._rendererSettings.density)&&e._rendererSettings.smoothing===this._rendererSettings.smoothing)&&e._rendererSettings.velocityScale===this._rendererSettings.velocityScale)&&e._rendererSettings.minWeightThreshold===this._rendererSettings.minWeightThreshold)&&e._rendererSettings.minSpeedThreshold===this._rendererSettings.minSpeedThreshold)&&e._rendererSettings.mergeLines===this._rendererSettings.mergeLines)&&e._rendererSettings.interpolate===this._rendererSettings.interpolate)&&this._rendererSettings.mergeLines&&(t=e._rendererSettings.lineCollisionWidth===this._rendererSettings.lineCollisionWidth),!!t}},{key:"loadResources",value:function(){var e=(0,r.Z)(l.mark((function e(t,n){var r,i,a,s,o,u;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.extent,i=t.size,(0,R.k_)(n),e.next=4,this._loadImagery(r,i[0],i[1],n);case 4:return a=e.sent,e.next=7,this._createStreamlinesMesh(this._rendererSettings,a,n);case 7:return s=e.sent,o=s.vertexData,u=s.indexData,e.abrupt("return",new j(o,u));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),A=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments))._loadImagery=function(t,n,r,i){return(0,d.KK)(e.layer,t,n,r,i)},e._createStreamlinesMesh=function(t,n,r){return e.layer.createStreamlinesMesh({flowData:n,rendererSettings:t},{signal:r})},e.container=null,e.layer=null,e.type="rasterAnimatedFlow",e.redrawOrRefetch=(0,r.Z)(l.mark((function t(){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._rendererChanged();case 1:case"end":return t.stop()}}),t)}))),e}return(0,a.Z)(n,[{key:"updating",get:function(){return!this._strategy||this._strategy.updating}},{key:"update",value:function(e){e.stationary?this._strategy.update(e):this.layerView.requestUpdate()}},{key:"install",value:function(e){this.container=new g,e.addChild(this.container),this._strategy=new T({flowContainer:this.container}),this._rendererChanged()}},{key:"uninstall",value:function(){this._strategy.destroy(),this.container.removeAllChildren(),this.container.remove()}},{key:"moveEnd",value:function(){}},{key:"doRefresh",value:function(){var e=(0,r.Z)(l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"attach",value:function(){}},{key:"_rendererChanged",value:function(){if("animated-flow"===this.layer.renderer.type){var e=new N(this._loadImagery,this._createStreamlinesMesh,this.layer.renderer);this.container.flowStyle=e,this.layerView.requestUpdate()}}}]),n}(c.Z);(0,u._)([(0,h.Cb)()],A.prototype,"_strategy",void 0),(0,u._)([(0,h.Cb)()],A.prototype,"container",void 0),(0,u._)([(0,h.Cb)()],A.prototype,"layer",void 0),(0,u._)([(0,h.Cb)()],A.prototype,"layerView",void 0),(0,u._)([(0,h.Cb)()],A.prototype,"type",void 0),(0,u._)([(0,h.Cb)()],A.prototype,"updating",null);var O=A=(0,u._)([(0,f.j)("esri.views.2d.engine.flow.AnimatedFlowView2D")],A)},24405:function(e,t,n){n.d(t,{V:function(){return c},e:function(){return l}});var r=n(93433),i=n(15861),a=n(87757),s=n(92026),o=n(80031);function l(e){return u.apply(this,arguments)}function u(){return u=(0,i.Z)(a.mark((function e(t){var n,i,l,u,c,h,f,d,p,x=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x.length>1&&void 0!==x[1]?x[1]:t.popupTemplate,(0,s.pC)(n)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,n.getRequiredFields(t.fieldsIndex);case 5:if(i=e.sent,l=n.lastEditInfoEnabled,u=t.objectIdField,c=t.typeIdField,h=t.globalIdField,f=t.relationships,!i.includes("*")){e.next=13;break}return e.abrupt("return",["*"]);case 13:if(!l){e.next=19;break}return e.next=16,(0,o.CH)(t);case 16:e.t0=e.sent,e.next=20;break;case 19:e.t0=[];case 20:return d=e.t0,p=(0,o.Q0)(t.fieldsIndex,[].concat((0,r.Z)(i),(0,r.Z)(d))),e.abrupt("return",(c&&p.push(c),p&&u&&t.fieldsIndex.has(u)&&-1===p.indexOf(u)&&p.push(u),p&&h&&t.fieldsIndex.has(h)&&-1===p.indexOf(h)&&p.push(h),f&&f.forEach((function(e){var n=e.keyField;p&&n&&t.fieldsIndex.has(n)&&-1===p.indexOf(n)&&p.push(n)})),p));case 23:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function c(e,t){return e.popupTemplate?e.popupTemplate:(0,s.pC)(t)&&t.defaultPopupTemplateEnabled&&(0,s.pC)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}}]);
//# sourceMappingURL=3182.131bf9f9.chunk.js.map