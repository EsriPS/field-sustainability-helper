"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[8405],{58405:function(e,t,i){i.r(t),i.d(t,{default:function(){return V}});var r=i(29439),n=i(74165),a=i(15861),s=i(37762),h=i(15671),u=i(43144),l=i(60136),o=i(54062),c=i(27366),f=i(52639),d=i(81608),g=i(92026),p=i(94172),v=(i(32718),i(25243),i(63780),i(93169),i(75366),i(69912)),y=i(95986),_=i(75391),w=i(34035),Z=i(67581),m=["routeInfo","directionLines","directionPoints","polygonBarriers","polylineBarriers","pointBarriers","stops"],k=Object.freeze({remove:function(){},pause:function(){},resume:function(){}}),b=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,h.Z)(this,i),(e=t.apply(this,arguments))._graphicsViews=new Map,e._highlightIds=new Map,e}return(0,u.Z)(i,[{key:"attach",value:function(){var e,t=this,i=(0,s.Z)(m);try{var r=function(){var i=e.value;t.handles.add((0,p.YP)((function(){return(0,g.pC)(t.layer[i])?"routeInfo"===i?[(0,g.Wg)(t.layer[i])]:(0,g.Wg)(t.layer[i]).toArray():null}),(function(e){return t._createGraphicsView(i,e)}),p.nn),i)};for(i.s();!(e=i.n()).done;)r()}catch(n){i.e(n)}finally{i.f()}}},{key:"detach",value:function(){this._destroyGraphicsViews()}},{key:"highlight",value:function(e){var t,i=this;return"number"==typeof e?t=[e]:e instanceof f.Z?t=[e.uid]:Array.isArray(e)&&e.length>0?t="number"==typeof e[0]?e:e.map((function(e){return e&&e.uid})):d.Z.isCollection(e)&&(t=e.map((function(e){return e&&e.uid})).toArray()),t=t.filter((function(e){return null!=e})),t.length?(this._addHighlight(t),{remove:function(){return i._removeHighlight(t)}}):k}},{key:"hitTest",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var r,a,h,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.suspended&&this._graphicsViews.size){e.next=2;break}return e.abrupt("return",Promise.resolve(null));case 2:r=Array.from(this._graphicsViews.values()).reverse().map((function(e){return e.hitTest(t)})).flat().filter((function(e){return!!e})),a=(0,s.Z)(r);try{for(a.s();!(h=a.n()).done;)(u=h.value).layer=this.layer,u.sourceLayer=this.layer}catch(i){a.e(i)}finally{a.f()}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"moveStart",value:function(){}},{key:"moveEnd",value:function(){}},{key:"update",value:function(e){var t,i=(0,s.Z)(this._graphicsViews.values());try{for(i.s();!(t=i.n()).done;){t.value.processUpdate(e)}}catch(r){i.e(r)}finally{i.f()}}},{key:"viewChange",value:function(){var e,t=(0,s.Z)(this._graphicsViews.values());try{for(t.s();!(e=t.n()).done;){e.value.viewChange()}}catch(i){t.e(i)}finally{t.f()}}},{key:"isUpdating",value:function(){var e,t=(0,s.Z)(this._graphicsViews.values());try{for(t.s();!(e=t.n()).done;){if(e.value.updating)return!0}}catch(i){t.e(i)}finally{t.f()}return!1}},{key:"_createGraphicsView",value:function(e,t){var i=this;this._destroyGraphicsView(e);var r=this.view,n=new d.Z((0,g.pC)(t)?t.map((function(e){var t=e.toPortalJSON(),i=t.attributes,r=t.geometry,n=t.symbol,a=t.popupInfo;return f.Z.fromJSON({attributes:i,geometry:r,symbol:n,popupTemplate:a})})):[]),a=new _.Z(r.featuresTilingScheme),s=new w.Z({container:a,graphics:n,requestUpdateCallback:function(){return i.requestUpdate()},view:r});this._graphicsViews.set(e,s),this.container.addChildAt(a,m.indexOf(e)),this._updateHighlight(),this.handles.add([(0,p.YP)((function(){return s.updating}),(function(){return i.notifyChange("updating")}),p.nn)],"updating-".concat(e))}},{key:"_destroyGraphicsView",value:function(e){if(this._graphicsViews.has(e)){var t=this._graphicsViews.get(e);this.container.removeChild(t.container),t.destroy(),this.handles.remove("updating-".concat(e)),this._graphicsViews.delete(e)}}},{key:"_destroyGraphicsViews",value:function(){this.container.removeAllChildren();var e,t=(0,s.Z)(this._graphicsViews.entries());try{for(t.s();!(e=t.n()).done;){var i=(0,r.Z)(e.value,2),n=i[0],a=i[1];this.handles.remove(n),a.destroy()}}catch(h){t.e(h)}finally{t.f()}this._graphicsViews.clear()}},{key:"_addHighlight",value:function(e){var t,i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(this._highlightIds.has(r)){var n=this._highlightIds.get(r);this._highlightIds.set(r,n+1)}else this._highlightIds.set(r,1)}}catch(a){i.e(a)}finally{i.f()}this._updateHighlight()}},{key:"_removeHighlight",value:function(e){var t,i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(this._highlightIds.has(r)){var n=this._highlightIds.get(r)-1;0===n?this._highlightIds.delete(r):this._highlightIds.set(r,n)}}}catch(a){i.e(a)}finally{i.f()}this._updateHighlight()}},{key:"_updateHighlight",value:function(){var e,t=Array.from(this._highlightIds.keys()),i=(0,s.Z)(this._graphicsViews.values());try{for(i.s();!(e=i.n()).done;){e.value.setHighlight(t)}}catch(r){i.e(r)}finally{i.f()}}}]),i}((0,y.y)(Z.Z)),V=b=(0,c._)([(0,v.j)("esri.views.2d.layers.RouteLayerView2D")],b)},75391:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(15671),n=i(43144),a=i(11752),s=i(61120),h=i(60136),u=i(54062),l=i(80613),o=function(e){(0,h.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,r.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"renderChildren",value:function(e){this.attributeView.bindTextures(e.context,!1),this.children.some((function(e){return e.hasData}))&&((0,a.Z)((0,s.Z)(i.prototype),"renderChildren",this).call(this,e),e.drawPhase===l.jx.MAP&&this._renderChildren(e),this.hasHighlight()&&e.drawPhase===l.jx.HIGHLIGHT&&this._renderHighlight(e),this._boundsRenderer&&this._boundsRenderer.doRender(e))}},{key:"_renderHighlight",value:function(e){var t=e.painter.effects.highlight;t.bind(e),this._renderChildren(e,t.defines),t.draw(e),t.unbind()}}]),i}(i(82022).Z)}}]);
//# sourceMappingURL=8405.2a8ac8a1.chunk.js.map