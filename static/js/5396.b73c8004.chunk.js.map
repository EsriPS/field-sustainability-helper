{"version":3,"file":"static/js/5396.b73c8004.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/ExportWMSImageParameters.js","../node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js","../node_modules/@arcgis/core/views/layers/WMSLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";const a={visible:\"visibleSublayers\"};let l=class extends(s(r)){constructor(e){super(e),this.scale=0}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.sublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"wms-sublayer-update\",(e=>this.notifyChange(a[e.propertyName])))],\"layer\"))}get layers(){const{visibleSublayers:e}=this;return e.filter((e=>e.name)).map((e=>e.name)).join(\",\")}get version(){this.commitProperty(\"layers\");const e=this.layer;return e&&e.commitProperty(\"imageTransparency\"),(this._get(\"version\")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,s=null==e?void 0:e.sublayers,t=[],o=e=>{const{minScale:s,maxScale:a,sublayers:l,visible:i}=e;i&&(0===r||(0===s||r<=s)&&(0===a||r>=a))&&(l?l.forEach(o):t.unshift(e))};return null==s||s.forEach(o),t}toJSON(){const{layer:e,layers:r}=this,{imageFormat:s,imageTransparency:t,version:o}=e;return{format:s,request:\"GetMap\",service:\"WMS\",styles:\"\",transparent:t,version:o,layers:r}}};e([t()],l.prototype,\"layer\",null),e([t({readOnly:!0})],l.prototype,\"layers\",null),e([t({type:Number})],l.prototype,\"scale\",void 0),e([t({readOnly:!0})],l.prototype,\"version\",null),e([t({readOnly:!0})],l.prototype,\"visibleSublayers\",null),l=e([o(\"esri.layers.support.ExportWMSImageParameters\")],l);export{l as ExportWMSImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../geometry/Extent.js\";import{BitmapContainer as n}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import m from\"./support/ExportStrategy.js\";import h from\"../../layers/LayerView.js\";import{RefreshableLayerView as c}from\"../../layers/RefreshableLayerView.js\";import{WMSLayerView as d}from\"../../layers/WMSLayerView.js\";const l=r.getLogger(\"esri.views.2d.layers.WMSLayerView2D\");let y=class extends(d(c(p(h)))){initialize(){const{layer:e,view:r}=this;e.supportsSpatialReference(r.spatialReference)||this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\",{layer:e})))}update(e){this.strategy.update(e).catch((e=>{i(e)||l.error(e)}))}attach(){const{layer:e}=this,{imageMaxHeight:t,imageMaxWidth:r}=e;this._bitmapContainer=new n,this.container.addChild(this._bitmapContainer),this.strategy=new m({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:t,imageMaxWidth:r,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.handles.add(this.watch(\"exportImageVersion\",(()=>this.requestUpdate())),\"exportImageVersion\")}detach(){this.handles.remove(\"exportImageVersion\"),this.strategy.destroy(),this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t}=this,r=this._bitmapContainer,{x:i,y:s}=e,{spatialReference:a}=t;let n=null,p=0,m=0;if(r.children.some((e=>{const{width:t,height:r,resolution:h,x:c,y:d}=e,l=c+h*t,y=d-h*r;return i>=c&&i<=l&&s<=d&&s>=y&&(n=new o({xmin:c,ymin:y,xmax:l,ymax:d,spatialReference:a}),p=t,m=r,!0)})),!n)return null;const h=n.width/p,c=Math.round((i-n.xmin)/h),d=Math.round((n.ymax-s)/h);return{extent:n,width:p,height:m,x:c,y:d}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this.timeExtent,...i})}};e([s()],y.prototype,\"strategy\",void 0),e([s()],y.prototype,\"updating\",void 0),y=e([a(\"esri.views.2d.layers.WMSLayerView2D\")],y);const u=y;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as s}from\"../../layers/support/commonProperties.js\";import{ExportWMSImageParameters as p}from\"../../layers/support/ExportWMSImageParameters.js\";const a=a=>{let i=class extends a{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var e;return null==(e=this.exportImageParameters)||e.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:t}));const{popupEnabled:o}=t;if(!o)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:o}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:a,height:i,x:m,y:n}=s;if(!(p&&a&&i))throw new r(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:p,width:a,height:i});const u=t.fetchFeatureInfo(p,a,i,m,n);return Promise.resolve(u?[u]:[])}};return e([t()],i.prototype,\"exportImageParameters\",void 0),e([t({readOnly:!0})],i.prototype,\"exportImageVersion\",null),e([t()],i.prototype,\"layer\",void 0),e([t(s)],i.prototype,\"timeExtent\",void 0),i=e([o(\"esri.layers.mixins.WMSLayerView\")],i),i};export{a as WMSLayerView,a as default};\n"],"names":["a","visible","l","e","scale","this","_get","_set","handles","remove","add","sublayers","on","notifyChange","propertyName","visibleSublayers","filter","name","map","join","commitProperty","layer","r","s","t","forEach","o","minScale","maxScale","unshift","layers","format","imageFormat","request","service","styles","transparent","imageTransparency","version","prototype","readOnly","type","Number","y","view","supportsSpatialReference","spatialReference","addResolvingPromise","Promise","reject","strategy","update","catch","i","error","imageMaxHeight","imageMaxWidth","_bitmapContainer","n","container","addChild","m","fetchSource","fetchImage","bind","requestUpdate","imageRotationSupported","imageNormalizationSupported","hidpi","watch","destroy","removeChild","removeAllChildren","x","p","children","some","width","height","h","resolution","c","d","xmin","ymin","xmax","ymax","Math","round","extent","updating","updateRequested","timeExtent","exportImageParameters","popupEnabled","createFetchPopupFeaturesQuery","resolve","u","fetchFeatureInfo"],"sourceRoot":""}