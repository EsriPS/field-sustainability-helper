{"version":3,"file":"static/js/2186.3a3456cb.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import i from\"../../../Graphic.js\";import s from\"../../../core/Collection.js\";import{isSome as t,isNone as r}from\"../../../core/maybe.js\";import{init as h,on as a}from\"../../../core/watchUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import p from\"./graphics/GraphicContainer.js\";import n from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";const g=\"sublayers\",d=\"layerView\",u=Object.freeze({remove(){},pause(){},resume(){}});let f=class extends(c(l)){constructor(){super(...arguments),this._highlightIds=new Map}async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(i=>i.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){t(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():t(this._graphicsViews)?yield*this._graphicsViews:yield*[]}async hitTest(e,i){const s=Array.from(this.graphicsViews(),(async i=>{const s=await i.hitTest(e);if(t(this._graphicsViewsFeatureCollectionMap)){const e=this._graphicsViewsFeatureCollectionMap.get(i);for(const i of s)!i.popupTemplate&&e.popupTemplate&&(i.popupTemplate=e.popupTemplate)}return s}));return(await Promise.all(s)).flat()}highlight(e){let t;return\"number\"==typeof e?t=[e]:e instanceof i?t=[e.uid]:Array.isArray(e)&&e.length>0?t=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):s.isCollection(e)&&(t=e.map((e=>e&&e.uid)).toArray()),t=t.filter((e=>null!=e)),t.length?(this._addHighlight(t),{remove:()=>{this._removeHighlight(t)}}):u}update(e){for(const i of this.graphicsViews())i.processUpdate(e)}attach(){const e=this.view,i=()=>this.requestUpdate(),s=this.layer.featureCollections;if(t(s)&&s.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of s){const s=new p(this.view.featuresTilingScheme);s.fadeTransitionEnabled=!0;const r=new n({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:i,container:s});this._graphicsViewsFeatureCollectionMap.set(r,t),this.container.addChild(r.container),this.handles.add([h(t,\"visible\",(e=>r.container.visible=e)),h(r,\"updating\",(()=>this.notifyChange(\"updating\")))],d)}this._updateHighlight()}else t(this.layer.sublayers)&&this.handles.add(a(this.layer,\"sublayers\",\"change\",(()=>this._createGraphicsViews()),(()=>this._createGraphicsViews()),(()=>this._destroyGraphicsViews())),g)}detach(){this._destroyGraphicsViews(),this.handles.remove(g)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.handles.remove(d);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),r(this.layer.sublayers))return;const e=[],i=this.view,s=()=>this.requestUpdate();for(const t of this.layer.sublayers){const r=new p(this.view.featuresTilingScheme);r.fadeTransitionEnabled=!0;const a=new n({view:i,graphics:t.graphics,requestUpdateCallback:s,container:r});this.handles.add([t.on(\"graphic-update\",a.graphicUpdateHandler),h(t,\"visible\",(e=>a.container.visible=e)),h(a,\"updating\",(()=>this.notifyChange(\"updating\")))],d),this.container.addChild(a.container),e.push(a)}this._graphicsViews=e,this._updateHighlight()}_addHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i);this._highlightIds.set(i,e+1)}else this._highlightIds.set(i,1);this._updateHighlight()}_removeHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i)-1;0===e?this._highlightIds.delete(i):this._highlightIds.set(i,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const i of this.graphicsViews())i.setHighlight(e)}};f=e([o(\"esri.views.2d.layers.MapNotesLayerView2D\")],f);const m=f;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"../../engine/webgl/enums.js\";import r from\"./BaseGraphicContainer.js\";class i extends r{renderChildren(r){this.attributeView.bindTextures(r.context,!1),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===e.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===e.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}export{i as default};\n"],"names":["g","d","u","Object","freeze","remove","pause","resume","f","arguments","_highlightIds","Map","e","Array","from","this","graphicsViews","i","hitTest","filter","popupTemplate","flat","t","_graphicsViewsFeatureCollectionMap","keys","_graphicsViews","s","get","Promise","all","uid","isArray","length","map","toArray","_addHighlight","_removeHighlight","processUpdate","view","requestUpdate","layer","featureCollections","p","featuresTilingScheme","fadeTransitionEnabled","r","n","graphics","source","renderer","requestUpdateCallback","container","set","addChild","handles","add","h","visible","notifyChange","_updateHighlight","sublayers","a","_createGraphicsViews","_destroyGraphicsViews","viewChange","updating","removeAllChildren","destroy","on","graphicUpdateHandler","push","has","delete","setHighlight","c","l","m","o","attributeView","bindTextures","context","children","some","hasData","drawPhase","_renderChildren","hasHighlight","_renderHighlight","_boundsRenderer","doRender","painter","effects","highlight","bind","defines","draw","unbind"],"sourceRoot":""}