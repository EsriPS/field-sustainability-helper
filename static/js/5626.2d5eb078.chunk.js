"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[5626],{55626:function(e,r,t){t.r(r),t.d(r,{default:function(){return j}});var i=t(15671),n=t(43144),a=t(60136),s=t(29388),o=t(27366),u=t(49861),l=(t(63780),t(93169),t(25243),t(69912)),p=t(1413),c=t(15861),f=t(87757),y=t(76200),d=t(43813),v=t(64455),m=t(27991),B=t(23084),b=(t(59486),t(52639)),Z=t(67123),_=t(92026),g=t(38511),h=t(78952),k=t(10691),C=t(49818),R=t(89677),P=t(7882),A=t(29909),N=t(80885);function S(e){return C.default.fromJSON(e).features.map((function(e){return e.geometry}))}var w=function(e){(0,a.Z)(t,e);var r=(0,s.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).directions=null,n.facilities=null,n.incidents=null,n.messages=null,n.pointBarriers=null,n.polylineBarriers=null,n.polygonBarriers=null,n.routes=null,n}return(0,n.Z)(t,[{key:"readFacilities",value:function(e){return S(e)}},{key:"readIncidents",value:function(e){return S(e)}},{key:"readPointBarriers",value:function(e,r){return S(r.barriers)}},{key:"readPolylineBarriers",value:function(e){return S(e)}},{key:"readPolygonBarriers",value:function(e){return S(e)}},{key:"readRoutes",value:function(e){return function(e){return e.features.map((function(r){var t=h.Z.fromJSON(e.spatialReference),i=b.Z.fromJSON(r);return(0,_.pC)(i.geometry)&&(i.geometry.spatialReference=t),i}))}(e)}}]),t}(Z.wq);(0,o._)([(0,u.Cb)({type:[k.Z]})],w.prototype,"directions",void 0),(0,o._)([(0,u.Cb)({type:[P.Z]})],w.prototype,"facilities",void 0),(0,o._)([(0,g.r)("facilities")],w.prototype,"readFacilities",null),(0,o._)([(0,u.Cb)({type:[P.Z]})],w.prototype,"incidents",void 0),(0,o._)([(0,g.r)("incidents")],w.prototype,"readIncidents",null),(0,o._)([(0,u.Cb)({type:[R.Z]})],w.prototype,"messages",void 0),(0,o._)([(0,u.Cb)({type:[P.Z]})],w.prototype,"pointBarriers",void 0),(0,o._)([(0,g.r)("pointBarriers",["barriers"])],w.prototype,"readPointBarriers",null),(0,o._)([(0,u.Cb)({type:[A.Z]})],w.prototype,"polylineBarriers",void 0),(0,o._)([(0,g.r)("polylineBarriers")],w.prototype,"readPolylineBarriers",null),(0,o._)([(0,u.Cb)({type:[N.Z]})],w.prototype,"polygonBarriers",void 0),(0,o._)([(0,g.r)("polygonBarriers")],w.prototype,"readPolygonBarriers",null),(0,o._)([(0,u.Cb)({type:[b.Z]})],w.prototype,"routes",void 0),(0,o._)([(0,g.r)("routes")],w.prototype,"readRoutes",null);var x=w=(0,o._)([(0,l.j)("esri.rest.support.ClosestFacilitySolveResult")],w),F=(0,d.E)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});function J(){return J=(0,c.Z)(f.mark((function e(r,t,i){var n,a,s,o,u,l,c,d,b,Z,_,g,h,k,C;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=[],s={},o={},u=(0,B.en)(r),l=u.path,t.incidents&&t.incidents.features&&(0,m.et)(t.incidents.features,a,"incidents.features",s),t.facilities&&t.facilities.features&&(0,m.et)(t.facilities.features,a,"facilities.features",s),t.pointBarriers&&t.pointBarriers.features&&(0,m.et)(t.pointBarriers.features,a,"pointBarriers.features",s),t.polylineBarriers&&t.polylineBarriers.features&&(0,m.et)(t.polylineBarriers.features,a,"polylineBarriers.features",s),t.polygonBarriers&&t.polygonBarriers.features&&(0,m.et)(t.polygonBarriers.features,a,"polygonBarriers.features",s),e.next=4,(0,v.aX)(a);case 4:for(d in c=e.sent,s)b=s[d],n.push(d),o[d]=c.slice(b[0],b[1]);if(!(0,m.Wf)(o,n)){e.next=17;break}return Z=null,e.prev=8,e.next=11,(0,m.bI)(l,t.apiKey,i);case 11:Z=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:Z&&!Z.hasZ&&(0,m.ef)(o,n);case 17:for(g in _=function(e){o[e].forEach((function(r,i){t.get(e)[i].geometry=r}))},o)_(g);return h=(0,p.Z)((0,p.Z)({},i),{},{query:(0,p.Z)((0,p.Z)((0,p.Z)({},u.query),F.toQueryParams(t)),{},{f:"json"})}),e.next=22,(0,y.default)("".concat(l,"/solveClosestFacility"),h);case 22:return k=e.sent,C=k.data,e.abrupt("return",x.fromJSON(C));case 25:case"end":return e.stop()}}),e,null,[[8,14]])}))),J.apply(this,arguments)}var O=function(e){(0,a.Z)(t,e);var r=(0,s.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).url=null,n}return(0,n.Z)(t,[{key:"solve",value:function(e,r){return function(e,r,t){return J.apply(this,arguments)}(this.url,e,r)}}]),t}(t(4338).Z);(0,o._)([(0,u.Cb)()],O.prototype,"url",void 0);var j=O=(0,o._)([(0,l.j)("esri.tasks.ClosestFacilityTask")],O)}}]);
//# sourceMappingURL=5626.2d5eb078.chunk.js.map