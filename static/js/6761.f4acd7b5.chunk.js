"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[6761],{6761:function(e,n,t){t.r(n),t.d(n,{destroyContext:function(){return C},dracoDecompressPointCloudData:function(){return g},filterObbsForModifications:function(){return _},filterObbsForModificationsSync:function(){return M},initialize:function(){return N},interpretObbModificationResults:function(){return T},process:function(){return w},setLegacySchema:function(){return A},setModifications:function(){return U},setModificationsSync:function(){return F},test:function(){return O}});var r,o,i=t(74165),a=t(15861),u=t(92026),f=t(18722);!function(e){e[e.None=0]="None",e[e.Int16=1]="Int16",e[e.Int32=2]="Int32"}(r||(r={})),function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(o||(o={}));var s,c=t(65905);function l(e){return(0,c.V)("esri/libs/i3s/".concat(e))}var d,h,p,y,b;t(67077);!function(e){e[e.Unmodified=0]="Unmodified",e[e.Culled=1]="Culled",e[e.NotChecked=2]="NotChecked"}(d||(d={})),function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(h||(h={}));!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(p||(p={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(y||(y={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(b||(b={}));var m,E;function w(e){return v.apply(this,arguments)}function v(){return v=(0,a.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return t=[n.geometryBuffer],e.abrupt("return",{result:R(n,t),transferList:t});case 4:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(e){return P.apply(this,arguments)}function P(){return P=(0,a.Z)((0,i.Z)().mark((function e(n){var t,r,o,a,u,s,c,l,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if(r=[n.geometryBuffer],o=n.geometryBuffer,a=o.byteLength,u=E._malloc(a),(s=new Uint8Array(E.HEAPU8.buffer,u,a)).set(new Uint8Array(o)),c=E.dracoDecompressPointCloudData(u,s.byteLength),E._free(u),!(c.error.length>0)){e.next=7;break}throw"i3s.wasm: ".concat(c.error);case 7:return l=(null==(t=c.featureIds)?void 0:t.length)>0?(0,f.tP)(c.featureIds):null,d=(0,f.tP)(c.positions),l&&r.push(l.buffer),r.push(d.buffer),e.abrupt("return",{result:{positions:d,featureIds:l},transferList:r});case 10:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function _(e){return L.apply(this,arguments)}function L(){return L=(0,a.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return M(n),t={buffer:n.buffer},e.abrupt("return",{result:t,transferList:[t.buffer]});case 5:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function U(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:F(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return I.apply(this,arguments)}function I(){return(I=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:E.setLegacySchema(n.context,n.jsonSchema);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){k(e)}function F(e){for(var n=e.modifications,t=E._malloc(8*n.length),r=new Float64Array(E.HEAPU8.buffer,t,n.length),o=0;o<n.length;++o)r[o]=n[o];E.setModifications(e.context,t,n.length,e.isGeodetic),E._free(t)}function R(e,n){if(!E)return null;var t=e.context,o=e.localOrigin,i=e.globalTrafo,a=e.mbs,s=e.obb,c=e.elevationOffset,l=e.geometryBuffer,d=e.geometryDescriptor,h=e.indexToVertexProjector,p=e.vertexToRenderProjector,y=E._malloc(l.byteLength),b=E._malloc(33*Float64Array.BYTES_PER_ELEMENT),m=new Uint8Array(E.HEAPU8.buffer,y,l.byteLength);m.set(new Uint8Array(l));var w=new Float64Array(E.HEAPU8.buffer,b,33);S(w,o);var v=w.byteOffset+3*w.BYTES_PER_ELEMENT,g=new Float64Array(w.buffer,v);S(g,i),v+=16*w.BYTES_PER_ELEMENT,S(g=new Float64Array(w.buffer,v),a),v+=4*w.BYTES_PER_ELEMENT,(0,u.pC)(s)&&(S(g=new Float64Array(w.buffer,v),s.center),v+=3*w.BYTES_PER_ELEMENT,S(g=new Float64Array(w.buffer,v),s.halfSize),v+=3*w.BYTES_PER_ELEMENT,S(g=new Float64Array(w.buffer,v),s.quaternion));var P=d,_={isDraco:!1,isLegacy:!1,color:e.layouts.some((function(e){return e.some((function(e){return"color"===e.name}))})),normal:e.needNormals&&e.layouts.some((function(e){return e.some((function(e){return"normalCompressed"===e.name}))})),uv0:e.layouts.some((function(e){return e.some((function(e){return"uv0"===e.name}))})),uvRegion:e.layouts.some((function(e){return e.some((function(e){return"uvRegion"===e.name}))})),featureIndex:P.featureIndex},L=E.process(t,!!e.obb,y,m.byteLength,P,_,b,c,h,p,e.normalReferenceFrame);if(E._free(b),E._free(y),L.error.length>0)throw"i3s.wasm: ".concat(L.error);if(L.discarded)return null;var U=L.componentOffsets.length>0?(0,f.tP)(L.componentOffsets):null,x=L.featureIds.length>0?(0,f.tP)(L.featureIds):null,A=(0,f.tP)(L.interleavedVertedData).buffer,I=L.indicesType===r.Int16?(0,f.tP)(new Uint16Array(L.indices.buffer,L.indices.byteOffset,L.indices.byteLength/2)):(0,f.tP)(new Uint32Array(L.indices.buffer,L.indices.byteOffset,L.indices.byteLength/4)),C=(0,f.tP)(L.positions),F=L.positionIndicesType===r.Int16?(0,f.tP)(new Uint16Array(L.positionIndices.buffer,L.positionIndices.byteOffset,L.positionIndices.byteLength/2)):(0,f.tP)(new Uint32Array(L.positionIndices.buffer,L.positionIndices.byteOffset,L.positionIndices.byteLength/4)),R={layout:e.layouts[0],interleavedVertexData:A,indices:I,hasColors:L.hasColors,hasModifications:L.hasModifications,positionData:{data:C,indices:F}};return x&&n.push(x.buffer),U&&n.push(U.buffer),n.push(A),n.push(I.buffer),n.push(C.buffer),n.push(F.buffer),{componentOffsets:U,featureIds:x,transformedGeometry:R,obb:L.obb}}function T(e){return 0===e?h.Unmodified:1===e?h.PotentiallyModified:2===e?h.Culled:h.Unknown}function M(e){var n=e.context,t=e.buffer,r=E._malloc(t.byteLength),o=t.byteLength/Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(E.HEAPU8.buffer,r,o),a=new Float64Array(t);i.set(a),E.filterOBBs(n,r,o),a.set(i),E._free(r)}function k(e){E&&E.destroy(e)}function S(e,n){for(var t=0;t<n.length;++t)e[t]=n[t]}function N(){return E?Promise.resolve():(m||(m=(s||(s=new Promise((function(e){return t.e(7552).then(t.bind(t,57552)).then((function(e){return e.i})).then((function(n){var t=(0,n.default)({locateFile:l,onRuntimeInitialized:function(){return e(t)}});delete t.then}))})).catch((function(e){return Promise.reject(e)}))),s).then((function(e){E=e,m=null}))),m)}var O={transform:R,destroy:k}}}]);
//# sourceMappingURL=6761.f4acd7b5.chunk.js.map