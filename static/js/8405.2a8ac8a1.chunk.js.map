{"version":3,"file":"static/js/8405.2a8ac8a1.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/RouteLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../Graphic.js\";import i from\"../../../core/Collection.js\";import{isSome as t,unwrap as r}from\"../../../core/maybe.js\";import{watch as h,initial as o}from\"../../../core/reactiveUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as n}from\"./LayerView2D.js\";import c from\"./graphics/GraphicContainer.js\";import p from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";const g=[\"routeInfo\",\"directionLines\",\"directionPoints\",\"polygonBarriers\",\"polylineBarriers\",\"pointBarriers\",\"stops\"],d=Object.freeze({remove(){},pause(){},resume(){}});let m=class extends(n(l)){constructor(){super(...arguments),this._graphicsViews=new Map,this._highlightIds=new Map}attach(){for(const e of g)this.handles.add(h((()=>t(this.layer[e])?\"routeInfo\"===e?[r(this.layer[e])]:r(this.layer[e]).toArray():null),(s=>this._createGraphicsView(e,s)),o),e)}detach(){this._destroyGraphicsViews()}highlight(e){let t;return\"number\"==typeof e?t=[e]:e instanceof s?t=[e.uid]:Array.isArray(e)&&e.length>0?t=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):i.isCollection(e)&&(t=e.map((e=>e&&e.uid)).toArray()),t=t.filter((e=>null!=e)),t.length?(this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):d}async hitTest(e,s){if(this.suspended||!this._graphicsViews.size)return Promise.resolve(null);const i=Array.from(this._graphicsViews.values()).reverse().map((s=>s.hitTest(e))).flat().filter((e=>!!e));for(const t of i)t.layer=this.layer,t.sourceLayer=this.layer;return i}moveStart(){}moveEnd(){}update(e){for(const s of this._graphicsViews.values())s.processUpdate(e)}viewChange(){for(const e of this._graphicsViews.values())e.viewChange()}isUpdating(){for(const e of this._graphicsViews.values())if(e.updating)return!0;return!1}_createGraphicsView(e,r){this._destroyGraphicsView(e);const a=this.view,n=()=>this.requestUpdate(),l=new i(t(r)?r.map((e=>{const{attributes:i,geometry:t,symbol:r,popupInfo:h}=e.toPortalJSON();return s.fromJSON({attributes:i,geometry:t,symbol:r,popupTemplate:h})})):[]),d=new c(a.featuresTilingScheme),m=new p({container:d,graphics:l,requestUpdateCallback:n,view:a});this._graphicsViews.set(e,m),this.container.addChildAt(d,g.indexOf(e)),this._updateHighlight(),this.handles.add([h((()=>m.updating),(()=>this.notifyChange(\"updating\")),o)],`updating-${e}`)}_destroyGraphicsView(e){if(!this._graphicsViews.has(e))return;const s=this._graphicsViews.get(e);this.container.removeChild(s.container),s.destroy(),this.handles.remove(`updating-${e}`),this._graphicsViews.delete(e)}_destroyGraphicsViews(){this.container.removeAllChildren();for(const[e,s]of this._graphicsViews.entries())this.handles.remove(e),s.destroy();this._graphicsViews.clear()}_addHighlight(e){for(const s of e)if(this._highlightIds.has(s)){const e=this._highlightIds.get(s);this._highlightIds.set(s,e+1)}else this._highlightIds.set(s,1);this._updateHighlight()}_removeHighlight(e){for(const s of e)if(this._highlightIds.has(s)){const e=this._highlightIds.get(s)-1;0===e?this._highlightIds.delete(s):this._highlightIds.set(s,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const s of this._graphicsViews.values())s.setHighlight(e)}};m=e([a(\"esri.views.2d.layers.RouteLayerView2D\")],m);const u=m;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"../../engine/webgl/enums.js\";import r from\"./BaseGraphicContainer.js\";class i extends r{renderChildren(r){this.attributeView.bindTextures(r.context,!1),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===e.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===e.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}export{i as default};\n"],"names":["g","d","Object","freeze","remove","pause","resume","m","arguments","_graphicsViews","Map","_highlightIds","e","handles","add","h","t","layer","r","toArray","s","_createGraphicsView","o","this","_destroyGraphicsViews","uid","Array","isArray","length","map","i","filter","_addHighlight","_removeHighlight","suspended","size","Promise","resolve","from","values","reverse","hitTest","flat","sourceLayer","processUpdate","viewChange","updating","_destroyGraphicsView","a","view","l","toPortalJSON","attributes","geometry","symbol","popupInfo","popupTemplate","c","featuresTilingScheme","p","container","graphics","requestUpdateCallback","requestUpdate","set","addChildAt","indexOf","_updateHighlight","notifyChange","has","get","removeChild","destroy","delete","removeAllChildren","entries","clear","keys","setHighlight","n","u","attributeView","bindTextures","context","children","some","hasData","drawPhase","_renderChildren","hasHighlight","_renderHighlight","_boundsRenderer","doRender","painter","effects","highlight","bind","defines","draw","unbind"],"sourceRoot":""}