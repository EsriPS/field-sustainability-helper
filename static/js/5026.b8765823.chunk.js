"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[5026],{60480:function(e,t,r){r.d(t,{g:function(){return n}});var n={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},15026:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var n=r(1413),a=r(37762),s=r(93433),u=r(74165),i=r(15671),o=r(43144),c=r(60136),l=r(54062),p=r(15861),d=r(27366),h=(r(59486),r(52639)),y=r(76200),f=r(62044),v=r(10064),m=r(93169),Z=r(43404),b=r(54472),g=r(92026),x=r(18202),R=r(66978),k=r(35995),F=r(49861),_=(r(63780),r(25243),r(69912)),q=r(53866),I=r(77981),w=r(63543),O=r(62204),S=r(59301),E=r(28620),A=r(78952),T=new Z.X({originalAndCurrentFeatures:"original-and-current-features",none:"none"});function C(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,p.Z)((0,u.Z)().mark((function e(t){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=3;break}return r=(0,k.sJ)(t),e.abrupt("return",r||{data:t});case 3:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e((0,k.sJ)(n.result))},n.onerror=function(e){return r(e)}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=new Set(["Feature Layer","Table"]),D=function(e){(0,c.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).type="feature-layer",e.refresh=(0,R.Ds)((0,p.Z)((0,u.Z)().mark((function t(){var r,n,a,s;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load();case 2:if(null!=(a=null==(r=e.sourceJSON.editingInfo)?void 0:r.lastEditDate)){t.next=5;break}return t.abrupt("return",{dataChanged:!0,updates:{}});case 5:return t.prev=5,t.next=8,e._fetchService(null);case 8:t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(5),t.abrupt("return",{dataChanged:!0,updates:{}});case 13:return s=a!==(null==(n=e.sourceJSON.editingInfo)?void 0:n.lastEditDate),t.abrupt("return",{dataChanged:s,updates:s?{editingInfo:e.sourceJSON.editingInfo,extent:e.sourceJSON.extent}:null});case 15:case"end":return t.stop()}}),t,null,[[5,10]])})))),e}return(0,o.Z)(r,[{key:"load",value:function(e){var t=(0,g.pC)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON,t)),Promise.resolve(this)}},{key:"queryTask",get:function(){var e=this.layer,t=e.capabilities.query.supportsFormatPBF,r=e.parsedUrl,n=e.dynamicDataSource,a=e.infoFor3D,s=e.gdbVersion,u=e.spatialReference,i=e.fieldsIndex,o=(0,m.Z)("featurelayer-pbf")&&t&&(0,g.Wi)(a)?"pbf":"json";return new E.Z({url:r.path,format:o,fieldsIndex:i,infoFor3D:a,dynamicDataSource:n,gdbVersion:s,sourceSpatialReference:u})}},{key:"addAttachment",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){var n,a,s,i,o;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return n=t.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+"/"+n+"/addAttachment",s=this._getLayerRequestOptions(),i=this._getFormDataForAttachment(r,s.query),e.prev=3,e.next=6,(0,y.default)(a,{body:i});case 6:return o=e.sent,e.abrupt("return",this._createFeatureEditResult(o.data.addAttachmentResult));case 10:throw e.prev=10,e.t0=e.catch(3),this._createAttachmentErrorResult(n,e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r,n){var a,s,i,o,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return a=t.attributes[this.layer.objectIdField],s=this.layer.parsedUrl.path+"/"+a+"/updateAttachment",i=this._getLayerRequestOptions({query:{attachmentId:r}}),o=this._getFormDataForAttachment(n,i.query),e.prev=3,e.next=6,(0,y.default)(s,{body:o});case 6:return c=e.sent,e.abrupt("return",this._createFeatureEditResult(c.data.updateAttachmentResult));case 10:throw e.prev=10,e.t0=e.catch(3),this._createAttachmentErrorResult(a,e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){var n,i,o,c,l,p,d,h,f,v,m,Z,b,g,x,R,k;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:n=t.addFeatures.map(this._serializeFeature,this),i=t.updateFeatures.map(this._serializeFeature,this),o=this._getFeatureIds(t.deleteFeatures,null==r?void 0:r.globalIdUsed),(0,O.P)(n,i,this.layer.spatialReference),c=[],l=[],p=(0,s.Z)(t.deleteAttachments),d=(0,a.Z)(t.addAttachments),e.prev=6,d.s();case 8:if((h=d.n()).done){e.next=17;break}return f=h.value,e.t0=c,e.next=13,this._serializeAttachment(f);case 13:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(6),d.e(e.t2);case 22:return e.prev=22,d.f(),e.finish(22);case 25:v=(0,a.Z)(t.updateAttachments),e.prev=26,v.s();case 28:if((m=v.n()).done){e.next=37;break}return Z=m.value,e.t3=l,e.next=33,this._serializeAttachment(Z);case 33:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 35:e.next=28;break;case 37:e.next=42;break;case 39:e.prev=39,e.t5=e.catch(26),v.e(e.t5);case 42:return e.prev=42,v.f(),e.finish(42);case 45:return b=c.length||l.length||p.length?{adds:c,updates:l,deletes:p}:null,g={gdbVersion:(null==r?void 0:r.gdbVersion)||this.layer.gdbVersion,rollbackOnFailure:null==r?void 0:r.rollbackOnFailureEnabled,useGlobalIds:null==r?void 0:r.globalIdUsed,returnEditMoment:null==r?void 0:r.returnEditMoment,usePreviousEditMoment:null==r?void 0:r.usePreviousEditMoment,sessionId:null==r?void 0:r.sessionId},null!=r&&r.returnServiceEditsOption?(g.edits=JSON.stringify([{id:this.layer.layerId,adds:n,updates:i,deletes:o,attachments:b}]),g.returnServiceEditsOption=T.toJSON(null==r?void 0:r.returnServiceEditsOption),g.returnServiceEditsInSourceSR=null==r?void 0:r.returnServiceEditsInSourceSR):(g.adds=n.length?JSON.stringify(n):null,g.updates=i.length?JSON.stringify(i):null,g.deletes=o.length?null!=r&&r.globalIdUsed?JSON.stringify(o):o.join(","):null,g.attachments=b&&JSON.stringify(b)),x=this._getLayerRequestOptions({method:"post",query:g}),R=null!=r&&r.returnServiceEditsOption?this.layer.url:this.layer.parsedUrl.path,e.next=51,(0,y.default)(R+"/applyEdits",x);case 51:return k=e.sent,e.abrupt("return",this._createEditsResult(k));case 53:case"end":return e.stop()}}),e,this,[[6,19,22,25],[26,39,42,45]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteAttachments",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){var n,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return n=t.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+"/"+n+"/deleteAttachments",e.prev=3,e.next=6,(0,y.default)(a,this._getLayerRequestOptions({query:{attachmentIds:r.join(",")},method:"post"}));case 6:return e.abrupt("return",e.sent.data.deleteAttachmentResults.map(this._createFeatureEditResult));case 9:throw e.prev=9,e.t0=e.catch(3),this._createAttachmentErrorResult(n,e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.signal;return this.load({signal:r}).then((0,p.Z)((0,u.Z)().mark((function r(){var a,s,i,o,c,l,p,d,h,v,m;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e._getLayerRequestOptions((0,n.Z)((0,n.Z)({},t),{},{query:{returnUpdates:!0}})),s=e.layer,i=s.layerId,o=s.url,r.next=6,(0,y.default)("".concat(o,"/").concat(i),a);case 6:return c=r.sent,l=c.data,p=l.id,d=l.extent,h=l.fullExtent,v=l.timeExtent,m=d||h,r.abrupt("return",{id:p,fullExtent:m&&q.Z.fromJSON(m),timeExtent:v&&f.Z.fromJSON({start:v[0],end:v[1]})});case 14:case"end":return r.stop()}}),r)}))))}},{key:"queryAttachments",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){var r,n,s,i,o,c,l,p,d,h,f=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:{},n=this.layer.parsedUrl,s=n.path,e.next=4,this.load();case 4:if(i=this._getLayerRequestOptions(r),this.layer.get("capabilities.operations.supportsQueryAttachments")){e.next=10;break}o=t.objectIds,c=[],l=(0,a.Z)(o);try{for(l.s();!(p=l.n()).done;)d=p.value,h=s+"/"+d+"/attachments",c.push((0,y.default)(h,i))}catch(u){l.e(u)}finally{l.f()}return e.abrupt("return",Promise.all(c).then((function(e){return o.map((function(t,r){return{parentObjectId:t,attachmentInfos:e[r].data.attachmentInfos}}))})).then((function(e){return(0,S.O)(e,s)})));case 10:return e.abrupt("return",this.queryTask.executeAttachmentQuery(t,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.execute(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeJSON(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForIds(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForCount(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForExtent(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeatures",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeRelationshipQuery(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeaturesCount",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeRelationshipQueryForCount(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopFeatures",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeTopFeaturesQuery(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopObjectIds",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForTopIds(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopExtents",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForTopExtents(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopCount",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForTopCount(t,(0,n.Z)((0,n.Z)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_createRequestQueryOptions",value:function(e){var t=(0,n.Z)((0,n.Z)({},this.layer.customParameters),{},{token:this.layer.apiKey},null==e?void 0:e.query);return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}},{key:"_fetchService",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,r){var n,a,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,(0,y.default)(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:(0,m.Z)("featurelayer-advanced-symbols")?{returnAdvancedSymbols:!0}:{},signal:r}));case 3:n=e.sent,a=n.data,t=a;case 6:if(this.sourceJSON=this._patchServiceJSON(t),s=t.type,U.has(s)){e.next=10;break}throw new v.Z("feature-layer-source:unsupported-type",'Source type "'.concat(s,'" is not supported'));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_patchServiceJSON",value:function(e){var t;if("Table"!==e.type&&e.geometryType&&(null==e||null==(t=e.drawingInfo)||!t.renderer)&&!e.defaultSymbol){var r=(0,w.bU)(e.geometryType).renderer;(0,x.RB)("drawingInfo.renderer",r,e)}return"esriGeometryMultiPatch"===e.geometryType&&e.infoFor3D&&(e.geometryType="mesh"),e}},{key:"_serializeFeature",value:function(e){var t=e.geometry,r=e.attributes;return(0,g.Wi)(t)?{attributes:r}:"mesh"===t.type||"extent"===t.type?null:{geometry:t.toJSON(),attributes:r}}},{key:"_serializeAttachment",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){var r,n,a,s,i,o,c,l,p;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.feature,n=t.attachment,a=n.globalId,s=n.name,i=n.contentType,o=n.data,c=n.uploadId,l={globalId:a,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null},r&&(l.parentGlobalId="attributes"in r?r.attributes&&r.attributes[this.layer.globalIdField]:r.globalId),!c){e.next=5;break}l.uploadId=c,e.next=10;break;case 5:if(!o){e.next=10;break}return e.next=8,C(o);case 8:p=e.sent,l.contentType=p.mediaType,l.data=p.data,o instanceof File&&(l.name=o.name);case 10:return e.abrupt("return",(s&&(l.name=s),i&&(l.contentType=i),l));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getFeatureIds",value:function(e,t){var r=e[0];return r?this._canUseGlobalIds(t,e)?this._getGlobalIdsFromFeatureIdentifier(e):"objectId"in r?this._getObjectIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]}},{key:"_getIdsFromFeatures",value:function(e){var t=this.layer.objectIdField;return e.map((function(e){return e.attributes&&e.attributes[t]}))}},{key:"_canUseGlobalIds",value:function(e,t){return e&&"globalId"in t[0]}},{key:"_getObjectIdsFromFeatureIdentifier",value:function(e){return e.map((function(e){return e.objectId}))}},{key:"_getGlobalIdsFromFeatureIdentifier",value:function(e){return e.map((function(e){return e.globalId}))}},{key:"_createEditsResult",value:function(e){var t,r=this,n=e.data,s=this.layer.layerId,u=[],i=null;if(Array.isArray(n)){var o,c=(0,a.Z)(n);try{for(c.s();!(o=c.n()).done;){var l=o.value;u.push({id:l.id,editedFeatures:l.editedFeatures}),l.id===s&&(i={addResults:l.addResults,updateResults:l.updateResults,deleteResults:l.deleteResults,attachments:l.attachments,editMoment:l.editMoment})}}catch(v){c.e(v)}finally{c.f()}}else i=n;var p=null==(t=i)?void 0:t.attachments,d={addFeatureResults:i.addResults?i.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:i.updateResults?i.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:i.deleteResults?i.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:p&&p.addResults?p.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:p&&p.updateResults?p.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:p&&p.deleteResults?p.deleteResults.map(this._createFeatureEditResult,this):[]};if(i.editMoment&&(d.editMoment=i.editMoment),u.length>0){d.editedFeatureResults=[];var h,y=(0,a.Z)(u);try{var f=function(){var e=h.value,t=e.editedFeatures,n=t.adds,a=t.updates,s=t.deletes,u=t.spatialReference,i=u?new A.Z(u):null;d.editedFeatureResults.push({layerId:e.id,editedFeatures:{adds:(null==n?void 0:n.map((function(e){return r._createEditedFeature(e,i)})))||[],updates:(null==a?void 0:a.map((function(e){return{original:r._createEditedFeature(e[0],i),current:r._createEditedFeature(e[1],i)}})))||[],deletes:(null==s?void 0:s.map((function(e){return r._createEditedFeature(e,i)})))||[],spatialReference:i}})};for(y.s();!(h=y.n()).done;)f()}catch(v){y.e(v)}finally{y.f()}}return d}},{key:"_createEditedFeature",value:function(e,t){return new h.Z({attributes:e.attributes,geometry:(0,I.im)((0,n.Z)((0,n.Z)({},e.geometry),{},{spatialReference:t}))})}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new v.Z("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_createAttachmentErrorResult",value:function(e,t){var r=t.details.messages&&t.details.messages[0]||t.message,n=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new v.Z("feature-layer-source:attachment-failure",r,{code:n})}}},{key:"_getFormDataForAttachment",value:function(e,t){var r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(var n in t){var a=t[n];null!=a&&(r.set?r.set(n,a):r.append(n,a))}return r}},{key:"_getLayerRequestOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.layer,r=t.parsedUrl,a=t.gdbVersion,s=t.dynamicDataSource;return(0,n.Z)((0,n.Z)({},e),{},{query:(0,n.Z)((0,n.Z)({gdbVersion:a,layer:s?JSON.stringify({source:s}):void 0},r.query),{},{f:"json"},this._createRequestQueryOptions(e)),responseType:"json"})}}]),r}(b.Z);(0,d._)([(0,F.Cb)()],D.prototype,"type",void 0),(0,d._)([(0,F.Cb)({constructOnly:!0})],D.prototype,"layer",void 0),(0,d._)([(0,F.Cb)({readOnly:!0})],D.prototype,"queryTask",null);var J=D=(0,d._)([(0,_.j)("esri.layers.graphics.sources.FeatureLayerSource")],D)},63543:function(e,t,r){r.d(t,{Dm:function(){return d},Hq:function(){return h},MS:function(){return y},bU:function(){return c}});var n=r(4942),a=r(1413),s=r(93169),u=r(84652),i=r(60480),o=r(76115);function c(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.I4:"esriGeometryPolyline"===e?o.ET:o.lF}}}var l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,p=1;function d(e,t){if((0,s.Z)("esri-csp-restrictions"))return function(){return(0,a.Z)((0,n.Z)({},t,null),e)};try{var r="this.".concat(t," = null;");for(var u in e)r+="this".concat(l.test(u)?".".concat(u):'["'.concat(u,'"]')," = ").concat(JSON.stringify(e[u]),";");var i=new Function("\n      return class AttributesClass$".concat(p++," {\n        constructor() {\n          ").concat(r,";\n        }\n      }\n    "))();return function(){return new i}}catch(o){return function(){return(0,a.Z)((0,n.Z)({},t,null),e)}}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,u.d9)(e)}}]}function y(e,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:i.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}}}]);
//# sourceMappingURL=5026.b8765823.chunk.js.map