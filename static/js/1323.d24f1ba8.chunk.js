"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[1323],{71323:function(e,t,n){n.r(t),n.d(t,{destroyContext:function(){return P},dracoDecompressPointCloudData:function(){return b},filterObbsForModifications:function(){return h},filterObbsForModificationsSync:function(){return x},initialize:function(){return F},interpretObbModificationResults:function(){return L},process:function(){return p},setLegacySchema:function(){return g},setModifications:function(){return E},setModificationsSync:function(){return _},test:function(){return M}});var r,o,i,u=n(15861),s=n(87757),f=n(92026),a=n(18722),c=n(65905);function l(e){return(0,c.V)("esri/libs/i3s/".concat(e))}function p(e){return y.apply(this,arguments)}function y(){return y=(0,u.Z)(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return n=[t.geometryBuffer],e.abrupt("return",{result:A(t,n),transferList:n});case 4:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function b(e){return d.apply(this,arguments)}function d(){return d=(0,u.Z)(s.mark((function e(t){var n,r,o,u,f,c,l,p,y;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(r=[t.geometryBuffer],o=t.geometryBuffer,u=o.byteLength,f=i._malloc(u),(c=new Uint8Array(i.HEAPU8.buffer,f,u)).set(new Uint8Array(o)),l=i.dracoDecompressPointCloudData(f,c.byteLength),i._free(f),!(l.error.length>0)){e.next=7;break}throw"i3s.wasm: ".concat(l.error);case 7:return p=(null==(n=l.featureIds)?void 0:n.length)>0?(0,a.tP)(l.featureIds):null,y=(0,a.tP)(l.positions),p&&r.push(p.buffer),r.push(y.buffer),e.abrupt("return",{result:{positions:y,featureIds:p},transferList:r});case 10:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return m=(0,u.Z)(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return x(t),n={buffer:t.buffer},e.abrupt("return",{result:n,transferList:[n.buffer]});case 5:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function E(e){return w.apply(this,arguments)}function w(){return(w=(0,u.Z)(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:_(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:i.setLegacySchema(t.context,t.jsonSchema);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){T(e)}function _(e){for(var t=e.modifications,n=i._malloc(8*t.length),r=new Float64Array(i.HEAPU8.buffer,n,t.length),o=0;o<t.length;++o)r[o]=t[o];i.setModifications(e.context,n,t.length,e.isGeodetic),i._free(n)}function A(e,t){if(!i)return null;var n=e.context,r=e.localOrigin,o=e.globalTrafo,u=e.mbs,s=e.obb,c=e.elevationOffset,l=e.geometryBuffer,p=e.geometryDescriptor,y=e.indexToVertexProjector,b=e.vertexToRenderProjector,d=i._malloc(l.byteLength),h=i._malloc(33*Float64Array.BYTES_PER_ELEMENT),m=new Uint8Array(i.HEAPU8.buffer,d,l.byteLength);m.set(new Uint8Array(l));var E=new Float64Array(i.HEAPU8.buffer,h,33);I(E,r);var w=E.byteOffset+3*E.BYTES_PER_ELEMENT,g=new Float64Array(E.buffer,w);I(g,o),w+=16*E.BYTES_PER_ELEMENT,I(g=new Float64Array(E.buffer,w),u),w+=4*E.BYTES_PER_ELEMENT,(0,f.pC)(s)&&(I(g=new Float64Array(E.buffer,w),s.center),w+=3*E.BYTES_PER_ELEMENT,I(g=new Float64Array(E.buffer,w),s.halfSize),w+=3*E.BYTES_PER_ELEMENT,I(g=new Float64Array(E.buffer,w),s.quaternion));var v=p,P={isDraco:!1,isLegacy:!1,color:e.layouts.some((function(e){return e.some((function(e){return"color"===e.name}))})),normal:e.needNormals&&e.layouts.some((function(e){return e.some((function(e){return"normalCompressed"===e.name}))})),uv0:e.layouts.some((function(e){return e.some((function(e){return"uv0"===e.name}))})),uvRegion:e.layouts.some((function(e){return e.some((function(e){return"uvRegion"===e.name}))})),featureIndex:v.featureIndex},_=i.process(n,!!e.obb,d,m.byteLength,v,P,h,c,y,b,e.normalReferenceFrame);if(i._free(h),i._free(d),_.error.length>0)throw"i3s.wasm: ".concat(_.error);if(_.discarded)return null;var A=_.componentOffsets.length>0?(0,a.tP)(_.componentOffsets):null,L=_.featureIds.length>0?(0,a.tP)(_.featureIds):null,x=(0,a.tP)(_.interleavedVertedData).buffer,T=1===_.indicesType?(0,a.tP)(new Uint16Array(_.indices.buffer,_.indices.byteOffset,_.indices.byteLength/2)):(0,a.tP)(new Uint32Array(_.indices.buffer,_.indices.byteOffset,_.indices.byteLength/4)),F=(0,a.tP)(_.positions),M=1===_.positionIndicesType?(0,a.tP)(new Uint16Array(_.positionIndices.buffer,_.positionIndices.byteOffset,_.positionIndices.byteLength/2)):(0,a.tP)(new Uint32Array(_.positionIndices.buffer,_.positionIndices.byteOffset,_.positionIndices.byteLength/4)),O={layout:e.layouts[0],interleavedVertexData:x,indices:T,hasColors:_.hasColors,hasModifications:_.hasModifications,positionData:{data:F,indices:M}};return L&&t.push(L.buffer),A&&t.push(A.buffer),t.push(x),t.push(T.buffer),t.push(F.buffer),t.push(M.buffer),{componentOffsets:A,featureIds:L,transformedGeometry:O,obb:_.obb}}function L(e){return 0===e?0:1===e?1:2===e?2:3}function x(e){var t=e.context,n=e.buffer,r=i._malloc(n.byteLength),o=n.byteLength/Float64Array.BYTES_PER_ELEMENT,u=new Float64Array(i.HEAPU8.buffer,r,o),s=new Float64Array(n);u.set(s),i.filterOBBs(t,r,o),s.set(u),i._free(r)}function T(e){i&&i.destroy(e)}function I(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function F(){return i?Promise.resolve():(o||(o=(r||(r=new Promise((function(e){return n.e(7552).then(n.bind(n,57552)).then((function(e){return e.i})).then((function(t){var n=(0,t.default)({locateFile:l,onRuntimeInitialized:function(){return e(n)}});delete n.then}))})).catch((function(e){return Promise.reject(e)}))),r).then((function(e){i=e,o=null}))),o)}var M={transform:A,destroy:T}}}]);
//# sourceMappingURL=1323.d24f1ba8.chunk.js.map