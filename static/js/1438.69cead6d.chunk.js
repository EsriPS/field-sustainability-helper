"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[1438],{48734:function(e,n,t){t.d(n,{n1:function(){return r},U:function(){return a},B3:function(){return i},Op:function(){return u}});t(93169);function r(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function a(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function u(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},35888:function(e,n,t){t.d(n,{d:function(){return i}});var r=t(16889);function i(e,n,t){var i,f=e.byteLength/(4*n),c=new Uint32Array(e,0,f*n),l=new Uint32Array(f),d=null!=(i=null==t?void 0:t.minReduction)?i:0,v=(null==t?void 0:t.originalIndices)||null,h=v?v.length:0,p=(null==t?void 0:t.componentOffsets)||null,g=0;if(p)for(var y=0;y<p.length-1;y++){var m=p[y+1]-p[y];m>g&&(g=m)}else g=f;var w=Math.floor(1.1*g)+1;(null==s||s.length<2*w)&&(s=new Uint32Array((0,r.Sf)(2*w)));for(var k=0;k<2*w;k++)s[k]=0;for(var A=0,b=!!p&&!!v,F=b?h:f,N=b?new Uint32Array(h):null,I=1.96,U=0!==d?Math.ceil(4*I*I/(d*d)*d*(1-d)):F,E=1,S=p?p[1]:F,L=0;L<F;L++){if(L===U){var V=1-A/L;if(V+I*Math.sqrt(V*(1-V)/L)<d)return null;U*=2}if(L===S){for(var x=0;x<2*w;x++)s[x]=0;if(v)for(var Z=p[E-1];Z<p[E];Z++)N[Z]=l[v[Z]];S=p[++E]}for(var M=b?v[L]:L,B=M*n,T=o(c,B,n),C=T%w,D=A;0!==s[2*C+1];){if(s[2*C]===T){var P=s[2*C+1]-1;if(a(c,B,P*n,n)){D=l[P];break}}++C>=w&&(C-=w)}D===A&&(s[2*C]=T,s[2*C+1]=M+1,A++),l[M]=D}if(0!==d&&1-A/f<d)return null;if(b){for(var W=p[E-1];W<N.length;W++)N[W]=l[v[W]];l=N}var O=new Uint32Array(n*A);A=0;for(var z=0;z<F;z++)l[z]===A&&(u(c,(b?v[z]:z)*n,O,A*n,n),A++);if(v&&!b){for(var _=new Uint32Array(h),q=0;q<_.length;q++)_[q]=l[v[q]];l=_}return{buffer:O.buffer,indices:l,uniqueCount:A}}function a(e,n,t,r){for(var i=0;i<r;i++)if(e[n+i]!==e[t+i])return!1;return!0}function u(e,n,t,r,i){for(var a=0;a<i;a++)t[r+a]=e[n+a]}function o(e,n,t){for(var r=0,i=0;i<t;i++)r=(r=e[n+i]+r|0)+(r<<11)+(r>>>2)|0;return r>>>0}var s=null},55158:function(e,n,t){t.d(n,{U$:function(){return c}});var r=t(37762),i=t(15671),a=t(43144),u=t(25158),o=t(48734),s=function(){function e(n,t){(0,i.Z)(this,e),this.layout=n,this.buffer="number"==typeof t?new ArrayBuffer(t*n.stride):t;var a,u=(0,r.Z)(n.fieldNames);try{for(u.s();!(a=u.n()).done;){var o=a.value,s=n.fields.get(o);this[o]=new s.constructor(this.buffer,s.offset,this.stride)}}catch(f){u.e(f)}finally{u.f()}}return(0,a.Z)(e,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}},{key:"getField",value:function(e,n){var t=this[e];return t&&t.elementCount===n.ElementCount&&t.elementType===n.ElementType?t:null}},{key:"slice",value:function(n,t){return new e(this.layout,this.buffer.slice(n*this.stride,t*this.stride))}},{key:"copyFrom",value:function(e,n,t,r){var i=this.stride;if(i%4==0){var a=new Uint32Array(e.buffer,n*i,r*i/4);new Uint32Array(this.buffer,t*i,r*i/4).set(a)}else{var u=new Uint8Array(e.buffer,n*i,r*i);new Uint8Array(this.buffer,t*i,r*i).set(u)}}}]),e}(),f=function(){function e(){(0,i.Z)(this,e),this.stride=0,this.fields=new Map,this.fieldNames=[]}return(0,a.Z)(e,[{key:"vec2f",value:function(e,n){return this.appendField(e,u.Eu,n),this}},{key:"vec2f64",value:function(e,n){return this.appendField(e,u.q6,n),this}},{key:"vec3f",value:function(e,n){return this.appendField(e,u.ct,n),this}},{key:"vec3f64",value:function(e,n){return this.appendField(e,u.fP,n),this}},{key:"vec4f",value:function(e,n){return this.appendField(e,u.ek,n),this}},{key:"vec4f64",value:function(e,n){return this.appendField(e,u.Cd,n),this}},{key:"mat3f",value:function(e,n){return this.appendField(e,u.gK,n),this}},{key:"mat3f64",value:function(e,n){return this.appendField(e,u.ey,n),this}},{key:"mat4f",value:function(e,n){return this.appendField(e,u.bj,n),this}},{key:"mat4f64",value:function(e,n){return this.appendField(e,u.O1,n),this}},{key:"vec4u8",value:function(e,n){return this.appendField(e,u.mc,n),this}},{key:"f32",value:function(e,n){return this.appendField(e,u.ly,n),this}},{key:"f64",value:function(e,n){return this.appendField(e,u.oS,n),this}},{key:"u8",value:function(e,n){return this.appendField(e,u.D_,n),this}},{key:"u16",value:function(e,n){return this.appendField(e,u.av,n),this}},{key:"i8",value:function(e,n){return this.appendField(e,u.Hz,n),this}},{key:"vec2i8",value:function(e,n){return this.appendField(e,u.Vs,n),this}},{key:"vec2i16",value:function(e,n){return this.appendField(e,u.or,n),this}},{key:"vec2u8",value:function(e,n){return this.appendField(e,u.xA,n),this}},{key:"vec4u16",value:function(e,n){return this.appendField(e,u.v6,n),this}},{key:"u32",value:function(e,n){return this.appendField(e,u.Nu,n),this}},{key:"appendField",value:function(e,n,t){var r=n.ElementCount*(0,o.n1)(n.ElementType),i=this.stride;this.fields.set(e,{size:r,constructor:n,offset:i,optional:t}),this.stride+=r,this.fieldNames.push(e)}},{key:"alignTo",value:function(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}},{key:"hasField",value:function(e){return this.fieldNames.indexOf(e)>=0}},{key:"createBuffer",value:function(e){return new s(this,e)}},{key:"createView",value:function(e){return new s(this,e)}},{key:"clone",value:function(){var n=new e;return n.stride=this.stride,n.fields=new Map,this.fields.forEach((function(e,t){return n.fields.set(t,e)})),n.fieldNames=this.fieldNames.slice(),n.BufferType=this.BufferType,n}}]),e}();function c(){return new f}},50256:function(e,n,t){function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=e.stride;return e.fieldNames.filter((function(n){var t=e.fields.get(n).optional;return!(t&&t.glPadding)})).map((function(r){var a=e.fields.get(r),u=a.constructor.ElementCount,o=i(a.constructor.ElementType),s=a.offset,f=!(!a.optional||!a.optional.glNormalized);return{name:r,stride:t,count:u,type:o,offset:s,normalized:f,divisor:n}}))}function i(e){var n=a[e];if(n)return n;throw new Error("BufferType not supported in WebGL")}t.d(n,{K:function(){return r}});var a={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},11438:function(e,n,t){t.r(n),t.d(n,{work:function(){return Q},wrappedWork:function(){return G}});var r=t(15861),i=t(87757),a=t(35888);function u(e,n,t){for(var r=n/3,i=new Uint32Array(t+1),a=new Uint32Array(t+1),u=function(e,n){e<n?i[e+1]++:a[n+1]++},o=0;o<r;o++){var s=e[3*o],f=e[3*o+1],c=e[3*o+2];u(s,f),u(f,c),u(c,s)}for(var l=0,d=0,v=0;v<t;v++){var h=i[v+1],p=a[v+1];i[v+1]=l,a[v+1]=d,l+=h,d+=p}for(var g=new Uint32Array(6*r),y=i[t],m=function(e,n,t){if(e<n){var r=i[e+1]++;g[2*r]=n,g[2*r+1]=t}else{var u=a[n+1]++;g[2*y+2*u]=e,g[2*y+2*u+1]=t}},w=0;w<r;w++){var k=e[3*w],A=e[3*w+1],b=e[3*w+2];m(k,A,w),m(A,b,w),m(b,k,w)}for(var F=function(e,n){for(var t=2*e,r=n-e,i=1;i<r;i++){for(var a=g[t+2*i],u=g[t+2*i+1],o=i-1;o>=0&&g[t+2*o]>a;o--)g[t+2*o+2]=g[t+2*o],g[t+2*o+3]=g[t+2*o+1];g[t+2*o+2]=a,g[t+2*o+3]=u}},N=0;N<t;N++)F(i[N],i[N+1]),F(y+a[N],y+a[N+1]);for(var I=new Int32Array(3*r),U=function(n,t){return n===e[3*t]?0:n===e[3*t+1]?1:n===e[3*t+2]?2:-1},E=function(e,n){var t=U(e,n);I[3*n+t]=-1},S=function(e,n,t,r){var i=U(e,n);I[3*n+i]=r;var a=U(t,r);I[3*r+a]=n},L=0;L<t;L++){for(var V=i[L],x=i[L+1],Z=a[L],M=a[L+1];V<x&&Z<M;){var B=g[2*V],T=g[2*y+2*Z];B===T?(S(L,g[2*V+1],T,g[2*y+2*Z+1]),V++,Z++):B<T?(E(L,g[2*V+1]),V++):(E(T,g[2*y+2*Z+1]),Z++)}for(;V<x;)E(L,g[2*V+1]),V++;for(;Z<M;)E(g[2*y+2*Z],g[2*y+2*Z+1]),Z++}return I}var o=t(1413),s=t(25158),f=t(55158);function c(e,n){return n.push(e.buffer),{buffer:e.buffer,layout:l(e.layout)}}function l(e){var n=new Array;return e.fields.forEach((function(e,t){var r=(0,o.Z)((0,o.Z)({},e),{},{constructor:v(e.constructor)});n.push([t,r])})),{stride:e.stride,fields:n,fieldNames:e.fieldNames}}var d=[s.ly,s.Eu,s.ct,s.ek,s.gK,s.bj,s.oS,s.q6,s.fP,s.Cd,s.ey,s.O1,s.D_,s.xA,s.ne,s.mc,s.av,s.TS,s.mw,s.v6,s.Nu,s.qt,s.G5,s.hu,s.Hz,s.Vs,s.P_,s.ir,s.o7,s.or,s.n1,s.zO,s.Jj,s.wA,s.PP,s.TN];function v(e){return"".concat(e.ElementType,"_").concat(e.ElementCount)}var h=new Map;d.forEach((function(e){return h.set(v(e),e)}));var p=t(50256),g=(0,f.U$)().vec3f("position").u16("componentIndex").u16("u16padding"),y=(0,f.U$)().vec2u8("sideness"),m=((0,p.K)(y),(0,f.U$)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("u8padding",{glPadding:!0}).u16("u16padding",{glPadding:!0})),w=m.clone().vec3f("normal"),k=m.clone().vec3f("normalA").vec3f("normalB"),A=(new Map([["position0",0],["position1",1],["componentIndex",2],["variantOffset",3],["variantStroke",4],["variantExtension",5],["normal",6],["normalA",6],["normalB",7],["sideness",8]]),t(15671)),b=t(43144),F=t(84936),N=t(11186),I=t(71353),U=function(){function e(){(0,A.Z)(this,e)}return(0,b.Z)(e,[{key:"updateSettings",value:function(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?x:V}},{key:"write",value:function(e,n,t){var r=this.edgeHashFunction(t);C.seed=r;var i=C.getIntRange(0,255),a=C.getIntRange(0,this.settings.variants-1),u=C.getFloat(),o=255*(.5*function(e,n){var t=e<0?-1:1;return Math.pow(Math.abs(e),n)*t}(-(1-Math.min(u/.7,1))+Math.max(0,u-.7)/(1-.7),1.2)+.5);e.position0.setVec(n,t.position0),e.position1.setVec(n,t.position1),e.componentIndex.set(n,t.componentIndex),e.variantOffset.set(n,i),e.variantStroke.set(n,a),e.variantExtension.set(n,o)}},{key:"trim",value:function(e,n){return e.slice(0,n)}}]),e}(),E=new Float32Array(6),S=new Uint32Array(E.buffer),L=new Uint32Array(1);function V(e){var n=E;n[0]=e.position0[0],n[1]=e.position0[1],n[2]=e.position0[2],n[3]=e.position1[0],n[4]=e.position1[1],n[5]=e.position1[2],L[0]=5381;for(var t=0;t<S.length;t++)L[0]=31*L[0]+S[t];return L[0]}function x(e){var n=E;n[0]=Z(e.position0[0]),n[1]=Z(e.position0[1]),n[2]=Z(e.position0[2]),n[3]=Z(e.position1[0]),n[4]=Z(e.position1[1]),n[5]=Z(e.position1[2]),L[0]=5381;for(var t=0;t<S.length;t++)L[0]=31*L[0]+S[t];return L[0]}function Z(e){return Math.round(1e4*e)/1e4}var M=function(){function e(){(0,A.Z)(this,e),this.commonWriter=new U}return(0,b.Z)(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return w.createBuffer(e)}},{key:"write",value:function(e,n,t){this.commonWriter.write(e,n,t),(0,N.b)(T,t.faceNormal0,t.faceNormal1),(0,N.n)(T,T),e.normal.setVec(n,T)}},{key:"trim",value:function(e,n){return this.commonWriter.trim(e,n)}}]),e}();M.Layout=w,M.glLayout=(0,p.K)(w,1);var B=function(){function e(){(0,A.Z)(this,e),this.commonWriter=new U}return(0,b.Z)(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return k.createBuffer(e)}},{key:"write",value:function(e,n,t){this.commonWriter.write(e,n,t),e.normalA.setVec(n,t.faceNormal0),e.normalB.setVec(n,t.faceNormal1)}},{key:"trim",value:function(e,n){return this.commonWriter.trim(e,n)}}]),e}();B.Layout=k,B.glLayout=(0,p.K)(k,1);var T=(0,I.c)(),C=new F.Z,D=t(63780),P=t(16889),W=t(18722),O=-1;function z(e,n){return e.cosAngle<n}function _(e,n){return e.cosAngle>n}function q(e,n){var t=(0,P.ZF)(e.cosAngle),r=$.fwd,i=$.ortho;return(0,N.r)(r,e.position1,e.position0),t*((0,N.d)((0,N.c)(i,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>n}function K(e){for(var n=e.faces.length/3,t=e.faces,r=e.neighbors,i=0,a=0;a<n;a++){var u=r[3*a+0],o=r[3*a+1],s=r[3*a+2],f=t[3*a+0],c=t[3*a+1],l=t[3*a+2];i+=u===O||f<c?1:0,i+=o===O||c<l?1:0,i+=s===O||l<f?1:0}for(var d=new Int32Array(4*i),v=0,h=0;h<n;h++){var p=r[3*h+0],g=r[3*h+1],y=r[3*h+2],m=t[3*h+0],w=t[3*h+1],k=t[3*h+2];(p===O||m<w)&&(d[v++]=m,d[v++]=w,d[v++]=h,d[v++]=p),(g===O||w<k)&&(d[v++]=w,d[v++]=k,d[v++]=h,d[v++]=g),(y===O||k<m)&&(d[v++]=k,d[v++]=m,d[v++]=h,d[v++]=y)}return d}function H(e){for(var n=e.faces.length/3,t=e.vertices.position,r=e.faces,i=j.v0,a=j.v1,u=j.v2,o=new Float32Array(3*n),s=0;s<n;s++){var f=r[3*s+0],c=r[3*s+1],l=r[3*s+2];t.getVec(f,i),t.getVec(c,a),t.getVec(l,u),(0,N.f)(a,a,i),(0,N.f)(u,u,i),(0,N.c)(i,a,u),(0,N.n)(i,i),o[3*s+0]=i[0],o[3*s+1]=i[1],o[3*s+2]=i[2]}return o}var $={edge:{position0:(0,I.c)(),position1:(0,I.c)(),faceNormal0:(0,I.c)(),faceNormal1:(0,I.c)(),componentIndex:0,cosAngle:0},ortho:(0,I.c)(),fwd:(0,I.c)()},j={v0:(0,I.c)(),v1:(0,I.c)(),v2:(0,I.c)()},R={anglePlanar:4,angleSignificantEdge:35};function G(e){return J.apply(this,arguments)}function J(){return J=(0,r.Z)(i.mark((function e(n){var t,r,a;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X(n),r=Q(t),a=[t.data.buffer],e.abrupt("return",{result:Y(r,a),transferList:a});case 2:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function Q(e){var n=ee(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return ne.updateSettings(e.writerSettings),te.updateSettings(e.writerSettings),function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R,i=e.vertices.position,a=e.vertices.componentIndex,u=(0,P.Vl)(r.anglePlanar),o=(0,P.Vl)(r.angleSignificantEdge),s=Math.cos(o),f=Math.cos(u),c=$.edge,l=c.position0,d=c.position1,v=c.faceNormal0,h=c.faceNormal1,p=H(e),g=K(e),y=g.length/4,m=n.allocate(y),w=0,k=y,A=t.allocate(k),b=0,F=0,I=0,U=(0,D.w6)(0,y),E=new Float32Array(y);(0,W.Ed)(E,(function(e,n,t){i.getVec(g[4*n+0],l),i.getVec(g[4*n+1],d),t[n]=(0,N.i)(l,d)})),U.sort((function(e,n){return E[n]-E[e]}));for(var S=new Array,L=new Array,V=0;V<y;V++){var x=U[V],Z=E[x],M=g[4*x+0],B=g[4*x+1],T=g[4*x+2],C=g[4*x+3],j=C===O;if(i.getVec(M,l),i.getVec(B,d),j)(0,N.s)(v,p[3*T+0],p[3*T+1],p[3*T+2]),(0,N.g)(h,v),c.componentIndex=a.get(M),c.cosAngle=(0,N.d)(v,h);else{if((0,N.s)(v,p[3*T+0],p[3*T+1],p[3*T+2]),(0,N.s)(h,p[3*C+0],p[3*C+1],p[3*C+2]),c.componentIndex=a.get(M),c.cosAngle=(0,N.d)(v,h),_(c,f))continue;c.cosAngle<-.9999&&(0,N.g)(h,v)}F+=Z,I++,j||z(c,s)?(n.write(m,w++,c),S.push(Z)):q(c,u)&&(t.write(A,b++,c),L.push(Z))}var G=new Float32Array(S.reverse()),J=new Float32Array(L.reverse());return{regular:{instancesData:n.trim(m,w),lodInfo:{lengths:G}},silhouette:{instancesData:t.trim(A,b),lodInfo:{lengths:J}},averageEdgeLength:F/I}}(n,ne,te)}function X(e){return{data:g.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function Y(e,n){return n.push(e.regular.lodInfo.lengths.buffer),n.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:c(e.regular.instancesData,n),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:c(e.silhouette.instancesData,n),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function ee(e,n,t,r){if(n)return{faces:t,facesLength:r,neighbors:u(t,r,e.count),vertices:e};var i=(0,a.d)(e.buffer,e.stride/4,{originalIndices:t,originalIndicesLength:r}),o=u(i.indices,r,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:o,vertices:g.createView(i.buffer)}}var ne=new M,te=new B}}]);
//# sourceMappingURL=1438.69cead6d.chunk.js.map