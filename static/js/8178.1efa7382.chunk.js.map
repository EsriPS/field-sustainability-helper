{"version":3,"file":"static/js/8178.1efa7382.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Logger.js\";import{isSome as r,unwrap as s}from\"../../../core/maybe.js\";import{throwIfAborted as a,createTask as i,isAbortError as n}from\"../../../core/promiseUtils.js\";import{equals as o,WGS84 as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as p,convertToGeometry as h}from\"../featureConversionUtils.js\";import y from\"../data/FeatureStore.js\";import{project as l,checkProjectionSupport as c}from\"../data/projectionSupport.js\";import m from\"../data/QueryEngine.js\";import{validateGeoJSON as g,createOptimizedFeatures as _}from\"./geojson/geojson.js\";import{mixAttributes as f}from\"./support/sourceUtils.js\";import{getFeature as d}from\"../../ogc/wfsUtils.js\";import w from\"../../support/FieldsIndex.js\";class E{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,s=await d(this._getFeatureUrl,this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await g(s),a(e);const i=_(s,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!o(this._queryEngine.spatialReference,u))for(const a of i)r(a.geometry)&&(a.geometry=p(l(h(a.geometry,this._queryEngine.geometryType,!1,!1),u,this._queryEngine.spatialReference)));let n=1;for(const r of i){const e={};f(this._fieldsIndex,e,r.attributes,!0),r.attributes=e,null==r.attributes[t]&&(r.objectId=r.attributes[t]=n++)}return i}}destroy(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:i,spatialReference:n,fields:o,geometryType:u,featureType:p,objectIdField:h,customParameters:l}=e;this._featureType=p,this._customParameters=l,this._getFeatureUrl=r,this._getFeatureOutputFormat=i,this._fieldsIndex=new w(o),await this._checkProjection(n),a(t),this._queryEngine=new m({fields:o,geometryType:u,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:n,timeInfo:null,featureStore:new y({geometryType:u,hasM:!1,hasZ:!1})});const c=await this._snapshotFeatures(s(t.signal));return this._queryEngine.featureStore.addMany(c),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new e(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(r){var s;return this._customParameters=r,null==(s=this._snapshotTask)||s.abort(),this._snapshotTask=i(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(r=>{this._queryEngine.featureStore.clear(),n(r)||t.getLogger(\"esri.layers.WFSLayer\").error(new e(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:r}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(t){try{await c(u,t)}catch{throw new e(\"unsupported-projection\",\"Projection not supported\",{spatialReference:t})}}}export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isValid as e}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as t,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function u(e){return new l(e)}class a{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new a(e)}const f=new Set;function d(e,t,r,s=!1,o){f.clear();for(const l in r){const a=e.get(l);if(!a)continue;const c=r[l],d=m(a,c);if(d!==c&&o&&o.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(s||a.editable)){const e=n(a,d);if(e)return u(i(e,a,d));t[a.name]=d}}for(const n of e.requiredFields)if(!f.has(n.name))return u(`missing required field \"${n.name}\"`);return null}function m(e,n){let i=n;return\"string\"==typeof n&&r(e)?i=parseFloat(n):null!=n&&s(e)&&\"string\"!=typeof n&&(i=String(n)),t(i)}let p;function h(t,n){if(!t||!e(n))return t;if(\"rings\"in t||\"paths\"in t){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,t)}return t}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(t,n){!e(t)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n"],"names":["E","this","_queryEngine","_customParameters","_snapshotFeatures","e","t","objectIdField","d","_getFeatureUrl","_featureType","typeName","_getFeatureOutputFormat","customParameters","dateFields","fieldsIndex","map","name","signal","s","g","a","i","_","geometryType","hasZ","o","spatialReference","u","r","geometry","p","l","h","n","f","_fieldsIndex","attributes","objectId","destroy","getFeatureUrl","getFeatureOutputFormat","fields","featureType","w","_checkProjection","m","hasM","timeInfo","featureStore","y","c","addMany","extent","fullExtent","_waitSnapshotComplete","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","clear","error","finished","code","description","globalId","success","uniqueId","Set","get","push","message","details","field","originalValue","sanitizedValue","add","editable","requiredFields","has","parseFloat","String","TypeError","simplify"],"sourceRoot":""}