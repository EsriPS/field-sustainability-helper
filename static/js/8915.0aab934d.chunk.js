"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[8915],{75746:function(t,e,i){i.d(e,{E:function(){return n}});var r=new(i(8961).Z);function n(t){return r.hasBidiChar(t)?(e="rtl"===r.checkContextual(t)?"IDNNN":"ICNNN",[r.bidiTransform(t,e,"VLYSN"),!0]):[t,!1];var e}},46228:function(t,e,i){i.d(e,{I:function(){return n},v:function(){return s}});var r=i(16889);function n(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=(0,r.uZ)(t,0,o),s=0;s<4;s++)e[i+s]=Math.floor(256*l(n*a[s]))}function s(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0,r=0;r<4;r++)i+=t[e+r]*h[r];return i}var a=[1,256,65536,16777216],h=[1/256,1/65536,1/16777216,1/4294967296],o=s(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}},25290:function(t,e,i){i.d(e,{zY:function(){return x},v1:function(){return P},GP:function(){return l},wp:function(){return v},XV:function(){return m},zv:function(){return g},QK:function(){return y},ov:function(){return d},hh:function(){return p},qh:function(){return k}});var r=i(15671),n=i(43144),s=i(37762),a=i(84652),h=i(77981),o=i(84284);function l(t){var e=(0,a.d9)(t);return function(t){t&&((0,h.oU)(t)?_(t.rings):(0,h.l9)(t)?_(t.paths):(0,h.aW)(t)&&f(t.points))}(e),e}function u(t){if(t)for(var e=t.length-1;e>0;--e)t[e][0]-=t[e-1][0],t[e][1]-=t[e-1][1]}function c(t){if(t){var e,i=(0,s.Z)(t);try{for(i.s();!(e=i.n()).done;){u(e.value)}}catch(r){i.e(r)}finally{i.f()}}}function f(t){if(t)for(var e=t.length,i=1;i<e;++i)t[i][0]+=t[i-1][0],t[i][1]+=t[i-1][1]}function _(t){if(t){var e,i=(0,s.Z)(t);try{for(i.s();!(e=i.n()).done;){f(e.value)}}catch(r){i.e(r)}finally{i.f()}}}function v(t){t&&((0,h.oU)(t)?c(t.rings):(0,h.l9)(t)?c(t.paths):(0,h.aW)(t)&&u(t.points))}function d(t){if(t){var e,i=(0,s.Z)(t);try{for(i.s();!(e=i.n()).done;){p(e.value)}}catch(r){i.e(r)}finally{i.f()}}}function p(t){t&&t.reverse()}function m(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function y(t){return!(!t||0===t.length)&&t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function g(t){return t[4]}function k(t,e){t[4]=e}var P=function(){function t(e,i,n,s){(0,r.Z)(this,t),this.acceptPolygon=i,this.acceptPolyline=n,this.geomUnitsPerPoint=s,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1,e&&((0,h.oU)(e)?i&&(this.multiPath=e.rings,this.isClosed=!0):(0,h.l9)(e)?n&&(this.multiPath=e.paths,this.isClosed=!1):(0,h.YX)(e)&&i&&(this.multiPath=M(e).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length)),this.internalPlacement=new o.u}return(0,n.Z)(t,[{key:"next",value:function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var t=this.processPath(this.multiPath[this.pathIndex]);if(t)return t}return this.pathCount=-1,this.pathIndex=-1,this.multiPath=null,null}}]),t}(),x=function(){function t(e,i,n,s){(0,r.Z)(this,t),this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=n,this.geomUnitsPerPoint=s,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1}return(0,n.Z)(t,[{key:"next",value:function(){for(;;){if(!this.multiPath){for(var t=this.inputGeometries.next();t;){if((0,h.oU)(t)?this.acceptPolygon&&(this.multiPath=t.rings,this.isClosed=!0):(0,h.l9)(t)?this.acceptPolyline&&(this.multiPath=t.paths,this.isClosed=!1):(0,h.YX)(t)&&this.acceptPolygon&&(this.multiPath=M(t).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length,this.pathIndex=-1;break}t=this.inputGeometries.next()}if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var e=this.processPath(this.multiPath[this.pathIndex]);if(e)return e}this.pathCount=-1,this.pathIndex=-1,this.multiPath=null}}}]),t}();function M(t){return{rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}}},35747:function(t,e,i){i.d(e,{M:function(){return s}});var r=i(15671),n=i(43144),s=(i(84652),function(){function t(e){(0,r.Z)(this,t),this._geometry=e}return(0,n.Z)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t}}]),t}())},84307:function(t,e,i){i.d(e,{h:function(){return _t},W:function(){return vt}});var r=i(37762),n=i(15671),s=i(43144),a=i(84652),h=i(77981),o=i(25290),l=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new u(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var u=function(){function t(e,i,r){(0,n.Z)(this,t),this._inputGeometries=e,this._angleTolerance=void 0!==i.angleTolerance?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if((0,h.oU)(t)){this._isClosed=!0;var e=(0,a.d9)(t);return this._processMultipath(e.rings),e}if((0,h.l9)(t)){this._isClosed=!1;var i=(0,a.d9)(t);return this._processMultipath(i.paths),i}if((0,h.YX)(t)){if(this._maxCosAngle)return t;this._isClosed=!0;var r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];return this._processPath(r),{rings:[r]}}t=this._inputGeometries.next()}return null}},{key:"_processMultipath",value:function(t){if(t){var e,i=(0,r.Z)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this._processPath(n)}}catch(s){i.e(s)}finally{i.f()}}}},{key:"_processPath",value:function(t){if(t){var e,i,r,n,s,a,h=t.length,l=t[0];this._isClosed&&++h;for(var u=1;u<h;++u){var c,f=(c=this._isClosed&&u===h-1?t[0]:t[u])[0]-l[0],_=c[1]-l[1],v=Math.sqrt(f*f+_*_);u>1&&v>0&&r>0&&(e*f+i*_)/v/r<=this._maxCosAngle&&(0,o.qh)(l,1),1===u&&(n=f,s=_,a=v),v>0&&(l=c,e=f,i=_,r=v)}this._isClosed&&r>0&&a>0&&(e*n+i*s)/a/r<=this._maxCosAngle&&(0,o.qh)(t[0],1)}}}]),t}(),c=i(60136),f=i(29388),_=.03,v=function(){function t(){(0,n.Z)(this,t),this._path=[]}return(0,s.Z)(t,[{key:"path",value:function(){return this._path}},{key:"addPath",value:function(t,e){e||t.reverse(),Array.prototype.push.apply(this._path,t),e||t.reverse()}},{key:"startPath",value:function(t){this._path.push(t)}},{key:"lineTo",value:function(t){this._path.push(t)}},{key:"close",value:function(){var t=this._path;t.length>1&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]))}}],[{key:"mergePath",value:function(t,e){e&&Array.prototype.push.apply(t,e)}}]),t}(),d=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"normalize",value:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]/=e,t[1]/=e}},{key:"calculateLength",value:function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}},{key:"calculateSegLength",value:function(t,e){return this.calculateLength(t[e],t[e+1])}},{key:"calculatePathLength",value:function(t){for(var e=0,i=t?t.length:0,r=0;r<i-1;++r)e+=this.calculateSegLength(t,r);return e}},{key:"calculatePathArea",value:function(t){for(var e=0,i=t?t.length:0,r=0;r<i-1;++r)e+=(t[r+1][0]-t[r][0])*(t[r+1][1]+t[r][1]);return e/2}},{key:"getCoord2D",value:function(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}},{key:"getSegCoord2D",value:function(t,e,i){return this.getCoord2D(t[e],t[e+1],i)}},{key:"getAngle",value:function(t,e,i){var r=e[0]-t[0],n=e[1]-t[1];return Math.atan2(n,r)}},{key:"getSegAngle",value:function(t,e,i){return this.getAngle(t[e],t[e+1],i)}},{key:"getAngleCS",value:function(t,e,i){var r=e[0]-t[0],n=e[1]-t[1],s=Math.sqrt(r*r+n*n);return s>0?[r/s,n/s]:[1,0]}},{key:"getSegAngleCS",value:function(t,e,i){return this.getAngleCS(t[e],t[e+1],i)}},{key:"cut",value:function(t,e,i,r){return[i<=0?t[e]:this.getSegCoord2D(t,e,i),r>=1?t[e+1]:this.getSegCoord2D(t,e,r)]}},{key:"addSegment",value:function(t,e,i){i&&t.push(e[0]),t.push(e[1])}},{key:"getSubCurve",value:function(t,e,i){var r=[];return this.appendSubCurve(r,t,e,i)?r:null}},{key:"appendSubCurve",value:function(t,e,i,r){for(var n=e?e.length-1:0,s=0,a=!0,h=0;h<n;){var o=this.calculateSegLength(e,h);if(0!==o){if(a){if(s+o>i){var l=(i-s)/o,u=1,c=!1;s+o>=r&&(u=(r-s)/o,c=!0);var f=this.cut(e,h,l,u);if(f&&this.addSegment(t,f,a),c)break;a=!1}}else{if(s+o>r){var _=this.cut(e,h,0,(r-s)/o);_&&this.addSegment(t,_,a);break}this.addSegment(t,[e[h],e[h+1]],a)}s+=o,++h}else++h}return!0}},{key:"getCIMPointAlong",value:function(t,e){for(var i=t?t.length-1:0,r=0,n=-1;n<i;){++n;var s=this.calculateSegLength(t,n);if(0!==s){if(r+s>e){var a=(e-r)/s;return this.getCoord2D(t[n],t[n+1],a)}r+=s}}return null}},{key:"isEmpty",value:function(t,e){if(!t||t.length<=1)return!0;for(var i=t?t.length-1:0,r=-1;r<i;){if(t[++r+1][0]!==t[r][0]||t[r+1][1]!==t[r][1])return!1;if(e&&t[r+1][2]!==t[r][2])return!1}return!0}},{key:"offset",value:function(t,e,i,r,n){if(!t||t.length<2)return null;for(var s=0,a=t[s++],h=s;s<t.length;){var o=t[s];o[0]===a[0]&&o[1]===a[1]||(s!==h&&(t[h]=t[s]),a=t[h++]),s++}var l=t[0][0]===t[h-1][0]&&t[0][1]===t[h-1][1];if(l&&--h,h<(l?3:2))return null;var u=[];a=l?t[h-1]:null;for(var c=t[0],f=0;f<h;f++){var _=f===h-1?l?t[0]:null:t[f+1];if(a)if(_){var v=[_[0]-c[0],_[1]-c[1]];this.normalize(v);var d=[c[0]-a[0],c[1]-a[1]];this.normalize(d);var p=d[0]*v[1]-d[1]*v[0],m=d[0]*v[0]+d[1]*v[1];if(p>=0==e<=0){if(m<1){var y=[v[0]-d[0],v[1]-d[1]];this.normalize(y);var g=Math.sqrt((1+m)/2);if(g>1/r){var k=-Math.abs(e)/g;u.push([c[0]-y[0]*k,c[1]-y[1]*k])}}}else switch(i){case"Mitered":var P=Math.sqrt((1+m)/2);if(P>0&&1/P<r){var x=[v[0]-d[0],v[1]-d[1]];this.normalize(x);var M=Math.abs(e)/P;u.push([c[0]-x[0]*M,c[1]-x[1]*M]);break}case"Bevelled":u.push([c[0]+d[1]*e,c[1]-d[0]*e]),u.push([c[0]+v[1]*e,c[1]-v[0]*e]);break;case"Rounded":if(m<1){u.push([c[0]+d[1]*e,c[1]-d[0]*e]);var b=Math.floor(2.5*(1-m));if(b>0)for(var S=1/b,w=S,C=1;C<b;C++,w+=S){var I=[d[1]*(1-w)+v[1]*w,-d[0]*(1-w)-v[0]*w];this.normalize(I),u.push([c[0]+I[0]*e,c[1]+I[1]*e])}u.push([c[0]+v[1]*e,c[1]-v[0]*e])}break;default:if(p<0)u.push([c[0]+(d[1]+d[0])*e,c[1]+(d[1]-d[0])*e]),u.push([c[0]+(v[1]-v[0])*e,c[1]-(v[0]+v[1])*e]);else{var L=Math.sqrt((1+Math.abs(m))/2),T=[v[0]-d[0],v[1]-d[1]];this.normalize(T);var Z=e/L;u.push([c[0]-T[0]*Z,c[1]-T[1]*Z])}}}else{var A=[c[0]-a[0],c[1]-a[1]];this.normalize(A),u.push([c[0]+A[1]*e,c[1]-A[0]*e])}else{var z=[_[0]-c[0],_[1]-c[1]];this.normalize(z),u.push([c[0]+z[1]*e,c[1]-z[0]*e])}a=c,c=_}return u.length<(l?3:2)?null:(l&&u.push([u[0][0],u[0][1]]),u)}}]),t}(),p=1.7320508075688772,m=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new y(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();m.instance=null;var y=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a;return(0,n.Z)(this,i),(a=e.call(this,t,!1,!0))._curveHelper=new d,a._width=(void 0!==r.width?r.width:5)*s,a._arrowType=void 0!==r.geometricEffectArrowType?r.geometricEffectArrowType:"OpenEnded",a._offsetFlattenError=_*s,a}return(0,s.Z)(i,[{key:"processPath",value:function(t){switch(this._arrowType){case"OpenEnded":default:return this._constructSimpleArrow(t,!0);case"Block":return this._constructSimpleArrow(t,!1);case"Crossed":return this._constructCrossedArrow(t)}}},{key:"_constructSimpleArrow",value:function(t,e){var i=this._curveHelper.calculatePathLength(t),r=this._width;i<2*r&&(r=i/2);var n=this._curveHelper.getSubCurve(t,0,i-r);if(!n)return null;var s=r/2;if(this._curveHelper.isEmpty(n,!1))return null;var a=this._constructOffset(n,-s);if(!a)return null;var h=this._constructOffset(n,s);if(!h)return null;var o=this._constructArrowBasePoint(a,-s/2);if(!o)return null;var l=this._constructArrowBasePoint(h,s/2);if(!l)return null;var u=t[t.length-1];e||(this._makeControlPoint(h,!0),this._makeControlPoint(a,!0));var c=new v;return c.addPath(h,!0),c.lineTo(l),this._makeControlPoint(c.path()),c.lineTo(u),this._makeControlPoint(c.path()),c.lineTo(o),this._makeControlPoint(c.path()),c.addPath(a,!1),e?{paths:[c.path()]}:(c.close(),{rings:[c.path()]})}},{key:"_constructCrossedArrow",value:function(t){var e=this._curveHelper.calculatePathLength(t),i=this._width;e<i*(1+p+1)&&(i=e/(1+p+1));var r=this._curveHelper.getSubCurve(t,0,e-i*(1+p));if(!r)return null;var n=i/2;if(this._curveHelper.isEmpty(r,!1))return null;var s=this._constructOffset(r,n);if(!s)return null;var a=this._constructOffset(r,-n);if(!a)return null;var h=this._curveHelper.getSubCurve(t,0,e-i);if(!h)return null;if(this._curveHelper.isEmpty(h,!1))return null;var o=this._constructOffset(h,n);if(!o)return null;var l=this._constructOffset(h,-n);if(!l)return null;var u=o[o.length-1],c=this._constructArrowBasePoint(o,n/2);if(!c)return null;var f=l[l.length-1],_=this._constructArrowBasePoint(l,-n/2);if(!_)return null;var d=t[t.length-1];this._makeControlPoint(s,!1),this._makeControlPoint(a,!1);var m=new v;return m.addPath(s,!0),this._makeControlPoint(m.path()),m.lineTo(f),m.lineTo(_),this._makeControlPoint(m.path()),m.lineTo(d),this._makeControlPoint(m.path()),m.lineTo(c),this._makeControlPoint(m.path()),m.lineTo(u),this._makeControlPoint(m.path()),m.addPath(a,!1),{paths:[m.path()]}}},{key:"_constructOffset",value:function(t,e){return this._curveHelper.offset(t,e,"Rounded",4,this._offsetFlattenError)}},{key:"_constructArrowBasePoint",value:function(t,e){if(!t||t.length<2)return null;var i=t[t.length-2],r=t[t.length-1],n=[r[0]-i[0],r[1]-i[1]];return this._curveHelper.normalize(n),[r[0]+n[1]*e,r[1]-n[0]*e]}},{key:"_makeControlPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,o.qh)(e?t[0]:t[t.length-1],1)}}]),i}(o.zY),g=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new k(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();g.instance=null;var k=function(){function t(e,i,r){(0,n.Z)(this,t),this._inputGeometries=e,this._curveHelper=new d,this._size=(void 0!==i.size?i.size:1)*r,this._offsetFlattenError=_*r}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if((0,h.YX)(t))if(this._size>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._size,"Rounded",4,this._offsetFlattenError);if(i)return{rings:[i]}}else{if(!(this._size<0))return t;if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._size>0)return{xmin:t.xmin-this._size,xmax:t.xmax+this._size,ymin:t.ymin-this._size,ymax:t.ymax+this._size}}if((0,h.oU)(t)){if(0===this._size)return t;var n,s=[],a=(0,r.Z)(t.rings);try{for(a.s();!(n=a.n()).done;){var o=n.value,l=this._curveHelper.offset(o,this._size,"Rounded",4,this._offsetFlattenError);l&&s.push(l)}}catch(m){a.e(m)}finally{a.f()}if(s.length)return{rings:s}}if((0,h.l9)(t)&&this._size>0){var u,c=[],f=(0,r.Z)(t.paths);try{for(f.s();!(u=f.n()).done;){var _=u.value;if(_&&_.length>1){var v=this._curveHelper.offset(_,this._size,"Rounded",4,this._offsetFlattenError),d=this._curveHelper.offset(_,-this._size,"Rounded",4,this._offsetFlattenError);if(v&&d){for(var p=d.length-1;p>=0;p--)v.push(d[p]);v.push([v[0][0],v[0][1]]),c.push(v)}}}}catch(m){f.e(m)}finally{f.f()}if(c.length)return{rings:c}}(0,h.wp)(t)&&this._size,t=this._inputGeometries.next()}return null}}]),t}(),P=i(29439),x=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new M(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();x.instance=null;var M=function(){function t(e,i,r){var s;(0,n.Z)(this,t),this._default_point_size=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=null!=(s=i.rule)?s:"FullGeometry",this._default_size=this._default_point_size*r}return(0,s.Z)(t,[{key:"next",value:function(){for(var t;t=this._inputGeometries.next();){var e=void 0;if((0,h.wp)(t)?e=this._processGeom([[[t.x,t.y]]]):(0,h.aW)(t)?e=this._processGeom([t.points]):(0,h.l9)(t)?e=this._processGeom(t.paths):(0,h.oU)(t)&&(e=this._processGeom(t.rings)),e&&e.length)return{paths:e}}return null}},{key:"_clone",value:function(t){return[t[0],t[1]]}},{key:"_mid",value:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}},{key:"_mix",value:function(t,e,i,r){return[t[0]*e+i[0]*r,t[1]*e+i[1]*r]}},{key:"_add",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"_add2",value:function(t,e,i){return[t[0]+e,t[1]+i]}},{key:"_sub",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"_dist",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"_norm",value:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}},{key:"_normalize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e/this._norm(t);t[0]*=i,t[1]*=i}},{key:"_leftPerpendicular",value:function(t){var e=t[1],i=-t[0];t[0]=e,t[1]=i}},{key:"_leftPerp",value:function(t){return[t[1],-t[0]]}},{key:"_rightPerpendicular",value:function(t){var e=-t[1],i=t[0];t[0]=e,t[1]=i}},{key:"_rightPerp",value:function(t){return[-t[1],t[0]]}},{key:"_dotProduct",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"_crossProduct",value:function(t,e){return-(t[0]*e[1]-t[1]*e[0])}},{key:"_rotateDirect",value:function(t,e,i){i=-i;var r=t[0]*e-t[1]*i,n=t[0]*i+t[1]*e;t[0]=r,t[1]=n}},{key:"_makeCtrlPt",value:function(t){var e=[t[0],t[1]];return(0,o.qh)(e,1),e}},{key:"_addAngledTicks",value:function(t,e,i,r){var n=this._sub(i,e);this._normalize(n);var s,a=this._crossProduct(n,this._sub(r,e));s=a>0?this._rightPerp(n):this._leftPerp(n);var h=Math.abs(a)/2,o=[];o.push([e[0]+(s[0]-n[0])*h,e[1]+(s[1]-n[1])*h]),o.push(e),o.push(i),o.push([i[0]+(s[0]+n[0])*h,i[1]+(s[1]+n[1])*h]),t.push(o)}},{key:"_addBezier2",value:function(t,e,i,r,n){if(0!=n--){var s=this._mid(e,i),a=this._mid(i,r),h=this._mid(s,a);this._addBezier2(t,e,s,h,n),this._addBezier2(t,h,a,r,n)}else t.push(r)}},{key:"_addBezier3",value:function(t,e,i,r,n,s){if(0!=s--){var a=this._mid(e,i),h=this._mid(i,r),o=this._mid(r,n),l=this._mid(a,h),u=this._mid(h,o),c=this._mid(l,u);this._addBezier3(t,e,a,l,c,s),this._addBezier3(t,c,u,o,n,s)}else t.push(n)}},{key:"_add90DegArc",value:function(t,e,i,r,n){var s=null!=n?n:this._crossProduct(this._sub(i,e),this._sub(r,e))>0,a=this._mid(e,i),h=this._sub(a,e);s?this._leftPerpendicular(h):this._rightPerpendicular(h),a[0]+=h[0],a[1]+=h[1],this._addBezier3(t,e,this._mix(e,.33333,a,.66667),this._mix(i,.33333,a,.66667),i,4)}},{key:"_addArrow",value:function(t,e,i){var r=e[0],n=e[1],s=e[e.length-1],a=this._sub(r,n);this._normalize(a);var h=this._crossProduct(a,this._sub(s,n)),o=.5*h,l=this._leftPerp(a),u=[s[0]-l[0]*h,s[1]-l[1]*h],c=e.length-1,f=[];f.push(i?[-l[0],-l[1]]:l);for(var _=[-a[0],-a[1]],v=1;v<c-1;v++){var d=this._sub(e[v+1],e[v]);this._normalize(d);var p=this._dotProduct(d,_),m=this._crossProduct(d,_),y=Math.sqrt((1+p)/2),g=this._sub(d,_);this._normalize(g),g[0]/=y,g[1]/=y,f.push(m<0?[-g[0],-g[1]]:g),_=d}f.push(this._rightPerp(_));for(var k=f.length-1;k>0;k--)t.push([e[k][0]+f[k][0]*o,e[k][1]+f[k][1]*o]);t.push([u[0]+f[0][0]*o,u[1]+f[0][1]*o]),t.push([u[0]+f[0][0]*h,u[1]+f[0][1]*h]),t.push(r),t.push([u[0]-f[0][0]*h,u[1]-f[0][1]*h]),t.push([u[0]-f[0][0]*o,u[1]-f[0][1]*o]);for(var P=1;P<f.length;P++)t.push([e[P][0]-f[P][0]*o,e[P][1]-f[P][1]*o])}},{key:"_cp2",value:function(t,e,i){return t.length>=2?t[1]:this._add2(t[0],e*this._default_size,-i*this._default_size)}},{key:"_cp3",value:function(t,e,i,r){if(t.length>=3)return t[2];var n=this._mix(t[0],1-i,e,i),s=this._sub(e,t[0]);return this._normalize(s),this._rightPerpendicular(s),[n[0]+s[0]*r*this._default_size,n[1]+s[1]*r*this._default_size]}},{key:"_arrowPath",value:function(t){if(t.length>2)return t;var e=t[0],i=this._cp2(t,-4,0),r=this._sub(e,i);this._normalize(r);var n=this._rightPerp(r);return[e,i,[e[0]+(n[0]-r[0])*this._default_size,e[1]+(n[1]-r[1])*this._default_size]]}},{key:"_arrowLastSeg",value:function(t){var e,i=t[0],r=this._cp2(t,-4,0);if(t.length>=3)e=t[t.length-1];else{var n=this._sub(i,r);this._normalize(n);var s=this._rightPerp(n);e=[i[0]+(s[0]-n[0])*this._default_size,i[1]+(s[1]-n[1])*this._default_size]}return[r,e]}},{key:"_processGeom",value:function(t){if(!t)return null;var e,i=[],n=(0,r.Z)(t);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(s&&0!==s.length){var a=s.length,h=s[0];switch(this._rule){case"PerpendicularFromFirstSegment":var l=this._cp2(s,0,-1),u=this._cp3(s,l,.5,4),c=[];c.push(u),c.push(this._mid(h,l)),i.push(c);break;case"ReversedFirstSegment":var f=this._cp2(s,0,-1);i.push([f,h]);break;case"PerpendicularToSecondSegment":var _=this._cp2(s,-4,1),v=this._cp3(s,_,.882353,-1.94),d=[];d.push(this._mid(_,v)),d.push(h),i.push(d);break;case"SecondSegmentWithTicks":var p=this._cp2(s,-4,1),m=this._cp3(s,p,.882353,-1.94),y=this._sub(m,p),g=void 0;g=this._crossProduct(y,this._sub(h,p))>0?this._rightPerp(g):this._leftPerp(y);var k=[];k.push([p[0]+(g[0]-y[0])/3,p[1]+(g[1]-y[1])/3]),k.push(p),k.push(m),k.push([m[0]+(g[0]+y[0])/3,m[1]+(g[1]+y[1])/3]),i.push(k);break;case"DoublePerpendicular":var x=this._cp2(s,0,-1),M=this._cp3(s,x,.5,3),b=this._mid(h,x),S=this._sub(b,M);this._normalize(S);var w=this._crossProduct(S,this._sub(h,M));this._leftPerpendicular(S);var C=[];C.push(h),C.push([M[0]+S[0]*w,M[1]+S[1]*w]),i.push(C);var I=[];I.push([M[0]-S[0]*w,M[1]-S[1]*w]),I.push(x),i.push(I);break;case"OppositeToFirstSegment":var L=this._cp2(s,0,-1),T=this._cp3(s,L,.5,3),Z=this._mid(h,L),A=this._sub(Z,T);this._normalize(A);var z=this._crossProduct(A,this._sub(h,T));this._leftPerpendicular(A);var F=[];F.push([T[0]+A[0]*z,T[1]+A[1]*z]),F.push([T[0]-A[0]*z,T[1]-A[1]*z]),i.push(F);break;case"TriplePerpendicular":var R=this._cp2(s,0,-1),E=this._cp3(s,R,.5,4),G=this._mid(h,R),H=this._sub(G,E);this._normalize(H);var X=this._crossProduct(H,this._sub(h,E));this._leftPerpendicular(H);var Y=[];Y.push([E[0]+H[0]*X*.8,E[1]+H[1]*X*.8]),Y.push([G[0]+.8*(h[0]-G[0]),G[1]+.8*(h[1]-G[1])]),i.push(Y),i.push([E,G]);var D=[];D.push([E[0]-H[0]*X*.8,E[1]-H[1]*X*.8]),D.push([G[0]+.8*(R[0]-G[0]),G[1]+.8*(R[1]-G[1])]),i.push(D);break;case"HalfCircleFirstSegment":var O=this._cp2(s,0,-1),B=this._cp3(s,O,.5,4),N=this._mid(h,O),W=this._sub(O,h),V=Math.cos(Math.PI/18),U=Math.sin(Math.PI/18),q=Math.sqrt((1+V)/2),J=Math.sqrt((1-V)/2),j=[],$=void 0;this._crossProduct(W,this._sub(B,h))>0?(j.push(h),W=this._sub(h,N),$=O):(j.push(O),W=this._sub(O,N),$=h),this._rotateDirect(W,q,J),W[0]/=q,W[1]/=q;for(var Q=1;Q<=18;Q++)j.push(this._add(N,W)),this._rotateDirect(W,V,U);j.push($),i.push(j);break;case"HalfCircleSecondSegment":var K=this._cp2(s,0,-1),tt=this._cp3(s,K,1,-1),et=this._sub(h,K);this._normalize(et);var it=this._crossProduct(et,this._sub(tt,K))/2;this._leftPerpendicular(et);var rt=[K[0]+et[0]*it,K[1]+et[1]*it];et=this._sub(K,rt);var nt=Math.cos(Math.PI/18),st=Math.sin(Math.PI/18);it>0&&(st=-st);for(var at=[K],ht=1;ht<=18;ht++)this._rotateDirect(et,nt,st),at.push(this._add(rt,et));i.push(at);break;case"HalfCircleExtended":var ot=this._cp2(s,0,-2),lt=this._cp3(s,ot,1,-1),ut=void 0;if(a>=4)ut=s[3];else{var ct=this._sub(h,ot);ut=this._add(lt,ct)}var ft=this._dist(ot,lt)/2/.75,_t=this._sub(ot,h);this._normalize(_t,ft);var vt=this._sub(lt,ut);this._normalize(vt,ft);var dt=[ut,lt];i.push(dt);var pt=[this._clone(lt)];this._addBezier3(pt,lt,this._add(lt,vt),this._add(ot,_t),ot,4),pt.push(h),i.push(pt);break;case"OpenCircle":for(var mt=this._cp2(s,-2,0),yt=this._sub(mt,h),gt=Math.cos(Math.PI/18),kt=-Math.sin(Math.PI/18),Pt=[mt],xt=1;xt<=33;xt++)this._rotateDirect(yt,gt,kt),Pt.push(this._add(h,yt));i.push(Pt);break;case"CoverageEdgesWithTicks":var Mt=this._cp2(s,0,-1),bt=void 0,St=void 0;if(a>=3)bt=s[2];else{var wt=this._sub(Mt,h),Ct=this._leftPerp(wt);bt=[h[0]+Ct[0]-.25*wt[0],h[1]+Ct[1]-.25*wt[1]]}if(a>=4)St=s[3];else{var It=this._mid(h,Mt),Lt=this._sub(h,Mt);this._normalize(Lt),this._leftPerpendicular(Lt);var Tt=this._crossProduct(Lt,this._sub(bt,It));this._rightPerpendicular(Lt),St=[bt[0]+Lt[0]*Tt*2,bt[1]+Lt[1]*Tt*2]}var Zt=this._sub(Mt,h),At=void 0,zt=void 0;At=this._crossProduct(Zt,this._sub(bt,h))>0?this._rightPerp(Zt):this._leftPerp(Zt),(zt=[]).push(bt),zt.push(h),zt.push([h[0]+(At[0]-Zt[0])/3,h[1]+(At[1]-Zt[1])/3]),i.push(zt),At=this._crossProduct(Zt,this._sub(St,Mt))>0?this._rightPerp(At):this._leftPerp(Zt),(zt=[]).push([Mt[0]+(At[0]+Zt[0])/3,Mt[1]+(At[1]+Zt[1])/3]),zt.push(Mt),zt.push(St),i.push(zt);break;case"GapExtentWithDoubleTicks":var Ft=this._cp2(s,0,2),Rt=this._cp3(s,Ft,0,1),Et=void 0;if(a>=4)Et=s[3];else{var Gt=this._sub(Ft,h);Et=this._add(Rt,Gt)}this._addAngledTicks(i,h,Ft,this._mid(Rt,Et)),this._addAngledTicks(i,Rt,Et,this._mid(h,Ft));break;case"GapExtentMidline":var Ht=this._cp2(s,2,0),Xt=this._cp3(s,Ht,0,1),Yt=void 0;if(a>=4)Yt=s[3];else{var Dt=this._sub(Ht,h);Yt=this._add(Xt,Dt)}var Ot=[];Ot.push(this._mid(h,Xt)),Ot.push(this._mid(Ht,Yt)),i.push(Ot);break;case"Chevron":var Bt=this._cp2(s,-1,-1),Nt=void 0;if(a>=3)Nt=s[2];else{var Wt=this._sub(Bt,h);this._leftPerpendicular(Wt),Nt=this._add(h,Wt)}i.push([Bt,this._makeCtrlPt(h),Nt]);break;case"PerpendicularWithArc":var Vt=this._cp2(s,0,-2),Ut=this._cp3(s,Vt,.5,-1),qt=this._sub(Vt,h),Jt=this._norm(qt);qt[0]/=Jt,qt[1]/=Jt;var jt=this._crossProduct(qt,this._sub(Ut,h)),$t=this._dotProduct(qt,this._sub(Ut,h));$t<.05*Jt?$t=.05*Jt:$t>.95*Jt&&($t=.95*Jt);var Qt=[h[0]+qt[0]*$t,h[1]+qt[1]*$t];this._leftPerpendicular(qt);var Kt=[];Kt.push([Qt[0]-qt[0]*jt,Qt[1]-qt[1]*jt]),Kt.push([Qt[0]+qt[0]*jt,Qt[1]+qt[1]*jt]),i.push(Kt);var te=[Vt[0]+qt[0]*jt,Vt[1]+qt[1]*jt];qt=this._sub(Vt,te);var ee=Math.cos(Math.PI/18),ie=Math.sin(Math.PI/18);jt<0&&(ie=-ie),Kt=[h,Vt];for(var re=1;re<=9;re++)this._rotateDirect(qt,ee,ie),Kt.push(this._add(te,qt));i.push(Kt);break;case"ClosedHalfCircle":for(var ne=this._cp2(s,2,0),se=this._mid(h,ne),ae=this._sub(ne,se),he=Math.cos(Math.PI/18),oe=Math.sin(Math.PI/18),le=[h,ne],ue=1;ue<=18;ue++)this._rotateDirect(ae,he,oe),le.push(this._add(se,ae));i.push(le);break;case"TripleParallelExtended":var ce=this._cp2(s,0,-2),fe=this._cp3(s,ce,1,-2),_e=this._mid(h,ce),ve=this._sub(fe,ce);this._normalize(ve);var de=Math.abs(this._crossProduct(ve,this._sub(_e,ce)))/2,pe=this._dist(ce,fe),me=[ce,h];me.push([h[0]+ve[0]*pe*.5,h[1]+ve[1]*pe*.5]),i.push(me);var ye=[];ye.push([_e[0]-ve[0]*de,_e[1]-ve[1]*de]),ye.push([_e[0]+ve[0]*pe*.375,_e[1]+ve[1]*pe*.375]),(0,o.qh)(ye[ye.length-1],1),ye.push([_e[0]+ve[0]*pe*.75,_e[1]+ve[1]*pe*.75]),i.push(ye);var ge=[ce,fe];i.push(ge);break;case"ParallelWithTicks":var ke=this._cp2(s,3,0),Pe=this._cp3(s,ke,.5,-1),xe=this._sub(Pe,ke);this._normalize(xe);var Me=this._crossProduct(xe,this._sub(Pe,h));this._leftPerpendicular(xe),this._addAngledTicks(i,h,ke,Pe),this._addAngledTicks(i,this._mix(h,1,xe,Me),this._mix(ke,1,xe,Me),this._mid(h,ke));break;case"Parallel":var be=this._cp2(s,3,0),Se=this._cp3(s,be,.5,-1),we=this._sub(be,h);this._normalize(we);var Ce=this._leftPerp(we),Ie=this._crossProduct(we,this._sub(Se,h)),Le=[h,be];i.push(Le),(Le=[]).push([h[0]+Ce[0]*Ie,h[1]+Ce[1]*Ie]),Le.push([be[0]+Ce[0]*Ie,be[1]+Ce[1]*Ie]),i.push(Le);break;case"PerpendicularToFirstSegment":var Te=this._cp2(s,3,0),Ze=this._cp3(s,Te,.5,-1),Ae=this._mid(h,Te),ze=this._sub(Te,h);this._normalize(ze);var Fe=this._crossProduct(ze,this._sub(Ze,h));this._leftPerpendicular(ze);var Re=[];Re.push([Ae[0]-ze[0]*Fe*.25,Ae[1]-ze[1]*Fe*.25]),Re.push([Ae[0]+ze[0]*Fe*1.25,Ae[1]+ze[1]*Fe*1.25]),i.push(Re);break;case"ParallelOffset":var Ee=this._cp2(s,3,0),Ge=this._cp3(s,Ee,.5,-1),He=this._sub(Ee,h);this._normalize(He);var Xe=this._crossProduct(He,this._sub(Ge,h));this._leftPerpendicular(He);var Ye=[];Ye.push([h[0]-He[0]*Xe,h[1]-He[1]*Xe]),Ye.push([Ee[0]-He[0]*Xe,Ee[1]-He[1]*Xe]),i.push(Ye);var De=[];De.push([h[0]+He[0]*Xe,h[1]+He[1]*Xe]),De.push([Ee[0]+He[0]*Xe,Ee[1]+He[1]*Xe]),i.push(De);break;case"OffsetOpposite":var Oe=this._cp2(s,3,0),Be=this._cp3(s,Oe,.5,-1),Ne=this._sub(Oe,h);this._normalize(Ne);var We=this._crossProduct(Ne,this._sub(Be,h));this._leftPerpendicular(Ne);var Ve=[];Ve.push([h[0]-Ne[0]*We,h[1]-Ne[1]*We]),Ve.push([Oe[0]-Ne[0]*We,Oe[1]-Ne[1]*We]),i.push(Ve);break;case"OffsetSame":var Ue=this._cp2(s,3,0),qe=this._cp3(s,Ue,.5,-1),Je=this._sub(Ue,h);this._normalize(Je);var je=this._crossProduct(Je,this._sub(qe,h));this._leftPerpendicular(Je);var $e=[];$e.push([h[0]+Je[0]*je,h[1]+Je[1]*je]),$e.push([Ue[0]+Je[0]*je,Ue[1]+Je[1]*je]),i.push($e);break;case"CircleWithArc":var Qe=this._cp2(s,3,0),Ke=this._cp3(s,Qe,.5,-1),ti=void 0,ei=void 0;if(a>=4)ti=s[3],ei=this._crossProduct(this._sub(ti,Qe),this._sub(Ke,Qe))>0;else{ti=Qe,ei=this._crossProduct(this._sub(ti,h),this._sub(Ke,h))>0;var ii=24*this._geomUnitsPerPoint,ri=this._sub(ti,h);this._normalize(ri,ii);var ni=Math.sqrt(2)/2;this._rotateDirect(ri,ni,ei?ni:-ni),Qe=this._add(h,ri)}for(var si=this._sub(Qe,h),ai=Math.cos(Math.PI/18),hi=Math.sin(Math.PI/18),oi=[Qe],li=1;li<=36;li++)this._rotateDirect(si,ai,hi),oi.push(this._add(h,si));this._add90DegArc(oi,Qe,ti,Ke,ei),(0,o.qh)(oi[oi.length-8],1),i.push(oi);break;case"DoubleJog":var ui=void 0,ci=void 0,fi=this._cp2(s,-3,1);if(ui=a>=3?s[2]:this._add(h,this._sub(h,fi)),a>=4)ci=s[3];else{var _i=h;h=fi,ci=ui;var vi=this._dist(h,_i),di=this._dist(ci,_i),pi=30*this._geomUnitsPerPoint;.5*vi<pi&&(pi=.5*vi),.5*di<pi&&(pi=.5*di),fi=this._mix(h,pi/vi,_i,(vi-pi)/vi),ui=this._mix(ci,pi/di,_i,(di-pi)/di)}var mi=this._mid(h,fi),yi=this._mid(ci,ui),gi=this._dist(h,fi),ki=this._dist(ui,ci),Pi=Math.min(gi,ki)/8;Pi=Math.min(Pi,24*this._geomUnitsPerPoint);var xi=Math.cos(Math.PI/4),Mi=this._sub(h,fi);this._normalize(Mi,Pi),this._crossProduct(Mi,this._sub(ci,fi))>0?this._rotateDirect(Mi,xi,-xi):this._rotateDirect(Mi,xi,xi);var bi=[];bi.push(fi),bi.push(this._add(mi,Mi)),bi.push(this._sub(mi,Mi)),bi.push(h),i.push(bi),Mi=this._sub(ci,ui),this._normalize(Mi,Pi),this._crossProduct(Mi,this._sub(h,ui))<0?this._rotateDirect(Mi,xi,xi):this._rotateDirect(Mi,xi,-xi),(bi=[]).push(ui),bi.push(this._add(yi,Mi)),bi.push(this._sub(yi,Mi)),bi.push(ci),i.push(bi);break;case"PerpendicularOffset":var Si=this._cp2(s,-4,1),wi=this._cp3(s,Si,.882353,-1.94),Ci=this._sub(wi,Si);this._crossProduct(Ci,this._sub(h,Si))>0?this._rightPerpendicular(Ci):this._leftPerpendicular(Ci);var Ii=[Ci[0]/8,Ci[1]/8],Li=this._sub(this._mid(Si,wi),Ii);i.push([Li,h]);break;case"LineExcludingLastSegment":for(var Ti=this._arrowPath(s),Zi=[],Ai=Ti.length-2;Ai--;)Zi.push(Ti[Ai]);i.push(Zi);break;case"MultivertexArrow":var zi=this._arrowPath(s),Fi=[];this._addArrow(Fi,zi,!1),i.push(Fi);break;case"CrossedArrow":var Ri=this._arrowPath(s),Ei=[];this._addArrow(Ei,Ri,!0),i.push(Ei);break;case"ChevronArrow":var Gi=this._arrowLastSeg(s),Hi=(0,P.Z)(Gi,2),Xi=Hi[0],Yi=Hi[1],Di=10*this._geomUnitsPerPoint,Oi=this._sub(h,Xi);this._normalize(Oi);var Bi=this._crossProduct(Oi,this._sub(Yi,Xi)),Ni=this._leftPerp(Oi),Wi=[Yi[0]-Ni[0]*Bi*2,Yi[1]-Ni[1]*Bi*2],Vi=[];Vi.push([Yi[0]+Oi[0]*Di,Yi[1]+Oi[1]*Di]),Vi.push(h),Vi.push([Wi[0]+Oi[0]*Di,Wi[1]+Oi[1]*Di]),i.push(Vi);break;case"ChevronArrowOffset":var Ui=this._arrowLastSeg(s),qi=(0,P.Z)(Ui,2),Ji=qi[0],ji=qi[1],$i=this._sub(h,Ji);this._normalize($i);var Qi=this._crossProduct($i,this._sub(ji,Ji));this._leftPerpendicular($i);var Ki=[ji[0]-$i[0]*Qi,ji[1]-$i[1]*Qi],tr=[];tr.push([Ki[0]+$i[0]*Qi*.5,Ki[1]+$i[1]*Qi*.5]),tr.push(this._mid(Ki,h)),tr.push([Ki[0]-$i[0]*Qi*.5,Ki[1]-$i[1]*Qi*.5]),i.push(tr);break;case"PartialFirstSegment":var er=this._arrowLastSeg(s),ir=(0,P.Z)(er,2),rr=ir[0],nr=ir[1],sr=this._sub(h,rr);this._normalize(sr);var ar=this._crossProduct(sr,this._sub(nr,rr));this._leftPerpendicular(sr);var hr=[nr[0]-sr[0]*ar,nr[1]-sr[1]*ar];i.push([rr,hr]);break;case"Arch":var or=this._cp2(s,0,-1),lr=this._cp3(s,or,.5,1),ur=this._sub(h,or),cr=this._mix(lr,1,ur,.55),fr=this._mix(lr,1,ur,-.55),_r=[h];this._addBezier2(_r,h,cr,lr,4),this._addBezier2(_r,lr,fr,or,4),i.push(_r);break;case"CurvedParallelTicks":var vr=this._cp2(s,-4,1),dr=this._cp3(s,vr,.882353,-1.94),pr=this._sub(dr,vr);this._crossProduct(pr,this._sub(h,vr))>0?this._rightPerpendicular(pr):this._leftPerpendicular(pr);var mr=[pr[0]/8,pr[1]/8],yr=this._sub(this._mid(vr,dr),mr),gr=this._sub(this._mix(vr,.75,dr,.25),mr),kr=this._sub(this._mix(vr,.25,dr,.75),mr),Pr=[vr];this._addBezier2(Pr,vr,gr,yr,3),this._addBezier2(Pr,yr,kr,dr,3),i.push(Pr);for(var xr=0;xr<8;xr++){var Mr=Pr[2*xr+1],br=[this._clone(Mr)];br.push(this._add(Mr,[pr[0]/4,pr[1]/4])),i.push(br)}break;case"Arc90Degrees":var Sr=this._cp2(s,0,-1),wr=this._cp3(s,Sr,.5,1),Cr=[Sr];this._add90DegArc(Cr,Sr,h,wr),i.push(Cr);break;default:i.push(s)}}}}catch(Ir){n.e(Ir)}finally{n.f()}return i}}]),t}(),b=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new S(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();b.instance=null;var S=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a;return(0,n.Z)(this,i),(a=e.call(this,t,!0,!0))._curveHelper=new d,a._beginCut=(void 0!==r.beginCut?r.beginCut:1)*s,a._endCut=(void 0!==r.endCut?r.endCut:1)*s,a._middleCut=(void 0!==r.middleCut?r.middleCut:0)*s,a._invert=void 0!==r.invert&&r.invert,a._beginCut<0&&(a._beginCut=0),a._endCut<0&&(a._endCut=0),a._middleCut<0&&(a._middleCut=0),a}return(0,s.Z)(i,[{key:"processPath",value:function(t){var e=this._beginCut,i=this._endCut,r=this._middleCut,n=this._curveHelper.calculatePathLength(t),s=[];if(this._invert)if(0===e&&0===i&&0===r);else if(e+i+r>=n)s.push(t);else{var a=this._curveHelper.getSubCurve(t,0,e);a&&s.push(a),(a=this._curveHelper.getSubCurve(t,.5*(n-r),.5*(n+r)))&&s.push(a),(a=this._curveHelper.getSubCurve(t,n-i,i))&&s.push(a)}else if(0===e&&0===i&&0===r)s.push(t);else if(e+i+r>=n);else if(0===r){var h=this._curveHelper.getSubCurve(t,e,n-i);h&&s.push(h)}else{var o=this._curveHelper.getSubCurve(t,e,.5*(n-r));o&&s.push(o),(o=this._curveHelper.getSubCurve(t,.5*(n+r),n-i))&&s.push(o)}return 0===s.length?null:{paths:s}}}]),i}(o.zY),w=1e-7,C=function(){function t(){(0,n.Z)(this,t),this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}return(0,s.Z)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"size",value:function(){return this._values.length}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._setEmpty(),!t||0===t.length)return!1;for(var r=0;r<t.length;r++){var n=Math.abs(t[r]);i&&n<w&&(n=w),this._values.push(n),this._length+=n}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}},{key:"scale",value:function(t){for(var e=this._values?this._values.length:0,i=0;i<e;++i)this._values[i]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}},{key:"addValue",value:function(t){this._length+=t,this._values.push(t)}},{key:"firstValue",value:function(){return this._values[0]}},{key:"lastValue",value:function(){return this._values[this._values.length-1]}},{key:"nextValue",value:function(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}},{key:"reset",value:function(){this._currentValue=-1}},{key:"length",value:function(){return this._length}},{key:"_setEmpty",value:function(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}]),t}(),I=function(){function t(){(0,n.Z)(this,t),this.reset()}return(0,s.Z)(t,[{key:"reset",value:function(){this.segment=-1,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}},{key:"isValid",value:function(){return-1!==this.segment}},{key:"copyTo",value:function(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}]),t}(),L=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,n.Z)(this,i),(t=e.call(this,r,s))._tolerance=_,t._currentPosition=new I,t}return(0,s.Z)(i,[{key:"updateTolerance",value:function(t){this._tolerance=_*t}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._path=t,this._seg=-1,this.setPosAtNextPart()}},{key:"curPositionIsValid",value:function(){return this._currentPosition.isValid()}},{key:"nextPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new I;return!!this._nextPosition(t,i,null,e)&&(i.copyTo(this._currentPosition),!0)}},{key:"curPointAndAngle",value:function(t){t.pt=this._getPoint(this._currentPosition);var e=this._getAngle(this._currentPosition),i=(0,P.Z)(e,2),r=i[0],n=i[1];t.ca=r,t.sa=n}},{key:"nextPointAndAngle",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new I;if(!this._nextPosition(t,r,null,i))return!1;r.copyTo(this._currentPosition),e.pt=this._getPoint(r);var n=this._getAngle(r),s=(0,P.Z)(n,2),a=s[0],h=s[1];return e.ca=a,e.sa=h,!0}},{key:"nextCurve",value:function(t){if(0===t)return null;var e=[],i=new I;return this._nextPosition(t,i,e,1)?(i.copyTo(this._currentPosition),e):null}},{key:"isPathEnd",value:function(){return this._currentPosition.isPathEnd}},{key:"getPathEnd",value:function(){if(-1===this._currentPosition.segment)throw new Error("missing segment");return this._path[this._currentPosition.segment+1]}},{key:"_nextPosition",value:function(t,e,i,r){if(this._currentPosition.isPathEnd)return!1;var n=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(n/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(i){if(0===i.length)if(0===n){var s=this._path[e.segment];i.push([s[0],s[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,n));var a=this._path[e.segment+1];i.push([a[0],a[1]])}if(n=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this.nextSegment(),e.segmentLength=this.calculateSegLength(this._path,e.segment),e.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart())return 0!==r&&(e.segmentLength=this.calculateSegLength(this._path,e.segment),e.isPartEnd=!0,1===r?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,i){if(0===i.length)if(0===n){var h=this._path[e.segment];i.push([h[0],h[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,n));var o=e.abscissa/e.segmentLength;if(1===o){var l=this._path[e.segment+1];i.push([l[0],l[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,o))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}},{key:"_getPoint",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._path,t.segment,e)}},{key:"_getAngle",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._path,t.segment,e)}},{key:"setPosAtNextPart",value:function(){for(;this._partSegCount;)this.hasNextSegment()&&this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this.nextSegment()),this._partSegCount++,1===(0,o.zv)(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var t=this._partSegCount;t;)this.previousSegment(),--t;this._currentPosition.segment=this.nextSegment(),this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var e=this.getStartPointIndex();this._ctrlPtBegin=1===(0,o.zv)(this._path[e]);var i=e+this._partSegCount+1;if(i>=this._path.length&&(i=0),this._ctrlPtEnd=1===(0,o.zv)(this._path[i]),this._patternLength>0){var r=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,s=Math.round((this._partLength-(r+n))/this._patternLength);s<=0&&(s=r+n>0?0:1),this._partLengthRatio=this._partLength/(r+n+s*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}},{key:"hasNextSegment",value:function(){return this._seg<this._path.length-2}},{key:"previousSegment",value:function(){return--this._seg}},{key:"nextSegment",value:function(){return++this._seg}},{key:"getStartPointIndex",value:function(){return this._seg}},{key:"getEndPointIndex",value:function(){return this._seg+1}}]),i}(d),T=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new Z(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();T.instance=null;var Z=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a,h,o;return(0,n.Z)(this,i),(a=e.call(this,t,!0,!0))._walker=new L,a._walker.updateTolerance(s),a._endings=r.lineDashEnding,a._customDashPos=-(null!=(h=r.offsetAlongLine)?h:0)*s,a._offsetAtEnd=(null!=(o=r.customEndingOffset)?o:0)*s,a._pattern=new C,a._pattern.init(r.dashTemplate,!0),a._pattern.scale(s),a}return(0,s.Z)(i,[{key:"processPath",value:function(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){var e=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(e=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var i=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||i<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}var r;if(this.iteratePath)r=this._pattern.nextValue();else{var n;switch(this._endings){case"HalfPattern":default:n=.5*this._pattern.firstValue();break;case"HalfGap":n=.5*-this._pattern.lastValue();break;case"FullGap":n=-this._pattern.lastValue();break;case"FullPattern":n=0;break;case"NoConstraint":case"Custom":n=-this._customDashPos}var s=n/this._pattern.length();n=(s-=Math.floor(s))*this._pattern.length(),this._pattern.reset(),r=this._pattern.nextValue();for(var a=!1;n>=r;)n-=r,r=this._pattern.nextValue(),a=!a;r-=n,a?(this._walker.nextPosition(r),r=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(r),r=this._pattern.nextValue(),this._walker.nextPosition(r),r=this._pattern.nextValue())}var h=this._walker.nextCurve(r);return h?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),v.mergePath(h,this._firstCurve),this._firstCurve=null)):(r=this._pattern.nextValue(),!this._walker.nextPosition(r)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(h=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,h=this._firstCurve,this._firstCurve=null),{paths:[h]}}}]),i}(o.zY),A=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new z(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();A.instance=null;var z=function(){function t(e,i,r){switch((0,n.Z)(this,t),this._inputGeometries=e,this._curveHelper=new d,this._width=(void 0!==i.width?i.width:2)*r,i.method){case"Mitered":default:this._method="Mitered";break;case"Bevelled":this._method="Bevelled";break;case"Rounded":case"TrueBuffer":this._method="Rounded";break;case"Square":this._method="Square"}this._option=i.option,this._offsetFlattenError=_*r}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if((0,h.YX)(t)&&this._width>0){if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)-2*this._width<0)return t;var e=[];return e.push([[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]),e.push([[t.xmin+this._width,t.ymin+this._width],[t.xmax-this._width,t.ymin+this._width],[t.xmax-this._width,t.ymax-this._width],[t.xmin+this._width,t.ymax-this._width],[t.xmin+this._width,t.ymin+this._width]]),{rings:e}}if((0,h.oU)(t)&&this._width>0){var i,n=[],s=(0,r.Z)(t.rings);try{for(s.s();!(i=s.n()).done;){var a=i.value,o=this._curveHelper.calculatePathLength(a),l=this._curveHelper.offset(a,this._width,this._method,4,this._offsetFlattenError);l&&(o<0&&l.reverse(),n.push(l))}}catch(u){s.e(u)}finally{s.f()}if(n.length)return{rings:n}}t=this._inputGeometries.next()}return null}}]),t}(),F=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new R(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();F.instance=null;var R=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a;return(0,n.Z)(this,i),(a=e.call(this,t,!1,!0))._curveHelper=new d,a._length=(void 0!==r.length?r.length:20)*s,a._angle=void 0!==r.angle?r.angle:225,a._position=void 0!==r.position?r.position:50,a._length<0&&(a._length=-a._length),a._position<20&&(a._position=20),a._position>80&&(a._position=80),a._mirror=!1,a}return(0,s.Z)(i,[{key:"processPath",value:function(t){if(this._curveHelper.isEmpty(t,!1))return null;var e=t[0],i=t[t.length-1],r=[i[0]-e[0],i[1]-e[1]];this._curveHelper.normalize(r);var n=[e[0]+(i[0]-e[0])*this._position/100,e[1]+(i[1]-e[1])*this._position/100],s=Math.cos((90-this._angle)/180*Math.PI),a=Math.sin((90-this._angle)/180*Math.PI);return this._mirror&&(a=-a),this._mirror=!this._mirror,{paths:[[e,[n[0]-this._length/2*s,n[1]-this._length/2*a],[n[0]+this._length/2*s,n[1]+this._length/2*a],i]]}}}]),i}(o.zY),E=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new G(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();E.instance=null;var G=function(){function t(e,i,r){(0,n.Z)(this,t),this._inputGeometries=e,this._offsetX=void 0!==i.offsetX?i.offsetX*r:0,this._offsetY=void 0!==i.offsetY?-i.offsetY*r:0}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if((0,h.YX)(t))return{xmin:t.xmin+this._offsetX,xmax:t.xmax+this._offsetX,ymin:t.ymin+this._offsetY,ymax:t.ymax+this._offsetY};if((0,h.oU)(t)){var e=(0,a.d9)(t);return this._moveMultipath(e.rings,this._offsetX,this._offsetY),e}if((0,h.l9)(t)){var i=(0,a.d9)(t);return this._moveMultipath(i.paths,this._offsetX,this._offsetY),i}if((0,h.aW)(t)){var r=(0,a.d9)(t);return this._movePath(r.points,this._offsetX,this._offsetY),r}if((0,h.wp)(t))return{x:t.x+this._offsetX,y:t.y+this._offsetY};t=this._inputGeometries.next()}return null}},{key:"_moveMultipath",value:function(t,e,i){if(t){var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;this._movePath(a,e,i)}}catch(h){s.e(h)}finally{s.f()}}}},{key:"_movePath",value:function(t,e,i){if(t){var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;a[0]+=e,a[1]+=i}}catch(h){s.e(h)}finally{s.f()}}}}]),t}(),H=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i,r){return new X(t,e,i,r)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();H.instance=null;var X=function(){function t(e,i,r,s){var a;(0,n.Z)(this,t),this._inputGeometries=e,this._curveHelper=new d,this._offset=(null!=(a=i.offset)?a:1)*r,s||(this._offset=-this._offset),this._method=i.method,this._option=i.option,this._offsetFlattenError=_*r}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._offset)return t;if((0,h.YX)(t)){if("Rounded"===this._method&&this._offset>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._offset,this._method,4,this._offsetFlattenError);return i?{rings:[i]}:null}if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._offset>0)return{xmin:t.xmin-this._offset,xmax:t.xmax+this._offset,ymin:t.ymin-this._offset,ymax:t.ymax+this._offset}}if((0,h.oU)(t)){var n,s=[],a=(0,r.Z)(t.rings);try{for(a.s();!(n=a.n()).done;){var o=n.value,l=this._curveHelper.offset(o,this._offset,this._method,4,this._offsetFlattenError);l&&s.push(l)}}catch(d){a.e(d)}finally{a.f()}if(s.length)return{rings:s}}if((0,h.l9)(t)){var u,c=[],f=(0,r.Z)(t.paths);try{for(f.s();!(u=f.n()).done;){var _=u.value,v=this._curveHelper.offset(_,this._offset,this._method,4,this._offsetFlattenError);v&&c.push(v)}}catch(d){f.e(d)}finally{f.f()}if(c.length)return{paths:c}}t=this._inputGeometries.next()}return null}}]),t}(),Y=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new D(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Y.instance=null;var D=function(){function t(e,i,r){(0,n.Z)(this,t),this._inputGeometries=e,this._reverse=void 0===i.reverse||i.reverse}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(!this._reverse)return t;if((0,h.l9)(t)){var e=(0,a.d9)(t);return(0,o.ov)(e.paths),e}t=this._inputGeometries.next()}return null}}]),t}(),O=i(65156),B=i(376),N=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new W(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();N.instance=null;var W=function(){function t(e,i,r){(0,n.Z)(this,t),this._inputGeometries=e,this._rotateAngle=void 0!==i.angle?-i.angle*Math.PI/180:0}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._rotateAngle)return t;var e=(0,O.Ue)();(0,B.$P)(e,t);var i=(e[2]+e[0])/2,r=(e[3]+e[1])/2;if((0,h.YX)(t)){var n={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._rotateMultipath(n.rings,i,r),n}if((0,h.oU)(t)){var s=(0,a.d9)(t);return this._rotateMultipath(s.rings,i,r),s}if((0,h.l9)(t)){var o=(0,a.d9)(t);return this._rotateMultipath(o.paths,i,r),o}if((0,h.aW)(t)){var l=(0,a.d9)(t);return this._rotatePath(l.points,i,r),l}if((0,h.wp)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_rotateMultipath",value:function(t,e,i){if(t){var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;this._rotatePath(a,e,i)}}catch(h){s.e(h)}finally{s.f()}}}},{key:"_rotatePath",value:function(t,e,i){if(t){var n,s=Math.cos(this._rotateAngle),a=Math.sin(this._rotateAngle),h=(0,r.Z)(t);try{for(h.s();!(n=h.n()).done;){var o=n.value,l=o[0]-e,u=o[1]-i;o[0]=e+l*s-u*a,o[1]=i+l*a+u*s}}catch(c){h.e(c)}finally{h.f()}}}}]),t}(),V=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new U(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();V.instance=null;var U=function(){function t(e,i,r){(0,n.Z)(this,t),this._inputGeometries=e,this._xFactor=void 0!==i.xScaleFactor?i.xScaleFactor:1.15,this._yFactor=void 0!==i.yScaleFactor?i.yScaleFactor:1.15}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(1===this._xFactor&&1===this._yFactor)return t;var e=(0,O.Ue)();(0,B.$P)(e,t);var i=(e[2]+e[0])/2,r=(e[3]+e[1])/2;if((0,h.YX)(t)){var n={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._scaleMultipath(n.rings,i,r),n}if((0,h.oU)(t)){var s=(0,a.d9)(t);return this._scaleMultipath(s.rings,i,r),s}if((0,h.l9)(t)){var o=(0,a.d9)(t);return this._scaleMultipath(o.paths,i,r),o}if((0,h.aW)(t)){var l=(0,a.d9)(t);return this._scalePath(l.points,i,r),l}if((0,h.wp)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_scaleMultipath",value:function(t,e,i){if(t){var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;this._scalePath(a,e,i)}}catch(h){s.e(h)}finally{s.f()}}}},{key:"_scalePath",value:function(t,e,i){if(t){var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value,h=(a[0]-e)*this._xFactor,o=(a[1]-i)*this._yFactor;a[0]=e+h,a[1]=i+o}}catch(l){s.e(l)}finally{s.f()}}}}]),t}(),q=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new j(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();q.instance=null;var J,j=function(){function t(e,i,r){(0,n.Z)(this,t),this._inputGeometries=e,this._height=(void 0!==i.amplitude?i.amplitude:2)*r,this._period=(void 0!==i.period?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new C,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new L,this._walker.updateTolerance(r)}return(0,s.Z)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._height||0===this._period)return t;if((0,h.l9)(t)){var e=this._processGeom(t.paths);if(e.length)return{paths:e}}if((0,h.oU)(t)){var i=this._processGeom(t.rings);if(i.length)return{rings:i}}t=this._inputGeometries.next()}return null}},{key:"_processGeom",value:function(t){var e,i=[],n=(0,r.Z)(t);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(this._walker.init(s,this._pattern))switch(this._style){case"Sinus":default:i.push(this._constructCurve(s,!1));break;case"Square":i.push(this._constructSquare(s));break;case"Triangle":i.push(this._constructTriangle(s));break;case"Random":i.push(this._constructCurve(s,!0))}else i.push(s)}}catch(a){n.e(a)}finally{n.f()}return i}},{key:"_constructCurve",value:function(t,e){var i=new v,r=this._walker.calculatePathLength(t),n=Math.round(r/this._period);0===n&&(n=1);var s=16*n+1,a=r/n,h=this._period/16,o=1/s,l=2*Math.PI*r/a,u=2*Math.PI*Math.random(),c=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),_=.75-Math.random()/2,d=.75-Math.random()/2,p={};this._walker.curPointAndAngle(p),i.startPath(p.pt);for(var m=0;;){if(!this._walker.nextPointAndAngle(h,p)){i.lineTo(t[t.length-1]);break}var y=m,g=void 0;if(m+=o,e){var k=this._height/2*(1+.3*Math.sin(_*l*y+u));g=k*Math.sin(l*y+c),g+=k*Math.sin(d*l*y+f),g/=2}else g=.5*this._height*Math.sin(.5*l*y);i.lineTo([p.pt[0]-g*p.sa,p.pt[1]+g*p.ca])}return i.path()}},{key:"_constructSquare",value:function(t){var e=new v,i=this._walker.calculatePathLength(t);Math.round(i/this._period);for(var r=!0;;){var n=!1;if(this._walker.curPositionIsValid()){var s={};this._walker.curPointAndAngle(s);var a={};if(this._walker.nextPointAndAngle(this._period,a)){var h={};this._walker.nextPointAndAngle(this._period,h)&&(r?(e.startPath(s.pt),r=!1):e.lineTo(s.pt),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca]),e.lineTo([a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca]),e.lineTo([h.pt[0]+this._height/2*h.sa,h.pt[1]-this._height/2*h.ca]),n=!0)}}if(!n){e.lineTo(this._walker.getPathEnd());break}}return e.path()}},{key:"_constructTriangle",value:function(t){var e=new v,i=this._walker.calculatePathLength(t);Math.round(i/this._period);for(var r=!0;;){var n=!1;if(this._walker.curPositionIsValid()){var s={};this._walker.curPointAndAngle(s);var a={};if(this._walker.nextPointAndAngle(this._period/2,a)){var h={};this._walker.nextPointAndAngle(this._period,h)&&(this._walker.nextPosition(this._period/2)&&(r?(e.startPath(s.pt),r=!1):e.lineTo(s.pt),e.lineTo([a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca]),e.lineTo([h.pt[0]+this._height/2*h.sa,h.pt[1]-this._height/2*h.ca])),n=!0)}}if(!n){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}]),t}();!function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(J||(J={}));var $=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new Q(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();$.instance=null;var Q=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a,h,o,l,u;return(0,n.Z)(this,i),(a=e.call(this,t,!0,!0))._geometryWalker=new L,a._geometryWalker.updateTolerance(s),a._angleToLine=null==(h=r.angleToLine)||h,a._offset=(null!=(o=r.offset)?o:0)*s,a._originalEndings=r.endings,a._offsetAtEnd=(null!=(l=r.customEndingOffset)?l:0)*s,a._position=-(null!=(u=r.offsetAlongLine)?u:0)*s,a._pattern=new C,a._pattern.init(r.placementTemplate,!1),a._pattern.scale(s),a._endings=a._originalEndings,a}return(0,s.Z)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===J.WithFullGap&&this.isClosed?this._endings=J.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var i,r=!0;switch(this._endings){case J.NoConstraint:i=-this._position,i=this._adjustPosition(i),r=!1;break;case J.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case J.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case J.WithMarkers:i=0;break;case J.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(t,this._pattern,r))return null;this._pattern.reset();for(var n=0;i>n;)i-=n,n=this._pattern.nextValue();e=n-=i,this.iteratePath=!0}var s={};return this._geometryWalker.nextPointAndAngle(e,s)?this._endings===J.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===J.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(s.pt[0]-this._offset*s.sa,s.pt[1]+this._offset*s.ca),this._angleToLine&&this.internalPlacement.setRotateCS(s.ca,s.sa),this.internalPlacement):(this.iteratePath=!1,null)}},{key:"_adjustPosition",value:function(t){var e=t/this._pattern.length();return(e-=Math.floor(e))*this._pattern.length()}}]),i}(o.v1),K=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new tt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();K.instance=null;var tt=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a;return(0,n.Z)(this,i),(a=e.call(this,t,!1,!0))._curveHelper=new d,a._angleToLine=void 0===r.angleToLine||r.angleToLine,a._offset=void 0!==r.offset?r.offset*s:0,a._type=r.extremityPlacement,a._position=void 0!==r.offsetAlongLine?r.offsetAlongLine*s:0,a._beginProcessed=!1,a}return(0,s.Z)(i,[{key:"processPath",value:function(t){var e;switch(this._type){case"Both":default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case"JustBegin":e=this._atExtremities(t,this._position,!0);break;case"JustEnd":e=this._atExtremities(t,this._position,!1);case"None":}return e}},{key:"_atExtremities",value:function(t,e,i){var r=t.length;if(r<2)return null;for(var n,s=i?1:r-2,a=i?r:-1,h=i?1:-1,l=0,u=i?t[0]:t[r-1],c=s;c!==a;c+=h){n=u,u=t[c];var f=this._curveHelper.calculateLength(n,u);if(l+f>e){var _=(e-l)/f,v=this._curveHelper.getAngleCS(n,u,_),d=(0,P.Z)(v,2),p=d[0],m=d[1],y=(0,o.XV)(n,u,_);return this.internalPlacement.setTranslate(y[0]-this._offset*m,y[1]+this._offset*p),this._angleToLine&&this.internalPlacement.setRotateCS(-p,-m),this.internalPlacement}l+=f}return null}}]),i}(o.v1),et=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new it(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();et.instance=null;var it=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a;return(0,n.Z)(this,i),(a=e.call(this,t,!0,!0))._walker=new L,a._walker.updateTolerance(s),a._angleToLine=void 0===r.angleToLine||r.angleToLine,a._offset=void 0!==r.offset?r.offset*s:0,a._beginGap=void 0!==r.beginPosition?r.beginPosition*s:0,a._endGap=void 0!==r.endPosition?r.endPosition*s:0,a._flipFirst=void 0===r.flipFirst||r.flipFirst,a._pattern=new C,a._pattern.init(r.positionArray,!1,!1),a._subPathLen=0,a._posCount=a._pattern.size(),a._isFirst=!0,a._prevPos=0,a}return(0,s.Z)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath){var i=this._pattern.nextValue()*this._subPathLen,r=this._beginGap+i;e=r-this._prevPos,this._prevPos=r}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=this._walker.calculatePathLength(t)-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();var n=this._pattern.nextValue()*this._subPathLen,s=this._beginGap+n;e=s-this._prevPos,this._prevPos=s,this.iteratePath=!0}var a={};if(!this._walker.nextPointAndAngle(e,a,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(a.pt[0]-this._offset*a.sa,a.pt[1]+this._offset*a.ca);var h,o,l=this._isFirst&&this._flipFirst;return this._angleToLine?(h=a.ca,o=a.sa):(h=1,o=0),l&&(h=-h,o=-o),this.internalPlacement.setRotateCS(h,o),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}]),i}(o.v1),rt=i(84284);var nt=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new st(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();nt.instance=null;var st=function(){function t(e,i,r){if((0,n.Z)(this,t),this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=(void 0!==i.stepX?Math.abs(i.stepX):16)*r,this._stepY=(void 0!==i.stepY?Math.abs(i.stepY):16)*r,0!==this._stepX&&0!==this._stepY&&e&&function(t){return void 0!==t.rings}(e)&&e.rings){if(this._gridType=void 0!==i.gridType?i.gridType:"Fixed","Random"===this._gridType)this._randomness=void 0!==i.randomness?i.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0;else{if(this._randomness=0,this._gridAngle=void 0!==i.gridAngle?i.gridAngle:0,this._shiftOddRows=void 0!==i.shiftOddRows&&i.shiftOddRows,this._offsetX=void 0!==i.offsetX?i.offsetX*r:0,this._offsetY=void 0!==i.offsetY?i.offsetY*r:0,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new rt.u,this._calculateMinMax(e),this._geometry=e}}return(0,s.Z)(t,[{key:"next",value:function(){return this._geometry?this._nextInside():null}},{key:"_calculateMinMax",value:function(t){var e,i,n,s,a,h,o,l;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,a=h=Number.MAX_VALUE,o=l=-Number.MAX_VALUE;var u,c=(0,r.Z)(t.rings);try{for(c.s();!(u=c.n()).done;)for(var f=u.value,_=f?f.length:0,v=0;v<_;++v)e=f[v][0]-this._graphicOriginX-this._offsetX,i=f[v][1]-this._graphicOriginY-this._offsetY,n=this._cosAngle*e-this._sinAngle*i,s=this._sinAngle*e+this._cosAngle*i,a=Math.min(a,n),o=Math.max(o,n),h=Math.min(h,s),l=Math.max(l,s)}catch(d){c.e(d)}finally{c.f()}a+=this._graphicOriginX,o+=this._graphicOriginX,h+=this._graphicOriginY,l+=this._graphicOriginY,this._xMin=Math.round(a/this._stepX),this._xMax=Math.round(o/this._stepX),this._yMin=Math.round(h/this._stepY),this._yMax=Math.round(l/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}},{key:"_nextInside",value:function(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);var e=this._currentY*this._stepY+this._offsetY,i=void 0,r=void 0;return this._currentX++,"Random"===this._gridType?(i=this._graphicOriginX+t+this._stepX*this._randomness*(.5-Math.random())*2/3,r=this._graphicOriginY+e+this._stepY*this._randomness*(.5-Math.random())*2/3):(i=this._graphicOriginX+this._cosAngle*t+this._sinAngle*e,r=this._graphicOriginY-this._sinAngle*t+this._cosAngle*e),this._internalPlacement.setTranslate(i,r),this._internalPlacement}}}]),t}(),at=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new ht(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();at.instance=null;var ht=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a;return(0,n.Z)(this,i),(a=e.call(this,t,!0,!0))._curveHelper=new d,a._angleToLine=void 0===r.angleToLine||r.angleToLine,a._offset=void 0!==r.offset?r.offset*s:0,a._relativeTo=r.relativeTo,a._position=void 0!==r.startPointOffset?r.startPointOffset*s:0,a._epsilon=.001*s,a}return(0,s.Z)(i,[{key:"processPath",value:function(t){var e=this._position;if("SegmentMidpoint"===this._relativeTo){for(this.iteratePath||(this._segmentCount=t.length,this._curSegment=1,this.iteratePath=!0);this._curSegment<this._segmentCount;){var i=this._curSegment;this._curSegment++;var r=t[i-1],n=t[i],s=this._curveHelper.calculateLength(r,n);if(!(s<this._epsilon)){var a=.5+this._position/s,h=this._curveHelper.getAngleCS(r,n,a),l=(0,P.Z)(h,2),u=l[0],c=l[1],f=(0,o.XV)(r,n,a);return this.internalPlacement.setTranslate(f[0]-this._offset*c,f[1]+this._offset*u),this._angleToLine&&this.internalPlacement.setRotateCS(u,c),this.internalPlacement}}return this.iteratePath=!1,null}"LineEnd"===this._relativeTo&&(0,o.hh)(t);var _=this.onLine(t,e);return"LineEnd"===this._relativeTo&&(0,o.hh)(t),_}},{key:"onLine",value:function(t,e){var i,r=!1;switch(this._relativeTo){case"LineMiddle":default:i=this._curveHelper.calculatePathLength(t)/2+e;break;case"LineBeginning":i=e;break;case"LineEnd":i=e,r=!0}for(var n,s=t.length,a=0,h=t[0],l=1;l<s;++l){n=h,h=t[l];var u=this._curveHelper.calculateLength(n,h);if(a+u>i){var c=(i-a)/u,f=this._curveHelper.getAngleCS(n,h,c),_=(0,P.Z)(f,2),v=_[0],d=_[1],p=(0,o.XV)(n,h,c),m=r?this._offset:-this._offset;return this.internalPlacement.setTranslate(p[0]-m*d,p[1]+m*v),this._angleToLine&&(r?this.internalPlacement.setRotateCS(-v,-d):this.internalPlacement.setRotateCS(v,d)),this.internalPlacement}a+=u}return null}}]),i}(o.v1),ot=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new lt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ot.instance=null;var lt=function(t){(0,c.Z)(i,t);var e=(0,f.Z)(i);function i(t,r,s){var a;return(0,n.Z)(this,i),(a=e.call(this,t,!0,!0))._curveHelper=new d,a._angleToLine=void 0===r.angleToLine||r.angleToLine,a._offset=void 0!==r.offset?r.offset*s:0,a._endPoints=void 0===r.placeOnEndPoints||r.placeOnEndPoints,a._controlPoints=void 0===r.placeOnControlPoints||r.placeOnControlPoints,a._regularVertices=void 0===r.placeOnRegularVertices||r.placeOnRegularVertices,a._tags=[],a._tagIterator=0,a}return(0,s.Z)(i,[{key:"processPath",value:function(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);var i=e[0],r=e[1];if(0!==this._offset){var n=Math.cos(e[2]),s=Math.sin(e[2]);i-=this._offset*s,r+=this._offset*n}return this.internalPlacement.setTranslate(i,r),this._tagIterator++,this.internalPlacement}},{key:"_preparePath",value:function(t){this._tags.length=0,this._tagIterator=0;for(var e,i,r=(0,o.QK)(t),n=t.length-1,s=0,a=0,h=0,l=0,u=0;s<n;){e=t[++s-1],i=t[s];var c=(0,o.zv)(e),f=(0,o.zv)(i);(this._angleToLine||0!==this._offset)&&(l=this._curveHelper.getAngle(e,i,0)),1===s?r?(a=l,h=c):(this._endPoints||this._controlPoints&&1===c)&&this._tags.push([e[0],e[1],l]):1===c?this._controlPoints&&this._tags.push([e[0],e[1],ut(u,l)]):this._regularVertices&&this._tags.push([e[0],e[1],ut(u,l)]),(this._angleToLine||0!==this._offset)&&(u=this._curveHelper.getAngle(e,i,1)),s===n&&(r?1===f||1===h?this._controlPoints&&this._tags.push([i[0],i[1],ut(u,a)]):this._regularVertices&&this._tags.push([i[0],i[1],ut(u,a)]):(this._endPoints||this._controlPoints&&1===f)&&this._tags.push([i[0],i[1],u]))}this._tagIterator=0}}]),i}(o.v1);function ut(t,e){for(var i=Math.PI;Math.abs(e-t)>i+2e-15;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}var ct=function(){function t(){(0,n.Z)(this,t)}return(0,s.Z)(t,[{key:"execute",value:function(t,e,i){return new ft(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ct.instance=null;var ft=function(){function t(e,i,r){(0,n.Z)(this,t),this._geometry=e,this._offsetX=void 0!==i.offsetX?i.offsetX*r:0,this._offsetY=void 0!==i.offsetY?i.offsetY*r:0,this._method=void 0!==i.method?i.method:"OnPolygon",this._internalPlacement=new rt.u}return(0,s.Z)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t&&function(t){return void 0!==t.rings}(t)?this._polygonCenter(t):null}},{key:"_polygonCenter",value:function(t){this._method;var e=(0,O.Ue)();return(0,B.$P)(e,t),this._internalPlacement.setTranslate((e[2]+e[0])/2+this._offsetX,(e[3]+e[1])/2-this._offsetY),!0?this._internalPlacement:null}}]),t}();function _t(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return l.local();case"CIMGeometricEffectArrow":return m.local();case"CIMGeometricEffectBuffer":return g.local();case"CIMGeometricEffectControlMeasureLine":return x.local();case"CIMGeometricEffectCut":return b.local();case"CIMGeometricEffectDashes":return T.local();case"CIMGeometricEffectDonut":return A.local();case"CIMGeometricEffectJog":return F.local();case"CIMGeometricEffectMove":return E.local();case"CIMGeometricEffectOffset":return H.local();case"CIMGeometricEffectReverse":return Y.local();case"CIMGeometricEffectRotate":return N.local();case"CIMGeometricEffectScale":return V.local();case"CIMGeometricEffectWave":return q.local()}return null}function vt(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return $.local();case"CIMMarkerPlacementAtExtremities":return K.local();case"CIMMarkerPlacementAtRatioPositions":return et.local();case"CIMMarkerPlacementInsidePolygon":return nt.local();case"CIMMarkerPlacementOnLine":return at.local();case"CIMMarkerPlacementOnVertices":return ot.local();case"CIMMarkerPlacementPolygonCenter":return ct.local()}return null}},84284:function(t,e,i){i.d(e,{u:function(){return s}});var r=i(15671),n=i(43144),s=function(){function t(){(0,r.Z)(this,t),this.setIdentity()}return(0,n.Z)(t,[{key:"getAngle",value:function(){return(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)&&(this.rz=Math.atan2(this.rz_s,this.rz_c)),this.rz}},{key:"setIdentity",value:function(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rz_c=1,this.rz_s=0}},{key:"setTranslate",value:function(t,e){this.tx=t,this.ty=e}},{key:"setTranslateZ",value:function(t){this.tz=t}},{key:"setRotateCS",value:function(t,e){this.rz=void 0,this.rz_c=t,this.rz_s=e}},{key:"setRotate",value:function(t){this.rz=t,this.rz_c=void 0,this.rz_s=void 0}},{key:"setRotateY",value:function(t){this.ry=t}},{key:"setScale",value:function(t){this.s=t}},{key:"setMeasure",value:function(t){this.m=t}}]),t}()},59001:function(t,e,i){i.d(e,{Z:function(){return c}});var r=i(1413),n=i(15861),s=i(15671),a=i(43144),h=i(87757),o=i(76200),l=i(10064),u=i(66978),c=function(){function t(){(0,s.Z)(this,t),this._resourceMap=new Map,this._inFlightResourceMap=new Map}return(0,a.Z)(t,[{key:"destroy",value:function(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}},{key:"getResource",value:function(t){var e;return null!=(e=this._resourceMap.get(t))?e:null}},{key:"fetchResource",value:function(){var t=(0,n.Z)(h.mark((function t(e,i){var r,n,s,a,o=this;return h.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={width:0,height:0},n=this._resourceMap,!(s=n.get(e))){t.next=3;break}return t.abrupt("return",(r.width=s.width,r.height=s.height,r));case 3:return a=this._inFlightResourceMap.get(e),t.abrupt("return",a||(a=f(e,i),this._inFlightResourceMap.set(e,a),a=a.then((function(t){if(o._inFlightResourceMap.delete(e),t.ok){n.set(e,t.value);var i=t.value;return r.width=i.width,r.height=i.height,r}return r})),a));case 5:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"deleteResource",value:function(t){this._inFlightResourceMap.delete(t),this._resourceMap.delete(t)}}]),t}();function f(t,e){if(t.includes(";base64,")){var i=new Image;return i.src=t,i.decode().then((function(){return{ok:!0,value:i}})).catch((function(e){return(0,u.D_)(e)?{ok:!1,error:e}:{ok:!1,error:new l.Z("invalid-resource","Could not fetch requested resource at ".concat(t))}}))}return(0,o.default)(t,(0,r.Z)({responseType:"image"},e)).then((function(t){return{ok:!0,value:t.data}})).catch((function(e){return(0,u.D_)(e)?{ok:!1,error:e}:{ok:!1,error:new l.Z("invalid-resource","Could not fetch requested resource at ".concat(t))}}))}},2146:function(t,e,i){i.d(e,{cD:function(){return Z},uQ:function(){return L},Tu:function(){return T},zA:function(){return C},x1:function(){return z},et:function(){return R},g:function(){return F}});var r=i(60136),n=i(29388),s=i(37762),a=i(15671),h=i(43144),o=i(75746),l=i(32718),u=i(92026),c=i(13005),f=i(17842),_=i(65156),v=i(376),d=i(77981),p=i(35747),m=i(84307),y=i(84284),g=i(59001),k=i(691),P=i(22532),x=i(38999),M=i(94109),b=i(47975),S=Math.PI/180,w=l.Z.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),C=function(){function t(e){(0,a.Z)(this,t),this._t=e}return(0,h.Z)(t,[{key:"clone",value:function(){return new t(this._t.slice())}},{key:"transform",value:function(t){var e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}},{key:"scale",value:function(t,e){var i=this._t;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=e,i[4]*=e,i[5]*=e,this}},{key:"scaleRatio",value:function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}},{key:"translate",value:function(t,e){var i=this._t;return i[2]+=t,i[5]+=e,this}},{key:"rotate",value:function(e){return t.multiply(this,t.createRotate(e),this)}},{key:"invert",value:function(){var e=this._t,i=e[0]*e[4]-e[1]*e[3];if(0===i)return new t([0,0,0,0,0,0]);i=1/i;var r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i;return new t([e[4]*i,-e[1]*i,r,-e[3]*i,e[0]*i,n])}}],[{key:"createIdentity",value:function(){return new t([1,0,0,0,1,0])}},{key:"createScale",value:function(e,i){return new t([e,0,0,0,i,0])}},{key:"createTranslate",value:function(e,i){return new t([0,0,e,0,0,i])}},{key:"createRotate",value:function(e){var i=Math.cos(e),r=Math.sin(e);return new t([i,-r,0,r,i,0])}},{key:"multiply",value:function(t,e,i){var r=t._t,n=e._t,s=r[0]*n[0]+r[3]*n[1],a=r[1]*n[0]+r[4]*n[1],h=r[2]*n[0]+r[5]*n[1]+n[2],o=r[0]*n[3]+r[3]*n[4],l=r[1]*n[3]+r[4]*n[4],u=r[2]*n[3]+r[5]*n[4]+n[5],c=i._t;return c[0]=s,c[1]=a,c[2]=h,c[3]=o,c[4]=l,c[5]=u,i}}]),t}(),I=function(){function t(e,i){(0,a.Z)(this,t),this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._flippedYs=!1,this._placementPool=new c.Z(y.u,null,null,100),this._earlyReturn=!1,this._mapRotation=0,this._resourceManager=e||new g.Z,this._transfos.push(i||C.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}return(0,h.Z)(t,[{key:"setTransform",value:function(t,e){this._transfos=[t||C.createIdentity()],this._sizeTransfos=[e||(t?t.scaleRatio():1)]}},{key:"setGeomUnitsPerPoint",value:function(t){this._geomUnitsPerPoint=t}},{key:"setFlippedYs",value:function(t){this._flippedYs=t}},{key:"transformPt",value:function(t){return this._transfos[this._transfos.length-1].transform(t)}},{key:"transformSize",value:function(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"reverseTransformPt",value:function(t){return this._transfos[this._transfos.length-1].invert().transform(t)}},{key:"reverseTransformSize",value:function(t){return t/this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"geomUnitsPerPoint",value:function(){return this.isEmbedded()?1:this._geomUnitsPerPoint}},{key:"flippedYs",value:function(){return!this.isEmbedded()&&this._flippedYs}},{key:"isEmbedded",value:function(){return this._transfos.length>1}},{key:"back",value:function(){return this._transfos[this._transfos.length-1]}},{key:"push",value:function(t,e){var i=e?t.scaleRatio():1;C.multiply(t,this.back(),t),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*i)}},{key:"pop",value:function(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}},{key:"drawSymbol",value:function(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e);break;case"CIMTextSymbol":this.drawTextSymbol(t,e)}}},{key:"drawMultiLayerSymbol",value:function(t,e){if(t){var i=t.symbolLayers;if(i){var r=t.effects;if(r&&r.length>0){var n=this.executeEffects(r,e);if(n)for(var s=n.next();s;)this.drawSymbolLayers(i,s),s=n.next()}else this.drawSymbolLayers(i,e)}}}},{key:"executeEffects",value:function(t,e){var i,r=new p.M(e),n=(0,s.Z)(t);try{for(n.s();!(i=n.n()).done;){var a=i.value,h=(0,m.h)(a);h&&(r=h.execute(r,a,this.geomUnitsPerPoint(),this.flippedYs()))}}catch(o){n.e(o)}finally{n.f()}return r}},{key:"drawSymbolLayers",value:function(t,e){for(var i=t.length;i--;){var r=t[i];if(r&&!1!==r.enable){var n=r.effects;if(n&&n.length>0){var s=this.executeEffects(n,e);if(s)for(var a=null;(a=s.next())&&(this.drawSymbolLayer(r,a),!this._earlyReturn););}else this.drawSymbolLayer(r,e);if(this._earlyReturn)return}}}},{key:"drawSymbolLayer",value:function(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(e,t);break;case"CIMPictureFill":this.drawPictureFill(e,t);break;case"CIMGradientFill":this.drawGradientFill(e,t);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMPictureStroke":this.drawPictureStroke(e,t);break;case"CIMGradientStroke":this.drawGradientStroke(e,t);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}},{key:"drawHatchFill",value:function(t,e){var i=this._buildHatchPolyline(e,t,this.geomUnitsPerPoint());i&&(this.pushClipPath(t),this.drawMultiLayerSymbol(e.lineSymbol,i),this.popClipPath())}},{key:"drawPictureFill",value:function(t,e){}},{key:"drawGradientFill",value:function(t,e){}},{key:"drawPictureStroke",value:function(t,e){}},{key:"drawGradientStroke",value:function(t,e){}},{key:"drawMarkerLayer",value:function(t,e){var i=t.markerPlacement;if(i){var r=(0,m.W)(i);if(r){var n="CIMMarkerPlacementInsidePolygon"===i.type;n&&this.pushClipPath(e);var a=r.execute(e,i,this.geomUnitsPerPoint());if(a)for(var h=null;(h=a.next())&&(this.drawMarker(t,h),!this._earlyReturn););n&&this.popClipPath()}}else{var o=this._placementPool.acquire();if((0,d.wp)(e))o.tx=e.x,o.ty=e.y,this.drawMarker(t,o);else{var l,u=(0,s.Z)(e.points);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(o.tx=c[0],o.ty=c[1],this.drawMarker(t,o),this._earlyReturn)break}}catch(f){u.e(f)}finally{u.f()}}this._placementPool.release(o)}}},{key:"drawMarker",value:function(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}},{key:"drawPictureMarker",value:function(t,e){var i,r,n,s,a;if(t){var h=this._resourceManager.getResource(t.url),o=null!=(i=t.size)?i:10;if(!((0,u.Wi)(h)||o<=0)){var l=h.width,c=h.height;if(l&&c){var f=l/c,_=null!=(r=t.scaleX)?r:1,v=C.createIdentity(),d=t.anchorPoint;if(d){var p=d.x,m=d.y;"Absolute"!==t.anchorPointUnits&&(p*=o*f*_,m*=o),v.translate(-p,-m)}var y=null!=(n=t.rotation)?n:0;t.rotateClockwise&&(y=-y),this._mapRotation&&(y+=this._mapRotation),y&&v.rotate(y*S);var g=null!=(s=t.offsetX)?s:0,k=null!=(a=t.offsetY)?a:0;if(g||k){if(this._mapRotation){var P=S*this._mapRotation,x=Math.cos(P),M=Math.sin(P),b=g*M+k*x;g=g*x-k*M,k=b}v.translate(g,k)}var w=this.geomUnitsPerPoint();1!==w&&v.scale(w,w);var I=e.getAngle();I&&v.rotate(I),v.translate(e.tx,e.ty),this.push(v,!1),this.drawImage(t.url,o,t.scaleX),this.pop()}}}}},{key:"drawVectorMarker",value:function(t,e){var i,r,n,a;if(t){var h=t.markerGraphics;if(h){var o=null!=(i=t.size)?i:10,l=t.frame,u=l?l.ymax-l.ymin:0,c=o&&u?o/u:1,f=C.createIdentity();l&&f.translate(.5*-(l.xmax+l.xmin),.5*-(l.ymax+l.ymin));var _=t.anchorPoint;if(_){var v=_.x,d=_.y;"Absolute"!==t.anchorPointUnits?l&&(v*=l.xmax-l.xmin,d*=l.ymax-l.ymin):(v/=c,d/=c),f.translate(-v,-d)}1!==c&&f.scale(c,c);var p=null!=(r=t.rotation)?r:0;t.rotateClockwise&&(p=-p),this._mapRotation&&(p+=this._mapRotation),p&&f.rotate(p*S);var m=null!=(n=t.offsetX)?n:0,y=null!=(a=t.offsetY)?a:0;if(m||y){if(this._mapRotation){var g=S*this._mapRotation,k=Math.cos(g),P=Math.sin(g),x=m*P+y*k;m=m*k-y*P,y=x}f.translate(m,y)}var M=this.geomUnitsPerPoint();1!==M&&f.scale(M,M);var b=e.getAngle();b&&f.rotate(b),f.translate(e.tx,e.ty),this.push(f,t.scaleSymbolsProportionally);var I,L=(0,s.Z)(h);try{for(L.s();!(I=L.n()).done;){var T=I.value;if(T&&T.symbol&&T.geometry||w.error("Invalid marker graphic",T),this.drawSymbol(T.symbol,T.geometry),this._earlyReturn)break}}catch(Z){L.e(Z)}finally{L.f()}this.pop()}}}},{key:"drawTextSymbol",value:function(t,e){var i,r,n,s;if(t&&(0,d.wp)(e)&&!((null!=(i=t.height)?i:10)<=0)){var a=C.createIdentity(),h=null!=(r=t.angle)?r:0;(h=-h)&&a.rotate(h*S);var o=null!=(n=t.offsetX)?n:0,l=null!=(s=t.offsetY)?s:0;(o||l)&&a.translate(o,l);var u=this.geomUnitsPerPoint();1!==u&&a.scale(u,u),a.translate(e.x,e.y),this.push(a,!1),this.drawText(t),this.pop()}}},{key:"_buildHatchPolyline",value:function(t,e,i){var r=(void 0!==t.separation?t.separation:4)*i,n=void 0!==t.rotation?t.rotation:0;if(0===r)return null;r<0&&(r=-r);for(var s=0,a=.5*r;s>a;)s-=r;for(;s<-a;)s+=r;var h=(0,_.Ue)();(0,v.$P)(h,e),h[0]-=a,h[1]-=a,h[2]+=a,h[3]+=a;for(var o=[[h[0],h[1]],[h[0],h[3]],[h[2],h[3]],[h[2],h[1]]];n>180;)n-=180;for(;n<0;)n+=180;var l,u,c,f,d=Math.cos(n*S),p=Math.sin(n*S),m=-r*p,y=r*d;s=(void 0!==t.offsetX?t.offsetX*i:0)*p-(void 0!==t.offsetY?t.offsetY*i:0)*d,l=c=Number.MAX_VALUE,u=f=-Number.MAX_VALUE;for(var g=0,k=o;g<k.length;g++){var P=k[g],x=P[0],M=P[1],b=d*x+p*M,w=-p*x+d*M;l=Math.min(l,b),c=Math.min(c,w),u=Math.max(u,b),f=Math.max(f,w)}for(var C=d*l-p*(c=Math.floor(c/r)*r)-m*s/r,I=p*l+d*c-y*s/r,L=d*u-p*c-m*s/r,T=p*u+d*c-y*s/r,Z=1+Math.round((f-c)/r),A=[],z=0;z<Z;z++)C+=m,I+=y,L+=m,T+=y,A.push([[C,I],[L,T]]);return{paths:A}}}]),t}(),L=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(t,r){var n;return(0,a.Z)(this,i),(n=e.call(this,t,r)).reset(),n}return(0,h.Z)(i,[{key:"reset",value:function(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}},{key:"envelope",value:function(){return new k.Z(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}},{key:"bounds",value:function(){return(0,_.al)(this._xmin,this._ymin,this._xmax,this._ymax)}},{key:"drawSolidFill",value:function(t){if(t&&!(this._clipCount>0))if((0,d.oU)(t))this._processPath(t.rings,0);else if((0,d.l9)(t))this._processPath(t.paths,0);else if((0,d.YX)(t)){var e=A(t);e&&this._processPath(e.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}},{key:"drawSolidStroke",value:function(t,e,i){if(t&&!(this._clipCount>0)){var r=.5*this.transformSize(i);if((0,d.oU)(t))this._processPath(t.rings,r);else if((0,d.l9)(t))this._processPath(t.paths,r);else if((0,d.YX)(t)){var n=A(t);n&&this._processPath(n.rings,r)}else console.error("drawSolidStroke unexpected geometry type!")}}},{key:"pushClipPath",value:function(t){this.drawSolidFill(t),++this._clipCount}},{key:"popClipPath",value:function(){--this._clipCount}},{key:"drawImage",value:function(t,e,i){var r=i*e,n=e,s=this._resourceManager.getResource(t);!e&&(0,u.pC)(s)&&(r=i*s.width,n=s.height),this._merge(this.transformPt([-r/2,-n/2]),0),this._merge(this.transformPt([-r/2,n/2]),0),this._merge(this.transformPt([r/2,-n/2]),0),this._merge(this.transformPt([r/2,n/2]),0)}},{key:"drawText",value:function(t){this._textRasterizer||(this._textRasterizer=new P.d)}},{key:"_processPath",value:function(t,e){if(t){var i,r=(0,s.Z)(t);try{for(r.s();!(i=r.n()).done;){var n=i.value,a=n?n.length:0;if(a>1){this._merge(this.transformPt(n[0]),e);for(var h=1;h<a;++h)this._merge(this.transformPt(n[h]),e)}}}catch(o){r.e(o)}finally{r.f()}}}},{key:"_merge",value:function(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}]),i}(I),T=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(){var t;return(0,a.Z)(this,i),(t=e.apply(this,arguments))._searchPoint=[0,0],t._searchDistPoint=0,t}return(0,h.Z)(i,[{key:"hitTest",value:function(t,e,i,r,n,s){var a=s*(0,f.F2)(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(t[0]+t[2])/2,(t[1]+t[3])/2],this._searchDistPoint=(t[2]-t[0])/2/a,this._textInfo=r;var h=e&&("CIMPointSymbol"===e.type&&"Map"!==e.angleAlignment||"CIMTextSymbol"===e.type);return this._mapRotation=h?n:0,this._earlyReturn=!1,this.drawSymbol(e,i),this._earlyReturn}},{key:"drawSolidFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawHatchFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawPictureFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawGradientFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawSolidStroke",value:function(t,e,i,r,n,s){this._hitTestStroke(t,i)}},{key:"drawPictureStroke",value:function(t,e){this._hitTestStroke(t,e.width)}},{key:"drawGradientStroke",value:function(t,e){this._hitTestStroke(t,e.width)}},{key:"pushClipPath",value:function(t){}},{key:"popClipPath",value:function(){}},{key:"drawImage",value:function(t,e,i){var r=this._resourceManager.getResource(t);if(!(0,u.Wi)(r)&&0!==r.height&&0!==e){var n=e*this.geomUnitsPerPoint(),s=n*i*(r.width/r.height),a=this.reverseTransformPt(this._searchPoint),h=this._searchDistPoint;Math.abs(a[0])<s/2+h&&Math.abs(a[1])<n/2+h&&(this._earlyReturn=!0)}}},{key:"drawText",value:function(t){var e,i,r=this._textInfo;if(r){var n=r.get(t);if(n){var a=n.text,h=n.mosaicItem;if(h&&0!==h.glyphMosaicItems.length){var l,u=null!=(e=t.height)?e:10,c=R(t.lineGapType,null!=(i=t.lineGap)?i:0,u),f=(0,o.E)(a)[1],_=h.glyphMosaicItems,v=(0,b.Nr)(_,f,{scale:u/M.Ex,angle:0,xOffset:0,yOffset:0,hAlign:z(t.horizontalAlignment),vAlign:F(t.verticalAlignment),maxLineWidth:512,lineHeight:M.xm*Math.max(.25,Math.min(c||1,4)),decoration:t.font.decoration||"none",isCIM:!0}),d=this.reverseTransformPt(this._searchPoint),p=d[0],m=d[1],y=(0,s.Z)(v.glyphs);try{for(y.s();!(l=y.n()).done;){var g=l.value;if(p>g.xTopLeft&&p<g.xBottomRight&&m>-g.yBottomRight&&m<-g.yTopLeft){this._earlyReturn=!0;break}}}catch(k){y.e(k)}finally{y.f()}}}}}},{key:"_hitTestFill",value:function(t){var e=null;if((0,d.YX)(t)){var i=t;e=[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]}else if((0,d.oU)(t))e=t.rings;else{if(!(0,d.l9)(t))return;e=t.paths}var r=this.reverseTransformPt(this._searchPoint);this._pointInPolygon(r,e)&&(this._earlyReturn=!0);var n=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(r,e,n)&&(this._earlyReturn=!0)}},{key:"_hitTestStroke",value:function(t,e){var i=null;if((0,d.YX)(t)){var r=t;i=[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]}else if((0,d.oU)(t))i=t.rings;else{if(!(0,d.l9)(t))return;i=t.paths}var n=this.reverseTransformPt(this._searchPoint),s=e*this.geomUnitsPerPoint(),a=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(n,i,s/2+a)&&(this._earlyReturn=!0)}},{key:"_pointInPolygon",value:function(t,e){var i,r=0,n=(0,s.Z)(e);try{for(n.s();!(i=n.n()).done;)for(var a=i.value,h=a.length,o=1;o<h;++o){var l=a[o-1],u=a[o];l[1]>t[1]!=u[1]>t[1]&&((u[0]-l[0])*(t[1]-l[1])-(u[1]-l[1])*(t[0]-l[0])>0?r++:r--)}}catch(c){n.e(c)}finally{n.f()}return 0!==r}},{key:"_nearLine",value:function(t,e,i){var r,n=(0,s.Z)(e);try{for(n.s();!(r=n.n()).done;)for(var a=r.value,h=a.length,o=1;o<h;++o){var l=a[o-1],u=a[o],c=(u[0]-l[0])*(u[0]-l[0])+(u[1]-l[1])*(u[1]-l[1]);if(0!==c){c=Math.sqrt(c);var f=((u[0]-l[0])*(t[1]-l[1])-(u[1]-l[1])*(t[0]-l[0]))/c;if(Math.abs(f)<i){var _=((u[0]-l[0])*(t[0]-l[0])+(u[1]-l[1])*(t[1]-l[1]))/c;if(_>-i&&_<c+i)return!0}}}}catch(v){n.e(v)}finally{n.f()}return!1}}]),i}(I),Z=function(t){(0,r.Z)(i,t);var e=(0,n.Z)(i);function i(t,r,n){var s;return(0,a.Z)(this,i),(s=e.call(this,r,n))._ctx=t,s}return(0,h.Z)(i,[{key:"drawSolidFill",value:function(t,e){if(t){if((0,d.oU)(t))this._buildPath(t.rings,!0);else if((0,d.l9)(t))this._buildPath(t.paths,!0);else if((0,d.YX)(t))this._buildPath(A(t).rings,!0);else{if(!(0,d.aW)(t))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}var i=this._ctx;i.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",i.fill("evenodd")}}},{key:"drawSolidStroke",value:function(t,e,i,r,n,s){if(t&&e&&0!==i){if((0,d.oU)(t))this._buildPath(t.rings,!0);else if((0,d.l9)(t))this._buildPath(t.paths,!1);else{if(!(0,d.YX)(t))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(A(t).rings,!0)}var a=this._ctx;a.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",a.lineWidth=this.transformSize(i)+.5,this._setCapStyle(r),this._setJoinStyle(n),a.miterLimit=s,a.stroke()}}},{key:"pushClipPath",value:function(t){if(this._ctx.save(),(0,d.oU)(t))this._buildPath(t.rings,!0);else if((0,d.l9)(t))this._buildPath(t.paths,!0);else{if(!(0,d.YX)(t))return;this._buildPath(A(t).rings,!0)}this._ctx.clip("evenodd")}},{key:"popClipPath",value:function(){this._ctx.restore()}},{key:"drawImage",value:function(t,e,i){var r=this._resourceManager.getResource(t);if(!(0,u.Wi)(r)){var n=this._ctx,s=n.canvas.width,a=n.canvas.height,h=e*i*(r.width/r.height),o=i*e;e||(h=i*r.width,o=i*r.height),this._ctx.drawImage(r,0,0,r.width,r.height,0,0,Math.min(this.transformSize(h),s),Math.min(this.transformSize(o),a))}}},{key:"drawText",value:function(t){this._textRasterizer||(this._textRasterizer=new P.d)}},{key:"_buildPath",value:function(t,e){var i=this._ctx;if(i.beginPath(),t){var r,n=(0,s.Z)(t);try{for(n.s();!(r=n.n()).done;){var a=r.value,h=a?a.length:0;if(h>1){var o=this.transformPt(a[0]);i.moveTo(o[0],o[1]);for(var l=1;l<h;++l)o=this.transformPt(a[l]),i.lineTo(o[0],o[1]);e&&i.closePath()}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"_setCapStyle",value:function(t){switch(t){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}},{key:"_setJoinStyle",value:function(t){switch(t){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}}]),i}(I),A=function(t){return t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null},z=function(t){switch(t){case"Left":return x.M7.Left;case"Right":return x.M7.Right;case"Center":case"Justify":return x.M7.Center}},F=function(t){switch(t){case"Top":return x.TR.Top;case"Center":return x.TR.Center;case"Bottom":return x.TR.Bottom;case"Baseline":return x.TR.Baseline}},R=function(t,e,i){switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}}},78915:function(t,e,i){i.d(e,{IV:function(){return R},B$:function(){return E},E0:function(){return H},fN:function(){return G},U1:function(){return U},rW:function(){return T}});var r=i(93433),n=i(1413),s=i(29439),a=i(15671),h=i(43144),o=i(37762),l=i(51995),u=i(75746),c=i(46228),f=i(84652),_=i(32718),v=i(16889),d=i(92026),p=i(17842),m=i(65156),y=i(376),g=i(84284),k=i(2146),P=i(31027),x=i(99201),M=i(94109),b=i(47975),S=Math.PI,w=S/2,C=96/72,I=Math.PI/180,L=_.Z.getLogger("esri.symbols.cim.CIMSymbolHelper");function T(t){if(!t||!t.type)return null;var e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":e=E.fromSimpleMarker(t);break;case"picture-marker":e=E.fromPictureMarker(t);break;case"simple-line":e=E.fromSimpleLineSymbol(t);break;case"simple-fill":e=E.fromSimpleFillSymbol(t);break;case"picture-fill":e=E.fromPictureFillSymbol(t);break;case"text":e=E.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function Z(t,e){switch(e.type){case"CIMSymbolReference":return Z(t,e.symbol);case"CIMPointSymbol":t.drawSymbol(e,{x:0,y:0});break;case"CIMLineSymbol":t.drawSymbol(e,{paths:[[[0,0],[0,1]]]});break;case"CIMPolygonSymbol":t.drawSymbol(e,{rings:[[[0,0],[0,1],[0,0]]]});break;case"CIMTextSymbol":t.drawSymbol(e,{x:0,y:0});break;case"CIMVectorMarker":var i=new g.u;t.drawMarker(e,i)}return t.envelope()}function A(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function z(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs((0,P.NA)(t.offsetX)),Math.abs((0,P.NA)(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude)}}function F(t){if(!t)return 0;var e,i=0,r=(0,o.Z)(t);try{for(r.s();!(e=r.n()).done;){i+=z(e.value)}}catch(n){r.e(n)}finally{r.f()}return i}var R=function(){function t(){(0,a.Z)(this,t)}return(0,h.Z)(t,[{key:"getSymbolInflateSize",value:function(t,e,i,r,n){return t||(t=[0,0,0,0]),e?this._getInflateSize(t,e,i,r,n):t}},{key:"_vectorMarkerBounds",value:function(t,e,i,r){var n=!0,s=(0,m.Ue)();if(e&&e.markerGraphics){var a,h=(0,o.Z)(e.markerGraphics);try{for(h.s();!(a=h.n()).done;){var l=a.value,u=[0,0,0,0];l.geometry&&((0,y.$P)(s,l.geometry),u[0]=0,u[1]=0,u[2]=0,u[3]=0,this.getSymbolInflateSize(u,l.symbol,i,0,r),s[0]+=u[0],s[1]+=u[1],s[2]+=u[2],s[3]+=u[3],n?(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],n=!1):(t[0]=Math.min(t[0],s[0]),t[1]=Math.min(t[1],s[1]),t[2]=Math.max(t[2],s[2]),t[3]=Math.max(t[3],s[3])))}}catch(c){h.e(c)}finally{h.f()}}return t}},{key:"_getInflateSize",value:function(t,e,i,r,n){if(function(t){return void 0!==t.symbolLayers}(e)){var s=this._getLayersInflateSize(t,e.symbolLayers,i,r,n),a=F(e.effects);return a>0&&(s[0]-=a,s[1]-=a,s[2]+=a,s[3]+=a),s}return this._getTextInflatedSize(t,e,n)}},{key:"_getLayersInflateSize",value:function(t,e,i,r,n){var s=!0;if(!e)return t;var a,h=(0,o.Z)(e);try{for(h.s();!(a=h.n()).done;){var l=a.value;if(l){var u=[0,0,0,0];switch(l.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":var c=l,f=c.width;"Square"===c.capStyle||"Miter"===c.joinStyle?f/=1.4142135623730951:f/=2,u[0]=-f,u[1]=-f,u[2]=f,u[3]=f;break;case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":var _=l;if("CIMVectorMarker"===l.type){var v=l;if(u=this._vectorMarkerBounds(u,v,i,n),v.frame){var p=(v.frame.xmin+v.frame.xmax)/2,y=(v.frame.ymin+v.frame.ymax)/2;u[0]-=p,u[1]-=y,u[2]-=p,u[3]-=y;var g=v.size/(v.frame.ymax-v.frame.ymin);u[0]*=g,u[1]*=g,u[2]*=g,u[3]*=g}}else if("CIMPictureMarker"===l.type){var k=l,M=i.getResource(k.url),b=1;(0,d.pC)(M)&&M.height&&(b=M.width/M.height);var S=_.size/2,w=_.size*b*k.scaleX/2;u=[-w,-S,w,S]}else{var C=_.size/2;u=[-C,-C,C,C]}if(_.anchorPoint){var L=void 0,T=void 0;"Absolute"===_.anchorPointUnits?(L=_.anchorPoint.x,T=_.anchorPoint.y):(L=_.anchorPoint.x*(u[2]-u[0]),T=_.anchorPoint.y*(u[3]-u[1])),u[0]-=L,u[1]-=T,u[2]-=L,u[3]-=T}var Z=(0,P.NA)(_.rotation);if(_.rotateClockwise&&(Z=-Z),r&&(Z-=r),Z){var z=I*Z,R=Math.cos(z),E=Math.sin(z),G=(0,m.Ue)([x.B1,x.B1,-x.B1,-x.B1]);(0,m.Ho)(G,[u[0]*R-u[1]*E,u[0]*E+u[1]*R]),(0,m.Ho)(G,[u[0]*R-u[3]*E,u[0]*E+u[3]*R]),(0,m.Ho)(G,[u[2]*R-u[1]*E,u[2]*E+u[1]*R]),(0,m.Ho)(G,[u[2]*R-u[3]*E,u[2]*E+u[3]*R]),u=G}var H=(0,P.NA)(_.offsetX),X=(0,P.NA)(_.offsetY);if(r){var Y=I*r,D=Math.cos(Y),O=Math.sin(Y),B=H*O+X*D;H=H*D-X*O,X=B}u[0]+=H,u[1]+=X,u[2]+=H,u[3]+=X;var N=A(_.markerPlacement);N>0&&(u[0]-=N,u[1]-=N,u[2]+=N,u[3]+=N)}var W=F(l.effects);W>0&&(u[0]-=W,u[1]-=W,u[2]+=W,u[3]+=W),s?(t[0]=u[0],t[1]=u[1],t[2]=u[2],t[3]=u[3],s=!1):(t[0]=Math.min(t[0],u[0]),t[1]=Math.min(t[1],u[1]),t[2]=Math.max(t[2],u[2]),t[3]=Math.max(t[3],u[3]))}}}catch(V){h.e(V)}finally{h.f()}return t}},{key:"_getTextInflatedSize",value:function(t,e,i){var r,n,s=null!=(r=e.height)?r:10;if(t[0]=-s/2,t[1]=-s/2,t[2]=s/2,t[3]=s/2,!i)return t;var a=i.get(e);if(!a)return t;var h=a.text,o=a.mosaicItem;if(!o||0===o.glyphMosaicItems.length)return t;var l=(0,k.et)(e.lineGapType,null!=(n=e.lineGap)?n:0,s),c=(0,u.E)(h)[1],f=o.glyphMosaicItems,_=(0,b.Nr)(f,c,{scale:s/M.Ex,angle:(0,P.NA)(e.angle),xOffset:(0,P.NA)(e.offsetX),yOffset:(0,P.NA)(e.offsetY),hAlign:(0,k.x1)(e.horizontalAlignment),vAlign:(0,k.g)(e.verticalAlignment),maxLineWidth:512,lineHeight:M.xm*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",isCIM:!0}).boundsT;return t[0]=_.x-_.halfWidth,t[1]=-_.y-_.halfHeight,t[2]=_.x+_.halfWidth,t[3]=-_.y+_.halfHeight,t}}],[{key:"SafeSize",value:function(t){var e=Math.max(Math.abs(t[0]),Math.abs(t[2])),i=Math.max(Math.abs(t[1]),Math.abs(t[3]));return Math.sqrt(e*e+i*i)}}]),t}(),E=function(){function t(){(0,a.Z)(this,t)}return(0,h.Z)(t,null,[{key:"getEnvelope",value:function(t,e){var i=new k.uQ(e);if(Array.isArray(t)){var r,n,s=(0,o.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;r?r.union(Z(i,a)):r=Z(i,a)}}catch(h){s.e(h)}finally{s.f()}return r}return Z(i,t)}},{key:"getTextureAnchor",value:function(t,e){var i=this.getEnvelope(t,e);if(!i)return[0,0,0];var r=(i.x+.5*i.width)*C,n=-(i.y+.5*i.height)*C,s=i.width*C+2,a=i.height*C+2;return[r/s,n/a,a]}},{key:"rasterize",value:function(t,e,i,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=i||this.getEnvelope(e,r);if(!s)return[null,0,0,0,0];var a=(s.x+.5*s.width)*C,h=(s.y+.5*s.height)*C;t.width=s.width*C,t.height=s.height*C,i||(t.width+=2,t.height+=2);var o=t.getContext("2d"),l=k.zA.createScale(C,-C);l.translate(.5*t.width-a,.5*t.height+h);var u=new k.cD(o,r,l);switch(e.type){case"CIMPointSymbol":var c={type:"point",x:0,y:0};u.drawSymbol(e,c);break;case"CIMVectorMarker":var f=new g.u;u.drawMarker(e,f)}var _=o.getImageData(0,0,t.width,t.height),v=new Uint8Array(_.data);if(n)for(var d,p=0;p<v.length;p+=4)d=v[p+3]/255,v[p]=v[p]*d,v[p+1]=v[p+1]*d,v[p+2]=v[p+2]*d;return[v,t.width,t.height,-a/t.width,-h/t.height]}},{key:"fromTextSymbol",value:function(t){var e,i,r,n,s,a=t.angle,h=t.color,o=t.font,l=t.haloColor,c=t.haloSize,f=t.horizontalAlignment,_=t.kerning,v=t.text,d=t.verticalAlignment,p=t.xoffset,m=t.yoffset;o&&(e=o.family,i=o.style,r=o.weight,n=o.size,s=o.decoration);var y=!1;return v&&(y=(0,u.E)(v)[1]),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMTextSymbol",angle:a,blockProgression:2,depth3D:1,extrapolateBaselines:!0,fontEffects:0,fontEncoding:1,fontFamilyName:e||"Arial",fontStyleName:N(i,r),fontType:0,haloSize:c,height:n,hinting:1,horizontalAlignment:D(null!=f?f:"center"),kerning:_,letterWidth:100,ligatures:!0,lineGapType:"Multiple",offsetX:(0,P.NA)(p),offsetY:(0,P.NA)(m),strikethrough:"line-through"===s,underline:"underline"===s,symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:B(h)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:B(l)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:y?1:0,verticalAlignment:O(null!=d?d:"baseline"),verticalGlyphOrientation:0,wordSpacing:100,billboardMode3D:2},textString:v}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}},{key:"fromPictureFillSymbol",value:function(t){var e=t.height,i=t.outline,r=t.width,n=t.xoffset,s=t.xscale,a=t.yoffset,h=t.yscale,o=[],l={type:"CIMPolygonSymbol",symbolLayers:o};if(i){var u=i.cap,c=i.join,f=i.miterLimit,_=i.width;o.push({type:"CIMSolidStroke",color:B(i.color),capStyle:X(u),joinStyle:Y(c),miterLimit:f,width:_})}var v=t.url;"esriPFS"===t.type&&t.imageData&&(v=t.imageData);var d="angle"in t?t.angle:0,p=r*(s||1),m=e*(h||1);return o.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:v,height:m,width:p,offsetX:(0,P.NA)(n),offsetY:(0,P.NA)(a),rotation:(0,P.NA)(-d),colorSubstitutions:null}),l}},{key:"fromSimpleFillSymbol",value:function(t){var e=t.color,i=t.style,r=t.outline,n=[],s={type:"CIMPolygonSymbol",symbolLayers:n},a=null;if(r){var h=r.cap,o=r.join,l=r.style;"solid"!==l&&"none"!==l&&"esriSLSSolid"!==l&&"esriSLSNull"!==l&&(a=[{type:"CIMGeometricEffectDashes",dashTemplate:U(l,h),lineDashEnding:"NoConstraint",scaleDash:!0}]),n.push({type:"CIMSolidStroke",color:B(r.color),capStyle:X(h),joinStyle:Y(o),miterLimit:r.miterLimit,width:r.width,effects:a})}if(i&&"solid"!==i&&"none"!==i&&"esriSFSSolid"!==i&&"esriSFSNull"!==i){var u={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:B(e),capStyle:"Butt",joinStyle:"Miter",width:.75}]},c=0,_=(0,v.fp)(Math.ceil(window.devicePixelRatio)),d=J(i)?8*_:10*_;switch(i){case"vertical":case"esriSFSVertical":c=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":c=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":c=45;break;case"cross":case"esriSFSCross":c=0}n.push({type:"CIMHatchFill",lineSymbol:u,offsetX:0,offsetY:0,rotation:c,separation:d}),"cross"===i||"esriSFSCross"===i?n.push({type:"CIMHatchFill",lineSymbol:(0,f.d9)(u),offsetX:0,offsetY:0,rotation:90,separation:d}):"diagonal-cross"!==i&&"esriSFSDiagonalCross"!==i||n.push({type:"CIMHatchFill",lineSymbol:(0,f.d9)(u),offsetX:0,offsetY:0,rotation:45,separation:d})}else!i||"solid"!==i&&"esriSFSSolid"!==i||n.push({type:"CIMSolidFill",enable:!0,color:B(e)});return s}},{key:"fromSimpleLineSymbol",value:function(e){var i=e.cap,r=e.color,n=e.join,s=e.marker,a=e.miterLimit,h=e.style,o=e.width,l=null;"solid"!==h&&"none"!==h&&"esriSLSSolid"!==h&&"esriSLSNull"!==h&&(l=[{type:"CIMGeometricEffectDashes",dashTemplate:U(h,i),lineDashEnding:"NoConstraint",scaleDash:!0}]);var u=[];if(s){var c;switch(s.placement){case"begin-end":c="Both";break;case"begin":c="JustBegin";break;case"end":c="JustEnd";break;default:c="None"}var f=t.fromSimpleMarker(s,o,r).symbolLayers[0];f.markerPlacement={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:c,offsetAlongLine:0},u.push(f)}return"none"!==h&&"esriSLSNull"!==h&&u.push({type:"CIMSolidStroke",color:B(r),capStyle:X(i),joinStyle:Y(n),miterLimit:a,width:o,effects:l}),{type:"CIMLineSymbol",symbolLayers:u}}},{key:"fromPictureMarker",value:function(t){var e=t.angle,i=t.height,r=t.width,n=t.xoffset,s=t.yoffset,a=t.url;return"esriPMS"===t.type&&t.imageData&&(a=t.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:a,size:i,width:r,offsetX:(0,P.NA)(n),offsetY:(0,P.NA)(s),rotation:(0,P.NA)(-e)}]}}},{key:"fromSimpleMarker",value:function(t,e,i){var r,n=t.style,a=null!=(r=t.color)?r:i;if("path"===n){var h=[];if("outline"in t&&t.outline){var o=t.outline;h.push({type:"CIMSolidStroke",enable:!0,width:(0,p.F2)(Math.round((0,p.Wz)(o.width))),color:B(o.color)})}h.push({type:"CIMSolidFill",enable:!0,color:B(a),path:t.path});var l=q("square"),u=(0,s.Z)(l,2),c=u[0],f=u[1];return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,P.NA)(-t.angle),size:(0,P.NA)(t.size||6),offsetX:(0,P.NA)(t.xoffset),offsetY:(0,P.NA)(t.yoffset),frame:c,markerGraphics:[{type:"CIMMarkerGraphic",geometry:f,symbol:{type:"CIMPolygonSymbol",symbolLayers:h}}]}]}}var _,v=q(n),d=(0,s.Z)(v,2),m=d[0],y=d[1];if(y&&m){var g=[];if("outline"in t&&t.outline){var k=t.outline;g.push({type:"CIMSolidStroke",enable:!0,width:(0,p.F2)(Math.round((0,p.Wz)(k.width))),color:B(k.color)})}else!e||"line-marker"!==t.type||"cross"!==t.style&&"x"!==t.style||g.push({type:"CIMSolidStroke",enable:!0,width:e,color:B(a)});g.push({type:"CIMSolidFill",enable:!0,color:B(a)});var x={type:"CIMPolygonSymbol",symbolLayers:g};_={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,P.NA)(-t.angle),size:(0,P.NA)(t.size||6*e),offsetX:(0,P.NA)(t.xoffset),offsetY:(0,P.NA)(t.yoffset),frame:m,markerGraphics:[{type:"CIMMarkerGraphic",geometry:y,symbol:x}]}]}}return _}},{key:"fromCIMHatchFill",value:function(t){for(var e,i=null!=(e=t.separation)?e:4,r=i/2,n=this._getLineSymbolPeriod(t.lineSymbol)||4;n<4;)n*=2;var s=n/2;return{type:"CIMVectorMarker",frame:{xmin:-s,xmax:s,ymin:-r,ymax:r},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-s,0],[s,0]]]},symbol:t.lineSymbol}],size:i}}},{key:"_getLineSymbolPeriod",value:function(t){if(t){var e=this._getEffectsRepeat(t.effects);if(e)return e;if(t.symbolLayers){var i,r=(0,o.Z)(t.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value,s=this._getEffectsRepeat(n.effects);if(s)return s;if(n){var a=this._getPlacementRepeat(n.markerPlacement);if(a)return a}}}catch(h){r.e(h)}finally{r.f()}}}return 0}},{key:"_getEffectsRepeat",value:function(t){if(t){var e,i=(0,o.Z)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r)switch(r.type){case"CIMGeometricEffectDashes":var n=r.dashTemplate;if(n&&n.length){var s,a=0,h=(0,o.Z)(n);try{for(h.s();!(s=h.n()).done;){a+=s.value}}catch(l){h.e(l)}finally{h.f()}return 1&n.length&&(a*=2),a}break;case"CIMGeometricEffectWave":return r.period;default:L.error("unsupported geometric effect type ".concat(r.type))}}}catch(l){i.e(l)}finally{i.f()}}return 0}},{key:"_getPlacementRepeat",value:function(t){if(t)switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var e=t.placementTemplate;if(e&&e.length){var i,r=0,n=(0,o.Z)(e);try{for(n.s();!(i=n.n()).done;){r+=i.value}}catch(s){n.e(s)}finally{n.f()}return 1&e.length&&(r*=2),r}}return 0}},{key:"fromCIMInsidePolygon",value:function(t){var e,i,r,s,a=t.markerPlacement,h=(0,n.Z)({type:t.type},t);return h.markerPlacement=null,h.anchorPoint=null,!0===a.shiftOddRows?(i=a.stepX/2,r=a.stepY,s=2*a.stepY,e=[{x:-i,y:0},{x:i,y:0},{x:0,y:r},{x:0,y:-r}].map((function(t){return{type:"CIMMarkerGraphic",geometry:t,symbol:{type:"CIMPointSymbol",symbolLayers:[h]}}}))):(i=a.stepX/2,r=a.stepY/2,s=a.stepY,e=[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[h]}}]),{type:"CIMVectorMarker",frame:{xmin:-i,xmax:i,ymin:-r,ymax:r},markerGraphics:e,size:s}}},{key:"getFillColor",value:function(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers){var i,r=(0,o.Z)(e.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value,s=t.getFillColor(n);if(null!=s)return s}}catch(a){r.e(a)}finally{r.f()}}break;case"CIMTextSymbol":return t.getFillColor(e.symbol);case"CIMSolidFill":return e.color}}},{key:"getStrokeColor",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var i,r=(0,o.Z)(e.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value,s=t.getStrokeColor(n);if(void 0!==s)return s}}catch(a){r.e(a)}finally{r.f()}}break;case"CIMTextSymbol":return t.getStrokeColor(e.symbol);case"CIMSolidStroke":return e.color}}},{key:"getStrokeWidth",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var i,r=(0,o.Z)(e.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value,s=t.getStrokeWidth(n);if(void 0!==s)return s}}catch(a){r.e(a)}finally{r.f()}}break;case"CIMTextSymbol":return t.getStrokeWidth(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}},{key:"getSize",value:function(e){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var i=0;if(e.symbolLayers){var r,n=(0,o.Z)(e.symbolLayers);try{for(n.s();!(r=n.n()).done;){var s=r.value,a=t.getSize(s);a>i&&(i=a)}}catch(h){n.e(h)}finally{n.f()}}return i;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":return e.width;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":return e.size}}},{key:"getMarkerScaleRatio",value:function(t){if(t&&"CIMVectorMarker"===t.type&&!1!==t.scaleSymbolsProportionally&&t.frame){var e=t.frame.ymax-t.frame.ymin;return t.size/e}return 1}}]),t}(),G=function(){function t(){(0,a.Z)(this,t)}return(0,h.Z)(t,null,[{key:"rasterizeSimpleFill",value:function(t,e,i){"solid"!==e&&"none"!==e&&"esriSFSSolid"!==e&&"esriSFSNull"!==e||console.error("Unexpected: style does not require rasterization");var r=(0,v.fp)(Math.ceil(i)),n=J(e)?8*r:16*r,s=2*r;t.width=n,t.height=n;var a=t.getContext("2d");a.strokeStyle="#FFFFFF",a.lineWidth=r,a.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(a.moveTo(n/2,-s),a.lineTo(n/2,n+s)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(a.moveTo(-s,n/2),a.lineTo(n+s,n/2)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSForwardDiagonal"!==e||(a.moveTo(-s,-s),a.lineTo(n+s,n+s),a.moveTo(n-s,-s),a.lineTo(n+s,s),a.moveTo(-s,n-s),a.lineTo(s,n+s)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSBackwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(a.moveTo(n+s,-s),a.lineTo(-s,n+s),a.moveTo(s,-s),a.lineTo(-s,s),a.moveTo(n+s,n-s),a.lineTo(n-s,n+s)),a.stroke();for(var h,o=a.getImageData(0,0,t.width,t.height),l=new Uint8Array(o.data),u=0;u<l.length;u+=4)h=l[u+3]/255,l[u]=l[u]*h,l[u+1]=l[u+1]*h,l[u+2]=l[u+2]*h;return[l,t.width,t.height]}},{key:"rasterizeSimpleLine",value:function(t,e){return this.rasterizeDash(t,e)}},{key:"rasterizeDash",value:function(t,e){var i="Butt"===e,n="Square"===e,s=!i&&!n;t.length%2==1&&(t=[].concat((0,r.Z)(t),(0,r.Z)(t)));var a,h=15.5,l=0,u=(0,o.Z)(t);try{for(u.s();!(a=u.n()).done;){l+=a.value}}catch(L){u.e(L)}finally{u.f()}var f,_=Math.round(l*h),v=new Float32Array(31*_),d=7.75,p=0,m=0,y=.5,g=!0,k=(0,o.Z)(t);try{for(k.s();!(f=k.n()).done;){var P=f.value;for(p=m,m+=P*h;y<=m;){for(var x=.5;x<31;){var M=(x-.5)*_+y-.5,b=s?(x-h)*(x-h):Math.abs(x-h);v[M]=g?i?Math.max(Math.max(p+d-y,b),Math.max(y-m+d,b)):b:s?Math.min((y-p)*(y-p)+b,(y-m)*(y-m)+b):n?Math.min(Math.max(y-p,b),Math.max(m-y,b)):Math.min(Math.max(y-p+d,b),Math.max(m+d-y,b)),x++}y++}g=!g}}catch(L){k.e(L)}finally{k.f()}for(var S=v.length,w=new Uint8Array(4*S),C=0;C<S;++C){var I=(s?Math.sqrt(v[C]):v[C])/h;(0,c.I)(I,w,4*C)}return[w,_,31]}}]),t}(),H=function(){function t(){(0,a.Z)(this,t)}return(0,h.Z)(t,null,[{key:"findApplicableOverrides",value:function(e,i,r){if(i){if(e.primitiveName){var n,s=!1,a=(0,o.Z)(r);try{for(a.s();!(n=a.n()).done;){if(n.value.primitiveName===e.primitiveName){s=!0;break}}}catch(M){a.e(M)}finally{a.f()}if(!s){var h,l=(0,o.Z)(i);try{for(l.s();!(h=l.n()).done;){var u=h.value;u.primitiveName===e.primitiveName&&r.push(u)}}catch(M){l.e(M)}finally{l.f()}}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var c,f=(0,o.Z)(e.effects);try{for(f.s();!(c=f.n()).done;){var _=c.value;t.findApplicableOverrides(_,i,r)}}catch(M){f.e(M)}finally{f.f()}}if(e.symbolLayers){var v,d=(0,o.Z)(e.symbolLayers);try{for(d.s();!(v=d.n()).done;){var p=v.value;t.findApplicableOverrides(p,i,r)}}catch(M){d.e(M)}finally{d.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects){var m,y=(0,o.Z)(e.effects);try{for(y.s();!(m=y.n()).done;){var g=m.value;t.findApplicableOverrides(g,i,r)}}catch(M){y.e(M)}finally{y.f()}}if(e.markerPlacement&&t.findApplicableOverrides(e.markerPlacement,i,r),"CIMVectorMarker"===e.type){if(e.markerGraphics){var k,P=(0,o.Z)(e.markerGraphics);try{for(P.s();!(k=P.n()).done;){var x=k.value;t.findApplicableOverrides(x,i,r),t.findApplicableOverrides(x.symbol,i,r)}}catch(M){P.e(M)}finally{P.f()}}}else"CIMCharacterMarker"===e.type?t.findApplicableOverrides(e.symbol,i,r):"CIMHatchFill"===e.type&&t.findApplicableOverrides(e.lineSymbol,i,r)}}}},{key:"applyOverrides",value:function(e,i,r,n){if(i){var s=function(t){return t?t.charAt(0).toLowerCase()+t.substr(1):t};if(e.primitiveName){var a,h=(0,o.Z)(i);try{for(h.s();!(a=h.n()).done;){var l=a.value;if(l.primitiveName===e.primitiveName){var u=s(l.propertyName);if(n&&n.push({cim:e,nocapPropertyName:u,value:e[u]}),l.expression&&(l.value=t.toValue(l.propertyName,l.expression)),r){var c,f=!1,_=(0,o.Z)(r);try{for(_.s();!(c=_.n()).done;){c.value.primitiveName===e.primitiveName&&(f=!0)}}catch(w){_.e(w)}finally{_.f()}f||r.push(l)}e[u]=l.value}}}catch(w){h.e(w)}finally{h.f()}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var v,d=(0,o.Z)(e.effects);try{for(d.s();!(v=d.n()).done;){var p=v.value;t.applyOverrides(p,i,r,n)}}catch(w){d.e(w)}finally{d.f()}}if(e.symbolLayers){var m,y=(0,o.Z)(e.symbolLayers);try{for(y.s();!(m=y.n()).done;){var g=m.value;t.applyOverrides(g,i,r,n)}}catch(w){y.e(w)}finally{y.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects){var k,P=(0,o.Z)(e.effects);try{for(P.s();!(k=P.n()).done;){var x=k.value;t.applyOverrides(x,i,r,n)}}catch(w){P.e(w)}finally{P.f()}}if("CIMVectorMarker"===e.type&&e.markerGraphics){var M,b=(0,o.Z)(e.markerGraphics);try{for(b.s();!(M=b.n()).done;){var S=M.value;t.applyOverrides(S,i,r,n),t.applyOverrides(S.symbol,i,r,n)}}catch(w){b.e(w)}finally{b.f()}}}}}},{key:"restoreOverrides",value:function(t){var e,i=(0,o.Z)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.cim[r.nocapPropertyName]=r.value}}catch(n){i.e(n)}finally{i.f()}}},{key:"buildOverrideKey",value:function(t){var e,i="",r=(0,o.Z)(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;void 0!==n.value&&(i+="".concat(n.primitiveName).concat(n.propertyName).concat(JSON.stringify(n.value)))}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"toValue",value:function(t,e){if("DashTemplate"===t)return e.split(" ").map((function(t){return Number(t)}));if("Color"===t){var i=new l.Z(e).toRgba();return i[3]*=255,i}return e}}]),t}(),X=function(t){if(!t)return"Butt";switch(t){case"butt":return"Butt";case"square":return"Square";case"round":return"Round"}},Y=function(t){if(!t)return"Miter";switch(t){case"miter":return"Miter";case"round":return"Round";case"bevel":return"Bevel"}},D=function(t){if(!t)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center";case"justify":return"Justify"}},O=function(t){if(!t)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},B=function(t){return t?[t.r,t.g,t.b,255*t.a]:[0,0,0,0]},N=function(t,e){var i=W(e),r=V(t);return i&&r?"".concat(i,"-").concat(r):"".concat(i).concat(r)},W=function(t){if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},V=function(t){if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},U=function(t,e){var i="butt"===e;switch(t){case"dash":case"esriSLSDash":return i?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return i?[4,3,1,3]:[3,4,0,4];case"dot":case"esriSLSDot":return i?[1,3]:[0,4];case"long-dash":case"esriSLSLongDash":return i?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return i?[8,3,1,3]:[7,4,0,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return i?[8,3,1,3,1,3]:[7,4,0,4,0,4];case"short-dash":case"esriSLSShortDash":return i?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return i?[4,1,1,1]:[3,2,0,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return i?[4,1,1,1,1,1]:[3,2,0,2,0,2];case"short-dot":case"esriSLSShortDot":return i?[1,1]:[0,2];case"solid":case"esriSLSSolid":case"none":return L.error("Unexpected: style does not require rasterization"),[0,0];default:return L.error("Tried to rasterize SLS, but found an unexpected style: ".concat(t,"!")),[0,0]}};var q=function(t){var e,i,r=50,n=t;if("circle"===n||"esriSMSCircle"===n){var s=Math.acos(.995),a=Math.ceil(S/s/4);0===a&&(a=1),s=w/a,a*=4;var h=[];h.push([r,0]);for(var o=1;o<a;o++)h.push([r*Math.cos(o*s),-r*Math.sin(o*s)]);h.push([r,0]),e={rings:[h]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("cross"===n||"esriSMSCross"===n){e={rings:[[[0,r],[0,0],[r,0],[r,-0],[0,-0],[0,-r],[-0,-r],[-0,-0],[-r,-0],[-r,0],[-0,0],[-0,r],[0,r]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("diamond"===n||"esriSMSDiamond"===n)e={rings:[[[-r,0],[0,r],[r,0],[0,-r],[-r,0]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("square"===n||"esriSMSSquare"===n)e={rings:[[[-r,-r],[-r,r],[r,r],[r,-r],[-r,-r]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("x"===n||"esriSMSX"===n){e={rings:[[[0,0],[50,r],[r,50],[0,0],[r,-50],[50,-r],[0,-0],[-50,-r],[-r,-50],[-0,0],[-r,50],[-50,r],[0,0]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("triangle"===n||"esriSMSTriangle"===n){var l=57.735026918962575,u=-l,c=2/3*100,f=c-100;e={rings:[[[u,f],[0,c],[l,f],[u,f]]]},i={xmin:u,ymin:f,xmax:l,ymax:c}}else"arrow"===n&&(e={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r});return[i,e]},J=function(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t}},691:function(t,e,i){i.d(e,{Z:function(){return s}});var r=i(15671),n=i(43144),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,t),this.x=e,this.y=i,this.width=n,this.height=s}return(0,n.Z)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}()},22532:function(t,e,i){i.d(e,{d:function(){return o}});var r=i(29439),n=i(37762),s=i(15671),a=i(43144),h=i(17842);var o=function(){function t(){(0,s.Z)(this,t)}return(0,a.Z)(t,[{key:"rasterizeText",value:function(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var i=this._textRasterizationCanvas,r=i.getContext("2d");this.setFontProperties(r,e),this.parameters=e,this.textLines=t.split(/\r?\n/),this.lineHeight=this.computeLineHeight();var s=this.computeTextWidth(r,e),a=e.font,h=a.decoration,o=a.weight;this.lineThroughWidthOffset=h&&"line-through"===h?.1*this.lineHeight:0;var l=this.lineHeight*this.textLines.length;i.width=s+2*this.lineThroughWidthOffset,i.height=l,this.renderedLineHeight=Math.round(this.lineHeight*e.pixelRatio),this.renderedHaloSize=e.halo.size*e.pixelRatio,this.renderedWidth=s*e.pixelRatio,this.renderedHeight=l*e.pixelRatio,this.lineThroughWidthOffset*=e.pixelRatio,this.fillStyle=function(t){return"rgba(".concat(t.slice(0,3).toString(),",").concat(t[3],")")}(e.color),this.haloStyle=function(t){return"rgb(".concat(t.slice(0,3).toString(),")")}(e.halo.color);var u=this.renderedLineHeight,c=this.renderedHaloSize;this.setFontProperties(r,e);var f=function(t,e){return"center"===t?.5*e:"right"===t?e:0}(r.textAlign,this.renderedWidth)+c,_=c,v=c>0,d=this.lineThroughWidthOffset,p=0;v&&this.renderHalo(r,f,_,d,p,e),p+=_,d+=f;var m,y=(0,n.Z)(this.textLines);try{for(y.s();!(m=y.n()).done;){var g=m.value;r.globalCompositeOperation="destination-out",r.fillStyle="rgb(0, 0, 0)",r.fillText(g,d,p),r.globalCompositeOperation="source-over",r.fillStyle=this.fillStyle,r.fillText(g,d,p),h&&"none"!==h&&this.renderDecoration(r,d,p,h,o),p+=u}}catch(w){y.e(w)}finally{y.f()}var k=this.renderedWidth+2*this.lineThroughWidthOffset,P=this.renderedHeight,x=r.getImageData(0,0,k,P),M=new Uint8Array(x.data);if(e.premultiplyColors)for(var b,S=0;S<M.length;S+=4)b=M[S+3]/255,M[S]=M[S]*b,M[S+1]=M[S+1]*b,M[S+2]=M[S+2]*b;return{size:[k,P],image:new Uint32Array(M.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"renderHalo",value:function(t,e,i,r,n,s){var a=this.renderedWidth,h=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=a,this._haloRasterizationCanvas.height=h;var o=this._haloRasterizationCanvas,l=o.getContext("2d");l.clearRect(0,0,a,h),this.setFontProperties(l,s);var u=s.font,c=u.decoration,f=u.weight;l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;var _=this.renderedHaloSize<3;l.lineJoin=_?"miter":"round",_?this.renderHaloEmulated(l,e,i,c,f):this.renderHaloNative(l,e,i,c,f),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(o,0,0,a,h,r,n,a,h),t.globalAlpha=1}},{key:"renderHaloEmulated",value:function(t,e,i,s,a){var h,o=this.renderedLineHeight,u=this.renderedHaloSize,c=(0,n.Z)(this.textLines);try{for(c.s();!(h=c.n()).done;){var f,_=h.value,v=(0,n.Z)(l);try{for(v.s();!(f=v.n()).done;){var d=(0,r.Z)(f.value,2),p=d[0],m=d[1];t.fillText(_,e+u*p,i+u*m)}}catch(y){v.e(y)}finally{v.f()}s&&"none"!==s&&this.renderDecoration(t,e,i,s,a),i+=o}}catch(y){c.e(y)}finally{c.f()}}},{key:"renderHaloNative",value:function(t,e,i,r,s){var a,h=this.renderedLineHeight,o=this.renderedHaloSize,l=(0,n.Z)(this.textLines);try{for(l.s();!(a=l.n()).done;){for(var u=a.value,c=2*o,f=0;f<5;f++){var _=.6+.1*f;t.lineWidth=_*c,t.strokeText(u,e,i),r&&"none"!==r&&this.renderDecoration(t,e,i,r,s)}i+=h}}catch(v){l.e(v)}finally{l.f()}}},{key:"setFontProperties",value:function(t,e){var i,r=e.font,n="".concat(r.style," ").concat(r.weight," ").concat((0,h.F2)(e.size*e.pixelRatio),"px ").concat(r.family,", sans-serif");switch(t.font=n,t.textBaseline="top",e.horizontalAlignment){case"left":default:i="left";break;case"right":i="right";break;case"center":i="center"}t.textAlign=i}},{key:"computeTextSize",value:function(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var i=this._textRasterizationCanvas,r=i.getContext("2d");this.setFontProperties(r,e),this.parameters=e,this.textLines=t.split(/\r?\n/),this.lineHeight=this.computeLineHeight();var n=this.computeTextWidth(r,e),s=this.lineHeight*this.textLines.length;return i.width=n,i.height=s,[n*e.pixelRatio,s*e.pixelRatio]}},{key:"computeTextWidth",value:function(t,e){var i,r=0,s=(0,n.Z)(this.textLines);try{for(s.s();!(i=s.n()).done;){var a=i.value;r=Math.max(r,t.measureText(a).width)}}catch(o){s.e(o)}finally{s.f()}var h=e.font;return("italic"===h.style||"oblique"===h.style||"string"==typeof h.weight&&("bold"===h.weight||"bolder"===h.weight)||"number"==typeof h.weight&&h.weight>600)&&(r+=.3*t.measureText("w").width),r+=2*this.parameters.halo.size,Math.round(r)}},{key:"computeLineHeight",value:function(){var t=1.275*this.parameters.size,e=this.parameters.font.decoration;return e&&"underline"===e&&(t*=1.3),Math.round(t+2*this.parameters.halo.size)}},{key:"renderDecoration",value:function(t,e,i,r,n){var s=.9*this.lineHeight,a="bold"===n?.06:"bolder"===n?.09:.04;switch(t.textAlign){case"center":e-=this.renderedWidth/2;break;case"right":e-=this.renderedWidth}var h=t.textBaseline;if("underline"===r)switch(h){case"top":i+=s;break;case"middle":i+=s/2}else if("line-through"===r)switch(h){case"top":i+=s/1.5;break;case"middle":i+=s/3}t.save(),t.beginPath(),t.strokeStyle=t.fillStyle,t.lineWidth=Math.ceil(s*a),t.moveTo(e-this.lineThroughWidthOffset,i),t.lineTo(e+this.renderedWidth+2*this.lineThroughWidthOffset,i),t.stroke(),t.restore()}}]),t}();for(var l=[],u=0;u<360;u+=22.5)l.push([Math.cos(Math.PI*u/180),Math.sin(Math.PI*u/180)])},38999:function(t,e,i){var r,n;function s(t){switch(t){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function a(t){switch(t){case"top":return n.Top;case"middle":return n.Center;case"baseline":return n.Baseline;case"bottom":return n.Bottom}}function h(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,n.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,n.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,n.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,n.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,n.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,n.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,n.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,n.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,n.Top];default:return console.debug("Found invalid placement type ".concat(t)),[r.Center,n.Center]}}function o(t){switch(t){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug("Found invalid horizontal alignment ".concat(t)),0}}function l(t){switch(t){case n.Top:return 1;case n.Center:return 0;case n.Bottom:case n.Baseline:return-1;default:return console.debug("Found invalid vertical alignment ".concat(t)),0}}function u(t){switch(t){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}i.d(e,{M7:function(){return r},TR:function(){return n},qv:function(){return h},Hd:function(){return u},kH:function(){return s},g:function(){return o},b7:function(){return a},tf:function(){return l}}),function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"}(r||(r={})),function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"}(n||(n={}))},47975:function(t,e,i){i.d(e,{Nr:function(){return P}});var r=i(37762),n=i(15671),s=i(43144),a=i(22018),h=i(11245),o=i(88396),l=i(15245),u=i(38999),c=i(73271),f=i(12233),_=function(){function t(e,i,r,s){(0,n.Z)(this,t),this.center=(0,l.f)(e,i),this.centerT=(0,l.c)(),this.halfWidth=r/2,this.halfHeight=s/2,this.width=r,this.height=s}return(0,s.Z)(t,[{key:"x",get:function(){return this.center[0]},set:function(t){this.center[0]=t}},{key:"y",get:function(){return this.center[1]},set:function(t){this.center[1]=t}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"serialize",value:function(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}},{key:"findCollisionDelta",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=Math.abs(t.centerT[0]-this.centerT[0]),r=Math.abs(t.centerT[1]-this.centerT[1]),n=(t.halfWidth+this.halfWidth+e)/i,s=(t.halfHeight+this.halfHeight+e)/r,a=Math.min(n,s);return Math.log2(a)}},{key:"extend",value:function(t){var e=Math.min(this.xmin,t.xmin),i=Math.min(this.ymin,t.ymin),r=Math.max(this.xmax,t.xmax)-e,n=Math.max(this.ymax,t.ymax)-i,s=e+r/2,a=i+n/2;this.width=r,this.height=n,this.halfWidth=r/2,this.halfHeight=n/2,this.x=s,this.y=a}}],[{key:"deserialize",value:function(e){return new t(e.readF32(),e.readF32(),e.readInt32(),e.readInt32())}}]),t}(),v=Math.PI/180,d=function(){function t(e,i,r,s){(0,n.Z)(this,t),this._rotationT=(0,h.c)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;var a=r.rect,o=new Float32Array(8);e*=s,i*=s;var l=r.code?a.width*s:r.metrics.width,u=r.code?a.height*s:r.metrics.height;o[0]=e,o[1]=i,o[2]=e+l,o[3]=i,o[4]=e,o[5]=i+u,o[6]=e+l,o[7]=i+u,this._data=o,this._setTextureCoords(a),this._scale=s,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+l,i+u)}return(0,s.Z)(t,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t,(0,a.i)(this._rotationT),(0,a.r)(this._rotationT,this._rotationT,-t),this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){return this._offsets||this._setOffsets(this._data),this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){if(!this._bounds){var t=this._mosaic.metrics,e=t.height,i=t.width*this._scale,r=Math.abs(e)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+i,n[3]=this.y,n[4]=this.x,n[5]=this.y+r,n[6]=this.x+i,n[7]=this.y+r;var s=(0,a.m)((0,h.c)(),this._rotationT,this._T);(0,h.t)(n,n,s);for(var o=1/0,l=1/0,u=0,c=0,f=0;f<4;f++){var v=n[2*f],d=n[2*f+1];o=Math.min(o,v),l=Math.min(l,d),u=Math.max(u,v),c=Math.max(c,d)}var p=u-o,m=c-l,y=o+p/2,g=l+m/2;this._bounds=new _(y,g,p,m)}return this._bounds}},{key:"setTransform",value:function(t){this._T=t,this._offsets=null}},{key:"_setOffsets",value:function(t){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});var e=this._offsets,i=new Float32Array(8),r=(0,a.m)((0,h.c)(),this._rotationT,this._T);(0,h.t)(i,t,r),e.upperLeft=(0,c.UJ)(8*i[0],8*i[1]),e.upperRight=(0,c.UJ)(8*i[2],8*i[3]),e.lowerLeft=(0,c.UJ)(8*i[4],8*i[5]),e.lowerRight=(0,c.UJ)(8*i[6],8*i[7])}},{key:"_setTextureCoords",value:function(t){var e=t.x,i=t.y,r=t.width,n=t.height;this._texcoords={upperLeft:(0,c.UJ)(e,i),upperRight:(0,c.UJ)(e+r,i),lowerLeft:(0,c.UJ)(e,i+n),lowerRight:(0,c.UJ)(e+r,i+n)}}}]),t}(),p=function(t,e){return{code:0,page:0,sdf:!0,rect:new f.Z(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}}},m=function(){function t(e,i,s){(0,n.Z)(this,t),this._rotation=0,this._decorate(e,i,s),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=0!==s.angle,this._T=this._createGlyphTransform(this.bounds,s);var a,h=(0,r.Z)(e);try{for(h.s();!(a=h.n()).done;){a.value.setTransform(this._T)}}catch(o){h.e(o)}finally{h.f()}}return(0,s.Z)(t,[{key:"setRotation",value:function(t){if(0!==t||0!==this._rotation){this._rotation=t;var e=this._T,i=(0,a.b)((0,h.c)(),t);(0,a.m)(e,i,e);var n,s=(0,r.Z)(this.glyphs);try{for(s.s();!(n=s.n()).done;){n.value.setTransform(this._T)}}catch(o){s.e(o)}finally{s.f()}}}},{key:"_decorate",value:function(t,e,i){if(i.decoration&&"none"!==i.decoration&&t.length){var n,s=i.scale,a="underline"===i.decoration?30:20,h=t[0].textureBinding,o=(0,r.Z)(e);try{for(o.s();!(n=o.n()).done;){var l=n.value,u=l.startX*s,c=l.startY*s,f=(l.width+l.glyphWidthEnd)*s;t.push(new d(u,c+a*s,p(f,h),1))}}catch(_){o.e(_)}finally{o.f()}}}},{key:"boundsT",get:function(){var t=this.bounds,e=(0,o.s)((0,l.c)(),t.x,t.y);if((0,o.t)(e,e,this._T),this._hasRotation){var i=Math.max(t.width,t.height);return new _(e[0],e[1],i,i)}return new _(e[0],e[1],t.width,t.height)}},{key:"_createBounds",value:function(t){var e,i=1/0,n=1/0,s=0,a=0,h=(0,r.Z)(t);try{for(h.s();!(e=h.n()).done;){var o=e.value;i=Math.min(i,o.xTopLeft),n=Math.min(n,o.yTopLeft),s=Math.max(s,o.xTopLeft+o.width),a=Math.max(a,o.yBottomRight)}}catch(c){h.e(c)}finally{h.f()}var l=s-i,u=a-n;return new _(i+l/2,n+u/2,l,u)}},{key:"_createGlyphTransform",value:function(t,e){var i=v*e.angle,r=(0,h.c)(),n=(0,l.c)();return(0,a.t)(r,r,(0,o.s)(n,e.xOffset,-e.yOffset)),e.isCIM?(0,a.r)(r,r,i):((0,a.t)(r,r,(0,o.s)(n,t.x,t.y)),(0,a.r)(r,r,i),(0,a.t)(r,r,(0,o.s)(n,-t.x,-t.y))),r}}]),t}(),y=(0,s.Z)((function t(e,i,r,s,a,h){(0,n.Z)(this,t),this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=s,this.yMin=a,this.yMax=h})),g=function(t){return 10===t},k=function(t){return 32===t};function P(t,e,i){for(var r=i.scale,n=new Array,s=function(t,e,i){for(var r=new Array,n=1/i.scale,s=i.maxLineWidth*n,a=e?t.length-1:0,h=e?-1:t.length,o=e?-1:1,l=a,u=0,c=0,f=l,_=f,v=0,d=1/0,p=0;l!==h;){var m=t[l],P=m.code,x=m.metrics,M=Math.abs(x.top);if(g(P)||k(P)||(d=Math.min(d,M),p=Math.max(p,M+x.height)),g(P))l!==a&&(r.push(new y(t,f,l-o,u,d,p)),d=1/0,p=0),u=0,f=l+o,_=l+o,c=0;else if(k(P))_=l+o,c=0,v=x.advance,u+=x.advance;else if(u>s){if(_!==f){var b=_-2*o;u-=v,r.push(new y(t,f,b,u-c,d,p)),d=1/0,p=0,f=_,u=c}else r.push(new y(t,f,l-o,u,d,p)),d=1/0,p=0,f=l,_=l,u=0;u+=x.advance,c+=x.advance}else u+=x.advance,c+=x.advance;l+=o}var S=new y(t,f,l-o,u,d,p);return S.start>=0&&S.end<t.length&&r.push(S),r}(t,e,i),a=function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r].width;i=Math.max(n,i)}var s="underline"===e.decoration?4:0,a=t[0].yMin;return{x:0,y:a,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+s-a,width:i}}(s,i),h=i.vAlign,o=i.hAlign,l=h===u.TR.Baseline?1:0,c=l?0:h-1,f=(1-l)*-a.y+c*(a.height/2)+-26*(l?1:0),_=0;_<s.length;_++){var v=s[_],p=v.start,P=v.end,x=-1*(o+1)*(v.width/2)-3,M=_*i.lineHeight+f-3;s[_].startX=x,s[_].startY=M;for(var b=p;b<=P;b++){var S=t[b];if(!g(S.code)){var w=new d(x+S.metrics.left,M-S.metrics.top,S,r);x+=S.metrics.advance,n.push(w)}}}return new m(n,s,i)}}}]);
//# sourceMappingURL=8915.0aab934d.chunk.js.map