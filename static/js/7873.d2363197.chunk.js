"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[7873],{57873:function(e,i,r){r.r(i),r.d(i,{default:function(){return m}});var t=r(15671),n=r(43144),a=r(60136),s=r(54062),l=r(27366),o=(r(32718),r(25243),r(63780),r(93169),r(75366),r(69912)),u=r(1413),h=r(37762),d=r(11752),c=r(61120),y=r(64510),v=r(8548),f=function(e){(0,a.Z)(r,e);var i=(0,s.Z)(r);function r(){var e;return(0,t.Z)(this,r),(e=i.apply(this,arguments)).requiresDedicatedFBO=!1,e}return(0,n.Z)(r,[{key:"dispose",value:function(){}},{key:"doRender",value:function(e){var i=this.createRenderParams(e),r=i.context,t=i.painter,n=i.profiler;this._prevFBO=r.getBoundFramebufferObject(),n.recordContainerStart(this.name);var a=this._getFbo(i),s=t.getRenderTarget();r.bindFramebuffer(a),t.setRenderTarget(a),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);var l,o=(0,h.Z)(this.children);try{for(o.s();!(l=o.n()).done;){l.value.beforeRender(e)}}catch(f){o.e(f)}finally{o.f()}var u,d=(0,h.Z)(this.children);try{for(d.s();!(u=d.n()).done;){u.value.processRender(i)}}catch(f){d.e(f)}finally{d.f()}var c,y=(0,h.Z)(this.children);try{for(y.s();!(c=y.n()).done;){c.value.afterRender(e)}}catch(f){y.e(f)}finally{y.f()}t.setRenderTarget(s),t.releaseFbo(a),r.bindFramebuffer(this._prevFBO),t.beforeRenderLayer(i,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),t.blitTexture(r,a.colorTexture,v.cw.NEAREST),t.compositeLayer(i,this.computedOpacity),n.recordContainerEnd()}},{key:"createRenderParams",value:function(e){return(0,u.Z)((0,u.Z)({},(0,d.Z)((0,c.Z)(r.prototype),"createRenderParams",this).call(this,e)),{},{blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1})}},{key:"_getFbo",value:function(e){var i=e.context,r=e.painter,t=i.getViewport(),n=t.width,a=t.height;return r.acquireFbo(n,a)}}]),r}(y.Z),b=r(95986),p=r(81608),w=r(60354),V=r(49861),_=function(e){(0,a.Z)(r,e);var i=(0,s.Z)(r);function r(e){var n;return(0,t.Z)(this,r),(n=i.call(this,e)).type="group",n.layerViews=new p.Z,n}return(0,n.Z)(r,[{key:"initialize",value:function(){var e=this;this.handles.add([this.layerViews.on("change",(function(i){return e._layerViewsChangeHandler(i)})),this.layer.watch("visibilityMode",(function(){return e._visibilityModeHandler()}),!0),this.watch("visible",(function(){return e._visibleHandler()}),!0)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}},{key:"layerViews",set:function(e){this._set("layerViews",(0,w.Z)(e,this._get("layerViews")))}},{key:"updatingProgress",get:function(){return 0===this.layerViews.length?1:this.layerViews.reduce((function(e,i){return e+i.updatingProgress}),0)/this.layerViews.length}},{key:"isUpdating",value:function(){return this.layerViews.some((function(e){return e.updating}))}},{key:"_hasLayerViewVisibleOverrides",value:function(){return this.layerViews.some((function(e){return e._isOverridden("visible")}))}},{key:"_findLayerViewForLayer",value:function(e){return e&&this.layerViews.find((function(i){return i.layer===e}))}},{key:"_firstVisibleOnLayerOrder",value:function(){var e=this,i=this.layer.layers.find((function(i){var r=e._findLayerViewForLayer(i);return r&&r.visible}));return i&&this._findLayerViewForLayer(i)}},{key:"_enforceExclusiveVisibility",value:function(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((function(i){i.visible=i===e})))}},{key:"_layerViewsChangeHandler",value:function(e){var i=this;this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map((function(e){return e.watch("visible",(function(r){return i._layerViewVisibleHandler(r,e)}),!0)})).toArray(),"grouplayerview:visible");var r=e.added[e.added.length-1],t=null;r&&r.visible&&(t=r),this._enforceVisibility(t)}},{key:"_enforceVisibility",value:function(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":var i=this.visible;this.layerViews.forEach((function(e){e.visible=i}));break;case"exclusive":this._enforceExclusiveVisibility(e)}}},{key:"_visibilityModeHandler",value:function(){this._enforceVisibility()}},{key:"_layerViewVisibleHandler",value:function(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":e!==this.visible&&(i.visible=this.visible);break;case"exclusive":this._enforceExclusiveVisibility(e&&i)}}},{key:"_visibleHandler",value:function(){var e;this._hasLayerViewVisibleOverrides()&&"inherited"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}}]),r}(r(67581).Z);(0,l._)([(0,V.Cb)({cast:w.R})],_.prototype,"layerViews",null),(0,l._)([(0,V.Cb)({readOnly:!0})],_.prototype,"updatingProgress",null),(0,l._)([(0,V.Cb)()],_.prototype,"view",void 0);var g=_=(0,l._)([(0,o.j)("esri.views.layers.GroupLayerView")],_),k=function(e){(0,a.Z)(r,e);var i=(0,s.Z)(r);function r(){var e;return(0,t.Z)(this,r),(e=i.apply(this,arguments)).container=new f,e}return(0,n.Z)(r,[{key:"attach",value:function(){var e=this;this._updateStageChildren(),this.handles.add(this.layerViews.on("after-changes",(function(){return e._updateStageChildren()})),"grouplayerview2d")}},{key:"detach",value:function(){this.handles.remove("grouplayerview2d"),this.container.removeAllChildren()}},{key:"update",value:function(e){}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){}},{key:"_updateStageChildren",value:function(){var e=this;this.container.removeAllChildren(),this.layerViews.forEach((function(i,r){return e.container.addChildAt(i.container,r)}))}}]),r}((0,b.y)(g)),m=k=(0,l._)([(0,o.j)("esri.views.2d.layers.GroupLayerView2D")],k)}}]);
//# sourceMappingURL=7873.d2363197.chunk.js.map