"use strict";(self.webpackChunkfield_sustainability_helper=self.webpackChunkfield_sustainability_helper||[]).push([[5886],{35886:function(t,e,n){n.r(e),n.d(e,{loadGLTFMesh:function(){return E}});var r=n(37762),o=n(15861),a=n(87757),u=n(51995),i=n(76200),c=n(77427),s=n(92026),l=n(22753),f=n(11873),p=n(71353),d=n(67077),m=n(64995),g=n(11587),v=n(79694),h=n(27474),C=n(25158),x=n(32035),w=n(19093),y=n(17054),b=n(57898),A=n(27053),S=n(56474),M=n(32315),Z=n(46962),k=n(68845),B=n(92770),T=n(69618),F=n(19131);function E(t,e,n){return W.apply(this,arguments)}function W(){return(W=(0,o.Z)(a.mark((function t(e,n,o){var u,i,c,l,f,p,d,m,g,v,C,x,w,y,M,Z,k;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=new A.C(R(o)),t.next=3,(0,S.z)(u,n,o,!0);case 3:i=t.sent.model,c=i.lods.shift(),l=new Map,f=new Map,i.textures.forEach((function(t,e){return l.set(e,D(t))})),i.materials.forEach((function(t,e){return f.set(e,I(t,l))})),p=z(c),d=(0,r.Z)(p.parts);try{for(d.s();!(m=d.n()).done;)g=m.value,L(p,g,f)}catch(a){d.e(a)}finally{d.f()}return v=p.vertexAttributes,C=v.position,x=v.normal,w=v.tangent,y=v.color,M=v.texCoord0,Z={position:C.typedBuffer,normal:(0,s.pC)(x)?x.typedBuffer:null,tangent:(0,s.pC)(w)?w.typedBuffer:null,uv:(0,s.pC)(M)?M.typedBuffer:null,color:(0,s.pC)(y)?y.typedBuffer:null},k=(0,b.w1)(Z,e,o),t.abrupt("return",{transform:k.transform,components:p.components,spatialReference:e.spatialReference,vertexAttributes:new h.ZP({position:k.vertexAttributes.position,normal:k.vertexAttributes.normal,tangent:k.vertexAttributes.tangent,color:Z.color,uv:Z.uv})});case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return null!=t&&t.resolveFile?{busy:!1,request:function(){var e=(0,o.Z)(a.mark((function e(n,r,o){var u,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.resolveFile(n),c="image"===r?"image":"binary"===r?"array-buffer":"json",e.next=3,(0,i.default)(u,{responseType:c,signal:(0,s.pC)(o)?o.signal:null});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}:null}function _(t,e){if((0,s.Wi)(t))return"-";var n=t.typedBuffer;return"".concat((0,c.s1)(e,n.buffer,(function(){return e.size})),"/").concat(n.byteOffset,"/").concat(n.byteLength)}function z(t){var e,n=0,o={color:!1,tangent:!1,normal:!1,texCoord0:!1},a=new Map,u=new Map,i=[],l=(0,r.Z)(t.parts);try{var f=function(){var t=e.value,r=t.attributes,l=r.position,f=r.normal,p=r.color,d=r.tangent,m=r.texCoord0,g="\n      ".concat(_(l,a),"/\n      ").concat(_(f,a),"/\n      ").concat(_(p,a),"/\n      ").concat(_(d,a),"/\n      ").concat(_(m,a),"/\n      ").concat(function(t){return(0,s.pC)(t)?t.toString():"-"}(t.transform),"\n    "),v=!1,h=(0,c.s1)(u,g,(function(){return v=!0,{start:n,length:l.count}}));v&&(n+=l.count),f&&(o.normal=!0),p&&(o.color=!0),d&&(o.tangent=!0),m&&(o.texCoord0=!0),i.push({gltf:t,writeVertices:v,region:h})};for(l.s();!(e=l.n()).done;)f()}catch(p){l.e(p)}finally{l.f()}return{vertexAttributes:{position:(0,y.gS)(C.fP,n),normal:o.normal?(0,y.gS)(C.ct,n):null,tangent:o.tangent?(0,y.gS)(C.ek,n):null,color:o.color?(0,y.gS)(C.mc,n):null,texCoord0:o.texCoord0?(0,y.gS)(C.Eu,n):null},parts:i,components:[]}}function D(t){return new v.Z({data:t.data,wrap:O(t.parameters.wrap)})}function I(t,e){var n,r=new u.Z(function(t,e){return(0,d.f)(j(t[0]),j(t[1]),j(t[2]),e)}(t.color,t.opacity)),o=t.emissiveFactor?new u.Z((n=t.emissiveFactor,(0,p.f)(j(n[0]),j(n[1]),j(n[2])))):null;return new g.Z({color:r,colorTexture:(0,s.Wg)((0,s.yw)(t.textureColor,(function(t){return e.get(t)}))),normalTexture:(0,s.Wg)((0,s.yw)(t.textureNormal,(function(t){return e.get(t)}))),emissiveColor:o,emissiveTexture:(0,s.Wg)((0,s.yw)(t.textureEmissive,(function(t){return e.get(t)}))),occlusionTexture:(0,s.Wg)((0,s.yw)(t.textureOcclusion,(function(t){return e.get(t)}))),alphaMode:N(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:(0,s.Wg)((0,s.yw)(t.textureMetallicRoughness,(function(t){return e.get(t)})))})}function L(t,e,n){e.writeVertices&&function(t,e){var n=t.vertexAttributes,r=n.position,o=n.normal,a=n.tangent,u=n.color,i=n.texCoord0,c=e.region.start,p=e.gltf,d=p.attributes,m=p.transform,g=d.position.count;if((0,x.t)(r.slice(c,g),d.position,m),(0,s.pC)(d.normal)&&(0,s.pC)(o)){var v=(0,l.a)((0,f.c)(),m);(0,x.a)(o.slice(c,g),d.normal,v)}else(0,s.pC)(o)&&(0,B.f)(o,0,0,1,{dstIndex:c,count:g});if((0,s.pC)(d.tangent)&&(0,s.pC)(a)){var h=(0,l.a)((0,f.c)(),m);(0,w.t)(a.slice(c,g),d.tangent,h)}else(0,s.pC)(a)&&(0,T.f)(a,0,0,1,1,{dstIndex:c,count:g});if((0,s.pC)(d.texCoord0)&&(0,s.pC)(i)?(0,F.n)(i.slice(c,g),d.texCoord0):(0,s.pC)(i)&&(0,F.f)(i,0,0,{dstIndex:c,count:g}),(0,s.pC)(d.color)&&(0,s.pC)(u)){var y=d.color,b=u.slice(c,g);if(4===y.elementCount)y instanceof C.ek?(0,w.s)(b,y,255):y instanceof C.mc?(0,T.c)(b,y):y instanceof C.v6&&(0,w.a)(b,y,8);else{(0,T.f)(b,255,255,255,255);var A=C.ne.fromTypedArray(b.typedBuffer,b.typedBufferStride);y instanceof C.ct?(0,x.s)(A,y,255):y instanceof C.ne?(0,B.c)(A,y):y instanceof C.mw&&(0,x.b)(A,y,8)}}else(0,s.pC)(u)&&(0,T.f)(u.slice(c,g),255,255,255,255)}(t,e);var r=e.gltf,o=function(t,e){switch(e){case 4:return(0,M.nh)(t,Z.DX);case 5:return(0,M.DA)(t);case 6:return(0,M.jX)(t)}}(r.indices||r.attributes.position.count,r.primitiveType),a=e.region.start;if(a)for(var u=0;u<o.length;u++)o[u]+=a;t.components.push(new m.Z({faces:o,material:n.get(r.material),trustSourceNormals:!0}))}function N(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function O(t){return{horizontal:P(t.s),vertical:P(t.t)}}function P(t){switch(t){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}function j(t){return 255*Math.pow(t,1/k.K)}}}]);
//# sourceMappingURL=5886.01f35f08.chunk.js.map